var Dx=Object.defineProperty;var My=n=>{throw TypeError(n)};var Fx=(n,t,e)=>t in n?Dx(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Y=(n,t,e)=>Fx(n,typeof t!="symbol"?t+"":t,e),Pp=(n,t,e)=>t.has(n)||My("Cannot "+e);var a=(n,t,e)=>(Pp(n,t,"read from private field"),e?e.call(n):t.get(n)),A=(n,t,e)=>t.has(n)?My("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),g=(n,t,e,s)=>(Pp(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),b=(n,t,e)=>(Pp(n,t,"access private method"),e);var De=(n,t,e,s)=>({set _(i){g(n,t,i,e)},get _(){return a(n,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function Ox(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var gw={exports:{}},ip={},mw={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh=Symbol.for("react.element"),jx=Symbol.for("react.portal"),zx=Symbol.for("react.fragment"),$x=Symbol.for("react.strict_mode"),Hx=Symbol.for("react.profiler"),Bx=Symbol.for("react.provider"),Ux=Symbol.for("react.context"),Gx=Symbol.for("react.forward_ref"),Vx=Symbol.for("react.suspense"),Wx=Symbol.for("react.memo"),Xx=Symbol.for("react.lazy"),Ly=Symbol.iterator;function qx(n){return n===null||typeof n!="object"?null:(n=Ly&&n[Ly]||n["@@iterator"],typeof n=="function"?n:null)}var yw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vw=Object.assign,ww={};function ic(n,t,e){this.props=n,this.context=t,this.refs=ww,this.updater=e||yw}ic.prototype.isReactComponent={};ic.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};ic.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Aw(){}Aw.prototype=ic.prototype;function w0(n,t,e){this.props=n,this.context=t,this.refs=ww,this.updater=e||yw}var A0=w0.prototype=new Aw;A0.constructor=w0;vw(A0,ic.prototype);A0.isPureReactComponent=!0;var Ny=Array.isArray,bw=Object.prototype.hasOwnProperty,b0={current:null},xw={key:!0,ref:!0,__self:!0,__source:!0};function Sw(n,t,e){var s,i={},r=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)bw.call(t,s)&&!xw.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:Bh,type:n,key:r,ref:o,props:i,_owner:b0.current}}function Yx(n,t){return{$$typeof:Bh,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function x0(n){return typeof n=="object"&&n!==null&&n.$$typeof===Bh}function Kx(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var Iy=/\/+/g;function Rp(n,t){return typeof n=="object"&&n!==null&&n.key!=null?Kx(""+n.key):t.toString(36)}function vd(n,t,e,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Bh:case jx:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+Rp(o,0):s,Ny(i)?(e="",n!=null&&(e=n.replace(Iy,"$&/")+"/"),vd(i,t,e,"",function(u){return u})):i!=null&&(x0(i)&&(i=Yx(i,e+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Iy,"$&/")+"/")+n)),t.push(i)),1;if(o=0,s=s===""?".":s+":",Ny(n))for(var l=0;l<n.length;l++){r=n[l];var c=s+Rp(r,l);o+=vd(r,t,e,c,i)}else if(c=qx(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=s+Rp(r,l++),o+=vd(r,t,e,c,i);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Kh(n,t,e){if(n==null)return n;var s=[],i=0;return vd(n,s,"","",function(r){return t.call(e,r,i++)}),s}function Qx(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var We={current:null},wd={transition:null},Zx={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:wd,ReactCurrentOwner:b0};function _w(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:Kh,forEach:function(n,t,e){Kh(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Kh(n,function(){t++}),t},toArray:function(n){return Kh(n,function(t){return t})||[]},only:function(n){if(!x0(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ct.Component=ic;ct.Fragment=zx;ct.Profiler=Hx;ct.PureComponent=w0;ct.StrictMode=$x;ct.Suspense=Vx;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zx;ct.act=_w;ct.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=vw({},n.props),i=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=b0.current),t.key!==void 0&&(i=""+t.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in t)bw.call(t,c)&&!xw.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Bh,type:n.type,key:i,ref:r,props:s,_owner:o}};ct.createContext=function(n){return n={$$typeof:Ux,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Bx,_context:n},n.Consumer=n};ct.createElement=Sw;ct.createFactory=function(n){var t=Sw.bind(null,n);return t.type=n,t};ct.createRef=function(){return{current:null}};ct.forwardRef=function(n){return{$$typeof:Gx,render:n}};ct.isValidElement=x0;ct.lazy=function(n){return{$$typeof:Xx,_payload:{_status:-1,_result:n},_init:Qx}};ct.memo=function(n,t){return{$$typeof:Wx,type:n,compare:t===void 0?null:t}};ct.startTransition=function(n){var t=wd.transition;wd.transition={};try{n()}finally{wd.transition=t}};ct.unstable_act=_w;ct.useCallback=function(n,t){return We.current.useCallback(n,t)};ct.useContext=function(n){return We.current.useContext(n)};ct.useDebugValue=function(){};ct.useDeferredValue=function(n){return We.current.useDeferredValue(n)};ct.useEffect=function(n,t){return We.current.useEffect(n,t)};ct.useId=function(){return We.current.useId()};ct.useImperativeHandle=function(n,t,e){return We.current.useImperativeHandle(n,t,e)};ct.useInsertionEffect=function(n,t){return We.current.useInsertionEffect(n,t)};ct.useLayoutEffect=function(n,t){return We.current.useLayoutEffect(n,t)};ct.useMemo=function(n,t){return We.current.useMemo(n,t)};ct.useReducer=function(n,t,e){return We.current.useReducer(n,t,e)};ct.useRef=function(n){return We.current.useRef(n)};ct.useState=function(n){return We.current.useState(n)};ct.useSyncExternalStore=function(n,t,e){return We.current.useSyncExternalStore(n,t,e)};ct.useTransition=function(){return We.current.useTransition()};ct.version="18.3.1";mw.exports=ct;var ee=mw.exports;const Dy=Ox(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=ee,tS=Symbol.for("react.element"),eS=Symbol.for("react.fragment"),nS=Object.prototype.hasOwnProperty,sS=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iS={key:!0,ref:!0,__self:!0,__source:!0};function Ew(n,t,e){var s,i={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)nS.call(t,s)&&!iS.hasOwnProperty(s)&&(i[s]=t[s]);if(n&&n.defaultProps)for(s in t=n.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:tS,type:n,key:r,ref:o,props:i,_owner:sS.current}}ip.Fragment=eS;ip.jsx=Ew;ip.jsxs=Ew;gw.exports=ip;var E=gw.exports,Cw={exports:{}},kn={},kw={exports:{}},Tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(N,R){var P=N.length;N.push(R);t:for(;0<P;){var L=P-1>>>1,j=N[L];if(0<i(j,R))N[L]=R,N[P]=j,P=L;else break t}}function e(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var R=N[0],P=N.pop();if(P!==R){N[0]=P;t:for(var L=0,j=N.length,$=j>>>1;L<$;){var Q=2*(L+1)-1,xt=N[Q],lt=Q+1,J=N[lt];if(0>i(xt,P))lt<j&&0>i(J,xt)?(N[L]=J,N[lt]=P,L=lt):(N[L]=xt,N[Q]=P,L=Q);else if(lt<j&&0>i(J,P))N[L]=J,N[lt]=P,L=lt;else break t}}return R}function i(N,R){var P=N.sortIndex-R.sortIndex;return P!==0?P:N.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var R=e(u);R!==null;){if(R.callback===null)s(u);else if(R.startTime<=N)s(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=e(u)}}function _(N){if(v=!1,x(N),!m)if(e(c)!==null)m=!0,H(C);else{var R=e(u);R!==null&&D(_,R.startTime-N)}}function C(N,R){m=!1,v&&(v=!1,y(M),M=-1),p=!0;var P=f;try{for(x(R),d=e(c);d!==null&&(!(d.expirationTime>R)||N&&!B());){var L=d.callback;if(typeof L=="function"){d.callback=null,f=d.priorityLevel;var j=L(d.expirationTime<=R);R=n.unstable_now(),typeof j=="function"?d.callback=j:d===e(c)&&s(c),x(R)}else s(c);d=e(c)}if(d!==null)var $=!0;else{var Q=e(u);Q!==null&&D(_,Q.startTime-R),$=!1}return $}finally{d=null,f=P,p=!1}}var T=!1,k=null,M=-1,I=5,O=-1;function B(){return!(n.unstable_now()-O<I)}function it(){if(k!==null){var N=n.unstable_now();O=N;var R=!0;try{R=k(!0,N)}finally{R?ft():(T=!1,k=null)}}else T=!1}var ft;if(typeof w=="function")ft=function(){w(it)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,Lt=at.port2;at.port1.onmessage=it,ft=function(){Lt.postMessage(null)}}else ft=function(){S(it,0)};function H(N){k=N,T||(T=!0,ft())}function D(N,R){M=S(function(){N(n.unstable_now())},R)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,H(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(N){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var P=f;f=R;try{return N()}finally{f=P}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,R){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var P=f;f=N;try{return R()}finally{f=P}},n.unstable_scheduleCallback=function(N,R,P){var L=n.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?L+P:L):P=L,N){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=P+j,N={id:h++,callback:R,priorityLevel:N,startTime:P,expirationTime:j,sortIndex:-1},P>L?(N.sortIndex=P,t(u,N),e(c)===null&&N===e(u)&&(v?(y(M),M=-1):v=!0,D(_,P-L))):(N.sortIndex=j,t(c,N),m||p||(m=!0,H(C))),N},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(N){var R=f;return function(){var P=f;f=R;try{return N.apply(this,arguments)}finally{f=P}}}})(Tw);kw.exports=Tw;var rS=kw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oS=ee,Cn=rS;function F(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pw=new Set,Qc={};function da(n,t){Ql(n,t),Ql(n+"Capture",t)}function Ql(n,t){for(Qc[n]=t,n=0;n<t.length;n++)Pw.add(t[n])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ug=Object.prototype.hasOwnProperty,aS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fy={},Oy={};function lS(n){return ug.call(Oy,n)?!0:ug.call(Fy,n)?!1:aS.test(n)?Oy[n]=!0:(Fy[n]=!0,!1)}function cS(n,t,e,s){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function uS(n,t,e,s){if(t===null||typeof t>"u"||cS(n,t,e,s))return!0;if(s)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(n,t,e,s,i,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){be[n]=new Xe(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];be[t]=new Xe(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){be[n]=new Xe(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){be[n]=new Xe(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){be[n]=new Xe(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){be[n]=new Xe(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){be[n]=new Xe(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){be[n]=new Xe(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){be[n]=new Xe(n,5,!1,n.toLowerCase(),null,!1,!1)});var S0=/[\-:]([a-z])/g;function _0(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(S0,_0);be[t]=new Xe(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(S0,_0);be[t]=new Xe(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(S0,_0);be[t]=new Xe(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){be[n]=new Xe(n,1,!1,n.toLowerCase(),null,!1,!1)});be.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){be[n]=new Xe(n,1,!1,n.toLowerCase(),null,!0,!0)});function E0(n,t,e,s){var i=be.hasOwnProperty(t)?be[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uS(t,e,i,s)&&(e=null),s||i===null?lS(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):i.mustUseProperty?n[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,s=i.attributeNamespace,e===null?n.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,s?n.setAttributeNS(s,t,e):n.setAttribute(t,e))))}var Ni=oS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qh=Symbol.for("react.element"),_a=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),hg=Symbol.for("react.profiler"),Rw=Symbol.for("react.provider"),Mw=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),fg=Symbol.for("react.suspense_list"),T0=Symbol.for("react.memo"),Fi=Symbol.for("react.lazy"),Lw=Symbol.for("react.offscreen"),jy=Symbol.iterator;function lc(n){return n===null||typeof n!="object"?null:(n=jy&&n[jy]||n["@@iterator"],typeof n=="function"?n:null)}var jt=Object.assign,Mp;function Ac(n){if(Mp===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Mp=t&&t[1]||""}return`
`+Mp+n}var Lp=!1;function Np(n,t){if(!n||Lp)return"";Lp=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){s=u}n.call(t.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,l=r.length-1;1<=o&&0<=l&&i[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==r[l]){var c=`
`+i[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{Lp=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?Ac(n):""}function hS(n){switch(n.tag){case 5:return Ac(n.type);case 16:return Ac("Lazy");case 13:return Ac("Suspense");case 19:return Ac("SuspenseList");case 0:case 2:case 15:return n=Np(n.type,!1),n;case 11:return n=Np(n.type.render,!1),n;case 1:return n=Np(n.type,!0),n;default:return""}}function pg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ea:return"Fragment";case _a:return"Portal";case hg:return"Profiler";case C0:return"StrictMode";case dg:return"Suspense";case fg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Mw:return(n.displayName||"Context")+".Consumer";case Rw:return(n._context.displayName||"Context")+".Provider";case k0:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case T0:return t=n.displayName||null,t!==null?t:pg(n.type)||"Memo";case Fi:t=n._payload,n=n._init;try{return pg(n(t))}catch{}}return null}function dS(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pg(t);case 8:return t===C0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Nw(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fS(n){var t=Nw(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),s=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Zh(n){n._valueTracker||(n._valueTracker=fS(n))}function Iw(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),s="";return n&&(s=Nw(n)?n.checked?"true":"false":n.value),n=s,n!==e?(t.setValue(n),!0):!1}function af(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function gg(n,t){var e=t.checked;return jt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function zy(n,t){var e=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;e=Tr(t.value!=null?t.value:e),n._wrapperState={initialChecked:s,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Dw(n,t){t=t.checked,t!=null&&E0(n,"checked",t,!1)}function mg(n,t){Dw(n,t);var e=Tr(t.value),s=t.type;if(e!=null)s==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?yg(n,t.type,e):t.hasOwnProperty("defaultValue")&&yg(n,t.type,Tr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function $y(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function yg(n,t,e){(t!=="number"||af(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var bc=Array.isArray;function ja(n,t,e,s){if(n=n.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<n.length;e++)i=t.hasOwnProperty("$"+n[e].value),n[e].selected!==i&&(n[e].selected=i),i&&s&&(n[e].defaultSelected=!0)}else{for(e=""+Tr(e),t=null,i=0;i<n.length;i++){if(n[i].value===e){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}t!==null||n[i].disabled||(t=n[i])}t!==null&&(t.selected=!0)}}function vg(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return jt({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Hy(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(F(92));if(bc(e)){if(1<e.length)throw Error(F(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:Tr(e)}}function Fw(n,t){var e=Tr(t.value),s=Tr(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),s!=null&&(n.defaultValue=""+s)}function By(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function Ow(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wg(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?Ow(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Jh,jw=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,s,i){MSApp.execUnsafeLocalFunction(function(){return n(t,e,s,i)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Jh=Jh||document.createElement("div"),Jh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function Zc(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var $c={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pS=["Webkit","ms","Moz","O"];Object.keys($c).forEach(function(n){pS.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),$c[t]=$c[n]})});function zw(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||$c.hasOwnProperty(n)&&$c[n]?(""+t).trim():t+"px"}function $w(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var s=e.indexOf("--")===0,i=zw(e,t[e],s);e==="float"&&(e="cssFloat"),s?n.setProperty(e,i):n[e]=i}}var gS=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ag(n,t){if(t){if(gS[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function bg(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xg=null;function P0(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sg=null,za=null,$a=null;function Uy(n){if(n=Vh(n)){if(typeof Sg!="function")throw Error(F(280));var t=n.stateNode;t&&(t=cp(t),Sg(n.stateNode,n.type,t))}}function Hw(n){za?$a?$a.push(n):$a=[n]:za=n}function Bw(){if(za){var n=za,t=$a;if($a=za=null,Uy(n),t)for(n=0;n<t.length;n++)Uy(t[n])}}function Uw(n,t){return n(t)}function Gw(){}var Ip=!1;function Vw(n,t,e){if(Ip)return n(t,e);Ip=!0;try{return Uw(n,t,e)}finally{Ip=!1,(za!==null||$a!==null)&&(Gw(),Bw())}}function Jc(n,t){var e=n.stateNode;if(e===null)return null;var s=cp(e);if(s===null)return null;e=s[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(F(231,t,typeof e));return e}var _g=!1;if(ki)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){_g=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{_g=!1}function mS(n,t,e,s,i,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var Hc=!1,lf=null,cf=!1,Eg=null,yS={onError:function(n){Hc=!0,lf=n}};function vS(n,t,e,s,i,r,o,l,c){Hc=!1,lf=null,mS.apply(yS,arguments)}function wS(n,t,e,s,i,r,o,l,c){if(vS.apply(this,arguments),Hc){if(Hc){var u=lf;Hc=!1,lf=null}else throw Error(F(198));cf||(cf=!0,Eg=u)}}function fa(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function Ww(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function Gy(n){if(fa(n)!==n)throw Error(F(188))}function AS(n){var t=n.alternate;if(!t){if(t=fa(n),t===null)throw Error(F(188));return t!==n?null:n}for(var e=n,s=t;;){var i=e.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){e=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===e)return Gy(i),n;if(r===s)return Gy(i),t;r=r.sibling}throw Error(F(188))}if(e.return!==s.return)e=i,s=r;else{for(var o=!1,l=i.child;l;){if(l===e){o=!0,e=i,s=r;break}if(l===s){o=!0,s=i,e=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===e){o=!0,e=r,s=i;break}if(l===s){o=!0,s=r,e=i;break}l=l.sibling}if(!o)throw Error(F(189))}}if(e.alternate!==s)throw Error(F(190))}if(e.tag!==3)throw Error(F(188));return e.stateNode.current===e?n:t}function Xw(n){return n=AS(n),n!==null?qw(n):null}function qw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=qw(n);if(t!==null)return t;n=n.sibling}return null}var Yw=Cn.unstable_scheduleCallback,Vy=Cn.unstable_cancelCallback,bS=Cn.unstable_shouldYield,xS=Cn.unstable_requestPaint,Gt=Cn.unstable_now,SS=Cn.unstable_getCurrentPriorityLevel,R0=Cn.unstable_ImmediatePriority,Kw=Cn.unstable_UserBlockingPriority,uf=Cn.unstable_NormalPriority,_S=Cn.unstable_LowPriority,Qw=Cn.unstable_IdlePriority,rp=null,$s=null;function ES(n){if($s&&typeof $s.onCommitFiberRoot=="function")try{$s.onCommitFiberRoot(rp,n,void 0,(n.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:TS,CS=Math.log,kS=Math.LN2;function TS(n){return n>>>=0,n===0?32:31-(CS(n)/kS|0)|0}var td=64,ed=4194304;function xc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function hf(n,t){var e=n.pendingLanes;if(e===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var l=o&~i;l!==0?s=xc(l):(r&=o,r!==0&&(s=xc(r)))}else o=e&~i,o!==0?s=xc(o):r!==0&&(s=xc(r));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(s&4&&(s|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=s;0<t;)e=31-hs(t),i=1<<e,s|=n[e],t&=~i;return s}function PS(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RS(n,t){for(var e=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-hs(r),l=1<<o,c=i[o];c===-1?(!(l&e)||l&s)&&(i[o]=PS(l,t)):c<=t&&(n.expiredLanes|=l),r&=~l}}function Cg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zw(){var n=td;return td<<=1,!(td&4194240)&&(td=64),n}function Dp(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function Uh(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-hs(t),n[t]=e}function MS(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<e;){var i=31-hs(e),r=1<<i;t[i]=0,s[i]=-1,n[i]=-1,e&=~r}}function M0(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var s=31-hs(e),i=1<<s;i&t|n[s]&t&&(n[s]|=t),e&=~i}}var vt=0;function Jw(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var t1,L0,e1,n1,s1,kg=!1,nd=[],wr=null,Ar=null,br=null,tu=new Map,eu=new Map,ji=[],LS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wy(n,t){switch(n){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":tu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(t.pointerId)}}function uc(n,t,e,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Vh(t),t!==null&&L0(t)),n):(n.eventSystemFlags|=s,t=n.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),n)}function NS(n,t,e,s,i){switch(t){case"focusin":return wr=uc(wr,n,t,e,s,i),!0;case"dragenter":return Ar=uc(Ar,n,t,e,s,i),!0;case"mouseover":return br=uc(br,n,t,e,s,i),!0;case"pointerover":var r=i.pointerId;return tu.set(r,uc(tu.get(r)||null,n,t,e,s,i)),!0;case"gotpointercapture":return r=i.pointerId,eu.set(r,uc(eu.get(r)||null,n,t,e,s,i)),!0}return!1}function i1(n){var t=Xr(n.target);if(t!==null){var e=fa(t);if(e!==null){if(t=e.tag,t===13){if(t=Ww(e),t!==null){n.blockedOn=t,s1(n.priority,function(){e1(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ad(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Tg(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var s=new e.constructor(e.type,e);xg=s,e.target.dispatchEvent(s),xg=null}else return t=Vh(e),t!==null&&L0(t),n.blockedOn=e,!1;t.shift()}return!0}function Xy(n,t,e){Ad(n)&&e.delete(t)}function IS(){kg=!1,wr!==null&&Ad(wr)&&(wr=null),Ar!==null&&Ad(Ar)&&(Ar=null),br!==null&&Ad(br)&&(br=null),tu.forEach(Xy),eu.forEach(Xy)}function hc(n,t){n.blockedOn===t&&(n.blockedOn=null,kg||(kg=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,IS)))}function nu(n){function t(i){return hc(i,n)}if(0<nd.length){hc(nd[0],n);for(var e=1;e<nd.length;e++){var s=nd[e];s.blockedOn===n&&(s.blockedOn=null)}}for(wr!==null&&hc(wr,n),Ar!==null&&hc(Ar,n),br!==null&&hc(br,n),tu.forEach(t),eu.forEach(t),e=0;e<ji.length;e++)s=ji[e],s.blockedOn===n&&(s.blockedOn=null);for(;0<ji.length&&(e=ji[0],e.blockedOn===null);)i1(e),e.blockedOn===null&&ji.shift()}var Ha=Ni.ReactCurrentBatchConfig,df=!0;function DS(n,t,e,s){var i=vt,r=Ha.transition;Ha.transition=null;try{vt=1,N0(n,t,e,s)}finally{vt=i,Ha.transition=r}}function FS(n,t,e,s){var i=vt,r=Ha.transition;Ha.transition=null;try{vt=4,N0(n,t,e,s)}finally{vt=i,Ha.transition=r}}function N0(n,t,e,s){if(df){var i=Tg(n,t,e,s);if(i===null)Vp(n,t,s,ff,e),Wy(n,s);else if(NS(i,n,t,e,s))s.stopPropagation();else if(Wy(n,s),t&4&&-1<LS.indexOf(n)){for(;i!==null;){var r=Vh(i);if(r!==null&&t1(r),r=Tg(n,t,e,s),r===null&&Vp(n,t,s,ff,e),r===i)break;i=r}i!==null&&s.stopPropagation()}else Vp(n,t,s,null,e)}}var ff=null;function Tg(n,t,e,s){if(ff=null,n=P0(s),n=Xr(n),n!==null)if(t=fa(n),t===null)n=null;else if(e=t.tag,e===13){if(n=Ww(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return ff=n,null}function r1(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SS()){case R0:return 1;case Kw:return 4;case uf:case _S:return 16;case Qw:return 536870912;default:return 16}default:return 16}}var yr=null,I0=null,bd=null;function o1(){if(bd)return bd;var n,t=I0,e=t.length,s,i="value"in yr?yr.value:yr.textContent,r=i.length;for(n=0;n<e&&t[n]===i[n];n++);var o=e-n;for(s=1;s<=o&&t[e-s]===i[r-s];s++);return bd=i.slice(n,1<s?1-s:void 0)}function xd(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function sd(){return!0}function qy(){return!1}function Tn(n){function t(e,s,i,r,o){this._reactName=e,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(e=n[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?sd:qy,this.isPropagationStopped=qy,this}return jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=sd)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=sd)},persist:function(){},isPersistent:sd}),t}var rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D0=Tn(rc),Gh=jt({},rc,{view:0,detail:0}),OS=Tn(Gh),Fp,Op,dc,op=jt({},Gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F0,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==dc&&(dc&&n.type==="mousemove"?(Fp=n.screenX-dc.screenX,Op=n.screenY-dc.screenY):Op=Fp=0,dc=n),Fp)},movementY:function(n){return"movementY"in n?n.movementY:Op}}),Yy=Tn(op),jS=jt({},op,{dataTransfer:0}),zS=Tn(jS),$S=jt({},Gh,{relatedTarget:0}),jp=Tn($S),HS=jt({},rc,{animationName:0,elapsedTime:0,pseudoElement:0}),BS=Tn(HS),US=jt({},rc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),GS=Tn(US),VS=jt({},rc,{data:0}),Ky=Tn(VS),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YS(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=qS[n])?!!t[n]:!1}function F0(){return YS}var KS=jt({},Gh,{key:function(n){if(n.key){var t=WS[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=xd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F0,charCode:function(n){return n.type==="keypress"?xd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),QS=Tn(KS),ZS=jt({},op,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qy=Tn(ZS),JS=jt({},Gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F0}),t_=Tn(JS),e_=jt({},rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),n_=Tn(e_),s_=jt({},op,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),i_=Tn(s_),r_=[9,13,27,32],O0=ki&&"CompositionEvent"in window,Bc=null;ki&&"documentMode"in document&&(Bc=document.documentMode);var o_=ki&&"TextEvent"in window&&!Bc,a1=ki&&(!O0||Bc&&8<Bc&&11>=Bc),Zy=" ",Jy=!1;function l1(n,t){switch(n){case"keyup":return r_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c1(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ca=!1;function a_(n,t){switch(n){case"compositionend":return c1(t);case"keypress":return t.which!==32?null:(Jy=!0,Zy);case"textInput":return n=t.data,n===Zy&&Jy?null:n;default:return null}}function l_(n,t){if(Ca)return n==="compositionend"||!O0&&l1(n,t)?(n=o1(),bd=I0=yr=null,Ca=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return a1&&t.locale!=="ko"?null:t.data;default:return null}}var c_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tv(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!c_[n.type]:t==="textarea"}function u1(n,t,e,s){Hw(s),t=pf(t,"onChange"),0<t.length&&(e=new D0("onChange","change",null,e,s),n.push({event:e,listeners:t}))}var Uc=null,su=null;function u_(n){b1(n,0)}function ap(n){var t=Pa(n);if(Iw(t))return n}function h_(n,t){if(n==="change")return t}var h1=!1;if(ki){var zp;if(ki){var $p="oninput"in document;if(!$p){var ev=document.createElement("div");ev.setAttribute("oninput","return;"),$p=typeof ev.oninput=="function"}zp=$p}else zp=!1;h1=zp&&(!document.documentMode||9<document.documentMode)}function nv(){Uc&&(Uc.detachEvent("onpropertychange",d1),su=Uc=null)}function d1(n){if(n.propertyName==="value"&&ap(su)){var t=[];u1(t,su,n,P0(n)),Vw(u_,t)}}function d_(n,t,e){n==="focusin"?(nv(),Uc=t,su=e,Uc.attachEvent("onpropertychange",d1)):n==="focusout"&&nv()}function f_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ap(su)}function p_(n,t){if(n==="click")return ap(t)}function g_(n,t){if(n==="input"||n==="change")return ap(t)}function m_(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var fs=typeof Object.is=="function"?Object.is:m_;function iu(n,t){if(fs(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),s=Object.keys(t);if(e.length!==s.length)return!1;for(s=0;s<e.length;s++){var i=e[s];if(!ug.call(t,i)||!fs(n[i],t[i]))return!1}return!0}function sv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function iv(n,t){var e=sv(n);n=0;for(var s;e;){if(e.nodeType===3){if(s=n+e.textContent.length,n<=t&&s>=t)return{node:e,offset:t-n};n=s}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=sv(e)}}function f1(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?f1(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function p1(){for(var n=window,t=af();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=af(n.document)}return t}function j0(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function y_(n){var t=p1(),e=n.focusedElem,s=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&f1(e.ownerDocument.documentElement,e)){if(s!==null&&j0(e)){if(t=s.start,n=s.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var i=e.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=iv(e,r);var o=iv(e,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var v_=ki&&"documentMode"in document&&11>=document.documentMode,ka=null,Pg=null,Gc=null,Rg=!1;function rv(n,t,e){var s=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Rg||ka==null||ka!==af(s)||(s=ka,"selectionStart"in s&&j0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Gc&&iu(Gc,s)||(Gc=s,s=pf(Pg,"onSelect"),0<s.length&&(t=new D0("onSelect","select",null,t,e),n.push({event:t,listeners:s}),t.target=ka)))}function id(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Ta={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},Hp={},g1={};ki&&(g1=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function lp(n){if(Hp[n])return Hp[n];if(!Ta[n])return n;var t=Ta[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in g1)return Hp[n]=t[e];return n}var m1=lp("animationend"),y1=lp("animationiteration"),v1=lp("animationstart"),w1=lp("transitionend"),A1=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(n,t){A1.set(n,t),da(t,[n])}for(var Bp=0;Bp<ov.length;Bp++){var Up=ov[Bp],w_=Up.toLowerCase(),A_=Up[0].toUpperCase()+Up.slice(1);Nr(w_,"on"+A_)}Nr(m1,"onAnimationEnd");Nr(y1,"onAnimationIteration");Nr(v1,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(w1,"onTransitionEnd");Ql("onMouseEnter",["mouseout","mouseover"]);Ql("onMouseLeave",["mouseout","mouseover"]);Ql("onPointerEnter",["pointerout","pointerover"]);Ql("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sc));function av(n,t,e){var s=n.type||"unknown-event";n.currentTarget=e,wS(s,t,void 0,n),n.currentTarget=null}function b1(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var s=n[e],i=s.event;s=s.listeners;t:{var r=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break t;av(i,l,u),r=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break t;av(i,l,u),r=c}}}if(cf)throw n=Eg,cf=!1,Eg=null,n}function Et(n,t){var e=t[Dg];e===void 0&&(e=t[Dg]=new Set);var s=n+"__bubble";e.has(s)||(x1(t,n,2,!1),e.add(s))}function Gp(n,t,e){var s=0;t&&(s|=4),x1(e,n,s,t)}var rd="_reactListening"+Math.random().toString(36).slice(2);function ru(n){if(!n[rd]){n[rd]=!0,Pw.forEach(function(e){e!=="selectionchange"&&(b_.has(e)||Gp(e,!1,n),Gp(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[rd]||(t[rd]=!0,Gp("selectionchange",!1,t))}}function x1(n,t,e,s){switch(r1(t)){case 1:var i=DS;break;case 4:i=FS;break;default:i=N0}e=i.bind(null,t,e,n),i=void 0,!_g||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(t,e,{capture:!0,passive:i}):n.addEventListener(t,e,!0):i!==void 0?n.addEventListener(t,e,{passive:i}):n.addEventListener(t,e,!1)}function Vp(n,t,e,s,i){var r=s;if(!(t&1)&&!(t&2)&&s!==null)t:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Xr(l),o===null)return;if(c=o.tag,c===5||c===6){s=r=o;continue t}l=l.parentNode}}s=s.return}Vw(function(){var u=r,h=P0(e),d=[];t:{var f=A1.get(n);if(f!==void 0){var p=D0,m=n;switch(n){case"keypress":if(xd(e)===0)break t;case"keydown":case"keyup":p=QS;break;case"focusin":m="focus",p=jp;break;case"focusout":m="blur",p=jp;break;case"beforeblur":case"afterblur":p=jp;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=zS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=t_;break;case m1:case y1:case v1:p=BS;break;case w1:p=n_;break;case"scroll":p=OS;break;case"wheel":p=i_;break;case"copy":case"cut":case"paste":p=GS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qy}var v=(t&4)!==0,S=!v&&n==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var w=u,x;w!==null;){x=w;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=Jc(w,y),_!=null&&v.push(ou(w,_,x)))),S)break;w=w.return}0<v.length&&(f=new p(f,m,null,e,h),d.push({event:f,listeners:v}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&e!==xg&&(m=e.relatedTarget||e.fromElement)&&(Xr(m)||m[Ti]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=e.relatedTarget||e.toElement,p=u,m=m?Xr(m):null,m!==null&&(S=fa(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Yy,_="onMouseLeave",y="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(v=Qy,_="onPointerLeave",y="onPointerEnter",w="pointer"),S=p==null?f:Pa(p),x=m==null?f:Pa(m),f=new v(_,w+"leave",p,e,h),f.target=S,f.relatedTarget=x,_=null,Xr(h)===u&&(v=new v(y,w+"enter",m,e,h),v.target=x,v.relatedTarget=S,_=v),S=_,p&&m)e:{for(v=p,y=m,w=0,x=v;x;x=ma(x))w++;for(x=0,_=y;_;_=ma(_))x++;for(;0<w-x;)v=ma(v),w--;for(;0<x-w;)y=ma(y),x--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break e;v=ma(v),y=ma(y)}v=null}else v=null;p!==null&&lv(d,f,p,v,!1),m!==null&&S!==null&&lv(d,S,m,v,!0)}}t:{if(f=u?Pa(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=h_;else if(tv(f))if(h1)C=g_;else{C=f_;var T=d_}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=p_);if(C&&(C=C(n,u))){u1(d,C,e,h);break t}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&yg(f,"number",f.value)}switch(T=u?Pa(u):window,n){case"focusin":(tv(T)||T.contentEditable==="true")&&(ka=T,Pg=u,Gc=null);break;case"focusout":Gc=Pg=ka=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,rv(d,e,h);break;case"selectionchange":if(v_)break;case"keydown":case"keyup":rv(d,e,h)}var k;if(O0)t:{switch(n){case"compositionstart":var M="onCompositionStart";break t;case"compositionend":M="onCompositionEnd";break t;case"compositionupdate":M="onCompositionUpdate";break t}M=void 0}else Ca?l1(n,e)&&(M="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(M="onCompositionStart");M&&(a1&&e.locale!=="ko"&&(Ca||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ca&&(k=o1()):(yr=h,I0="value"in yr?yr.value:yr.textContent,Ca=!0)),T=pf(u,M),0<T.length&&(M=new Ky(M,n,null,e,h),d.push({event:M,listeners:T}),k?M.data=k:(k=c1(e),k!==null&&(M.data=k)))),(k=o_?a_(n,e):l_(n,e))&&(u=pf(u,"onBeforeInput"),0<u.length&&(h=new Ky("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=k))}b1(d,t)})}function ou(n,t,e){return{instance:n,listener:t,currentTarget:e}}function pf(n,t){for(var e=t+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Jc(n,e),r!=null&&s.unshift(ou(n,r,i)),r=Jc(n,t),r!=null&&s.push(ou(n,r,i))),n=n.return}return s}function ma(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function lv(n,t,e,s,i){for(var r=t._reactName,o=[];e!==null&&e!==s;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,i?(c=Jc(e,r),c!=null&&o.unshift(ou(e,c,l))):i||(c=Jc(e,r),c!=null&&o.push(ou(e,c,l)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var x_=/\r\n?/g,S_=/\u0000|\uFFFD/g;function cv(n){return(typeof n=="string"?n:""+n).replace(x_,`
`).replace(S_,"")}function od(n,t,e){if(t=cv(t),cv(n)!==t&&e)throw Error(F(425))}function gf(){}var Mg=null,Lg=null;function Ng(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ig=typeof setTimeout=="function"?setTimeout:void 0,__=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,E_=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(n){return uv.resolve(null).then(n).catch(C_)}:Ig;function C_(n){setTimeout(function(){throw n})}function Wp(n,t){var e=t,s=0;do{var i=e.nextSibling;if(n.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(s===0){n.removeChild(i),nu(t);return}s--}else e!=="$"&&e!=="$?"&&e!=="$!"||s++;e=i}while(e);nu(t)}function xr(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function hv(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var oc=Math.random().toString(36).slice(2),zs="__reactFiber$"+oc,au="__reactProps$"+oc,Ti="__reactContainer$"+oc,Dg="__reactEvents$"+oc,k_="__reactListeners$"+oc,T_="__reactHandles$"+oc;function Xr(n){var t=n[zs];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Ti]||e[zs]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=hv(n);n!==null;){if(e=n[zs])return e;n=hv(n)}return t}n=e,e=n.parentNode}return null}function Vh(n){return n=n[zs]||n[Ti],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Pa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(F(33))}function cp(n){return n[au]||null}var Fg=[],Ra=-1;function Ir(n){return{current:n}}function kt(n){0>Ra||(n.current=Fg[Ra],Fg[Ra]=null,Ra--)}function _t(n,t){Ra++,Fg[Ra]=n.current,n.current=t}var Pr={},Ie=Ir(Pr),sn=Ir(!1),sa=Pr;function Zl(n,t){var e=n.type.contextTypes;if(!e)return Pr;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in e)i[r]=t[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=i),i}function rn(n){return n=n.childContextTypes,n!=null}function mf(){kt(sn),kt(Ie)}function dv(n,t,e){if(Ie.current!==Pr)throw Error(F(168));_t(Ie,t),_t(sn,e)}function S1(n,t,e){var s=n.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return e;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(F(108,dS(n)||"Unknown",i));return jt({},e,s)}function yf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Pr,sa=Ie.current,_t(Ie,n),_t(sn,sn.current),!0}function fv(n,t,e){var s=n.stateNode;if(!s)throw Error(F(169));e?(n=S1(n,t,sa),s.__reactInternalMemoizedMergedChildContext=n,kt(sn),kt(Ie),_t(Ie,n)):kt(sn),_t(sn,e)}var Ys=null,up=!1,Xp=!1;function _1(n){Ys===null?Ys=[n]:Ys.push(n)}function P_(n){up=!0,_1(n)}function Dr(){if(!Xp&&Ys!==null){Xp=!0;var n=0,t=vt;try{var e=Ys;for(vt=1;n<e.length;n++){var s=e[n];do s=s(!0);while(s!==null)}Ys=null,up=!1}catch(i){throw Ys!==null&&(Ys=Ys.slice(n+1)),Yw(R0,Dr),i}finally{vt=t,Xp=!1}}return null}var Ma=[],La=0,vf=null,wf=0,On=[],jn=0,ia=null,xi=1,Si="";function $r(n,t){Ma[La++]=wf,Ma[La++]=vf,vf=n,wf=t}function E1(n,t,e){On[jn++]=xi,On[jn++]=Si,On[jn++]=ia,ia=n;var s=xi;n=Si;var i=32-hs(s)-1;s&=~(1<<i),e+=1;var r=32-hs(t)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,xi=1<<32-hs(t)+i|e<<i|s,Si=r+n}else xi=1<<r|e<<i|s,Si=n}function z0(n){n.return!==null&&($r(n,1),E1(n,1,0))}function $0(n){for(;n===vf;)vf=Ma[--La],Ma[La]=null,wf=Ma[--La],Ma[La]=null;for(;n===ia;)ia=On[--jn],On[jn]=null,Si=On[--jn],On[jn]=null,xi=On[--jn],On[jn]=null}var _n=null,Sn=null,Mt=!1,cs=null;function C1(n,t){var e=Hn(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function pv(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,_n=n,Sn=xr(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,_n=n,Sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=ia!==null?{id:xi,overflow:Si}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Hn(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,_n=n,Sn=null,!0):!1;default:return!1}}function Og(n){return(n.mode&1)!==0&&(n.flags&128)===0}function jg(n){if(Mt){var t=Sn;if(t){var e=t;if(!pv(n,t)){if(Og(n))throw Error(F(418));t=xr(e.nextSibling);var s=_n;t&&pv(n,t)?C1(s,e):(n.flags=n.flags&-4097|2,Mt=!1,_n=n)}}else{if(Og(n))throw Error(F(418));n.flags=n.flags&-4097|2,Mt=!1,_n=n}}}function gv(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_n=n}function ad(n){if(n!==_n)return!1;if(!Mt)return gv(n),Mt=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!Ng(n.type,n.memoizedProps)),t&&(t=Sn)){if(Og(n))throw k1(),Error(F(418));for(;t;)C1(n,t),t=xr(t.nextSibling)}if(gv(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(F(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Sn=xr(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Sn=null}}else Sn=_n?xr(n.stateNode.nextSibling):null;return!0}function k1(){for(var n=Sn;n;)n=xr(n.nextSibling)}function Jl(){Sn=_n=null,Mt=!1}function H0(n){cs===null?cs=[n]:cs.push(n)}var R_=Ni.ReactCurrentBatchConfig;function fc(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(F(309));var s=e.stateNode}if(!s)throw Error(F(147,n));var i=s,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=i.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(F(284));if(!e._owner)throw Error(F(290,n))}return n}function ld(n,t){throw n=Object.prototype.toString.call(t),Error(F(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function mv(n){var t=n._init;return t(n._payload)}function T1(n){function t(y,w){if(n){var x=y.deletions;x===null?(y.deletions=[w],y.flags|=16):x.push(w)}}function e(y,w){if(!n)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function s(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Cr(y,w),y.index=0,y.sibling=null,y}function r(y,w,x){return y.index=x,n?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags|=2,w):x):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function l(y,w,x,_){return w===null||w.tag!==6?(w=tg(x,y.mode,_),w.return=y,w):(w=i(w,x),w.return=y,w)}function c(y,w,x,_){var C=x.type;return C===Ea?h(y,w,x.props.children,_,x.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fi&&mv(C)===w.type)?(_=i(w,x.props),_.ref=fc(y,w,x),_.return=y,_):(_=Pd(x.type,x.key,x.props,null,y.mode,_),_.ref=fc(y,w,x),_.return=y,_)}function u(y,w,x,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=eg(x,y.mode,_),w.return=y,w):(w=i(w,x.children||[]),w.return=y,w)}function h(y,w,x,_,C){return w===null||w.tag!==7?(w=na(x,y.mode,_,C),w.return=y,w):(w=i(w,x),w.return=y,w)}function d(y,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tg(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Qh:return x=Pd(w.type,w.key,w.props,null,y.mode,x),x.ref=fc(y,null,w),x.return=y,x;case _a:return w=eg(w,y.mode,x),w.return=y,w;case Fi:var _=w._init;return d(y,_(w._payload),x)}if(bc(w)||lc(w))return w=na(w,y.mode,x,null),w.return=y,w;ld(y,w)}return null}function f(y,w,x,_){var C=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:l(y,w,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Qh:return x.key===C?c(y,w,x,_):null;case _a:return x.key===C?u(y,w,x,_):null;case Fi:return C=x._init,f(y,w,C(x._payload),_)}if(bc(x)||lc(x))return C!==null?null:h(y,w,x,_,null);ld(y,x)}return null}function p(y,w,x,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,l(w,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qh:return y=y.get(_.key===null?x:_.key)||null,c(w,y,_,C);case _a:return y=y.get(_.key===null?x:_.key)||null,u(w,y,_,C);case Fi:var T=_._init;return p(y,w,x,T(_._payload),C)}if(bc(_)||lc(_))return y=y.get(x)||null,h(w,y,_,C,null);ld(w,_)}return null}function m(y,w,x,_){for(var C=null,T=null,k=w,M=w=0,I=null;k!==null&&M<x.length;M++){k.index>M?(I=k,k=null):I=k.sibling;var O=f(y,k,x[M],_);if(O===null){k===null&&(k=I);break}n&&k&&O.alternate===null&&t(y,k),w=r(O,w,M),T===null?C=O:T.sibling=O,T=O,k=I}if(M===x.length)return e(y,k),Mt&&$r(y,M),C;if(k===null){for(;M<x.length;M++)k=d(y,x[M],_),k!==null&&(w=r(k,w,M),T===null?C=k:T.sibling=k,T=k);return Mt&&$r(y,M),C}for(k=s(y,k);M<x.length;M++)I=p(k,y,M,x[M],_),I!==null&&(n&&I.alternate!==null&&k.delete(I.key===null?M:I.key),w=r(I,w,M),T===null?C=I:T.sibling=I,T=I);return n&&k.forEach(function(B){return t(y,B)}),Mt&&$r(y,M),C}function v(y,w,x,_){var C=lc(x);if(typeof C!="function")throw Error(F(150));if(x=C.call(x),x==null)throw Error(F(151));for(var T=C=null,k=w,M=w=0,I=null,O=x.next();k!==null&&!O.done;M++,O=x.next()){k.index>M?(I=k,k=null):I=k.sibling;var B=f(y,k,O.value,_);if(B===null){k===null&&(k=I);break}n&&k&&B.alternate===null&&t(y,k),w=r(B,w,M),T===null?C=B:T.sibling=B,T=B,k=I}if(O.done)return e(y,k),Mt&&$r(y,M),C;if(k===null){for(;!O.done;M++,O=x.next())O=d(y,O.value,_),O!==null&&(w=r(O,w,M),T===null?C=O:T.sibling=O,T=O);return Mt&&$r(y,M),C}for(k=s(y,k);!O.done;M++,O=x.next())O=p(k,y,M,O.value,_),O!==null&&(n&&O.alternate!==null&&k.delete(O.key===null?M:O.key),w=r(O,w,M),T===null?C=O:T.sibling=O,T=O);return n&&k.forEach(function(it){return t(y,it)}),Mt&&$r(y,M),C}function S(y,w,x,_){if(typeof x=="object"&&x!==null&&x.type===Ea&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Qh:t:{for(var C=x.key,T=w;T!==null;){if(T.key===C){if(C=x.type,C===Ea){if(T.tag===7){e(y,T.sibling),w=i(T,x.props.children),w.return=y,y=w;break t}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fi&&mv(C)===T.type){e(y,T.sibling),w=i(T,x.props),w.ref=fc(y,T,x),w.return=y,y=w;break t}e(y,T);break}else t(y,T);T=T.sibling}x.type===Ea?(w=na(x.props.children,y.mode,_,x.key),w.return=y,y=w):(_=Pd(x.type,x.key,x.props,null,y.mode,_),_.ref=fc(y,w,x),_.return=y,y=_)}return o(y);case _a:t:{for(T=x.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){e(y,w.sibling),w=i(w,x.children||[]),w.return=y,y=w;break t}else{e(y,w);break}else t(y,w);w=w.sibling}w=eg(x,y.mode,_),w.return=y,y=w}return o(y);case Fi:return T=x._init,S(y,w,T(x._payload),_)}if(bc(x))return m(y,w,x,_);if(lc(x))return v(y,w,x,_);ld(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(e(y,w.sibling),w=i(w,x),w.return=y,y=w):(e(y,w),w=tg(x,y.mode,_),w.return=y,y=w),o(y)):e(y,w)}return S}var tc=T1(!0),P1=T1(!1),Af=Ir(null),bf=null,Na=null,B0=null;function U0(){B0=Na=bf=null}function G0(n){var t=Af.current;kt(Af),n._currentValue=t}function zg(n,t,e){for(;n!==null;){var s=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),n===e)break;n=n.return}}function Ba(n,t){bf=n,B0=Na=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(nn=!0),n.firstContext=null)}function Gn(n){var t=n._currentValue;if(B0!==n)if(n={context:n,memoizedValue:t,next:null},Na===null){if(bf===null)throw Error(F(308));Na=n,bf.dependencies={lanes:0,firstContext:n}}else Na=Na.next=n;return t}var qr=null;function V0(n){qr===null?qr=[n]:qr.push(n)}function R1(n,t,e,s){var i=t.interleaved;return i===null?(e.next=e,V0(t)):(e.next=i.next,i.next=e),t.interleaved=e,Pi(n,s)}function Pi(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var Oi=!1;function W0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M1(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _i(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(n,t,e){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,ht&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Pi(n,e)}return i=s.interleaved,i===null?(t.next=t,V0(s)):(t.next=i.next,i.next=t),s.interleaved=t,Pi(n,e)}function Sd(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var s=t.lanes;s&=n.pendingLanes,e|=s,t.lanes=e,M0(n,e)}}function yv(n,t){var e=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,e===s)){var i=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?i=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?i=r=t:r=r.next=t}else i=r=t;e={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function xf(n,t,e,s){var i=n.updateQueue;Oi=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var m=n,v=l;switch(f=t,p=e,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,f);break t}d=m;break t;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break t;d=jt({},d,f);break t;case 2:Oi=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);oa|=o,n.lanes=o,n.memoizedState=d}}function vv(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var s=n[t],i=s.callback;if(i!==null){if(s.callback=null,s=e,typeof i!="function")throw Error(F(191,i));i.call(s)}}}var Wh={},Hs=Ir(Wh),lu=Ir(Wh),cu=Ir(Wh);function Yr(n){if(n===Wh)throw Error(F(174));return n}function X0(n,t){switch(_t(cu,t),_t(lu,n),_t(Hs,Wh),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wg(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=wg(t,n)}kt(Hs),_t(Hs,t)}function ec(){kt(Hs),kt(lu),kt(cu)}function L1(n){Yr(cu.current);var t=Yr(Hs.current),e=wg(t,n.type);t!==e&&(_t(lu,n),_t(Hs,e))}function q0(n){lu.current===n&&(kt(Hs),kt(lu))}var Dt=Ir(0);function Sf(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qp=[];function Y0(){for(var n=0;n<qp.length;n++)qp[n]._workInProgressVersionPrimary=null;qp.length=0}var _d=Ni.ReactCurrentDispatcher,Yp=Ni.ReactCurrentBatchConfig,ra=0,Ot=null,te=null,ue=null,_f=!1,Vc=!1,uu=0,M_=0;function xe(){throw Error(F(321))}function K0(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!fs(n[e],t[e]))return!1;return!0}function Q0(n,t,e,s,i,r){if(ra=r,Ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_d.current=n===null||n.memoizedState===null?D_:F_,n=e(s,i),Vc){r=0;do{if(Vc=!1,uu=0,25<=r)throw Error(F(301));r+=1,ue=te=null,t.updateQueue=null,_d.current=O_,n=e(s,i)}while(Vc)}if(_d.current=Ef,t=te!==null&&te.next!==null,ra=0,ue=te=Ot=null,_f=!1,t)throw Error(F(300));return n}function Z0(){var n=uu!==0;return uu=0,n}function bs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?Ot.memoizedState=ue=n:ue=ue.next=n,ue}function Vn(){if(te===null){var n=Ot.alternate;n=n!==null?n.memoizedState:null}else n=te.next;var t=ue===null?Ot.memoizedState:ue.next;if(t!==null)ue=t,te=n;else{if(n===null)throw Error(F(310));te=n,n={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},ue===null?Ot.memoizedState=ue=n:ue=ue.next=n}return ue}function hu(n,t){return typeof t=="function"?t(n):t}function Kp(n){var t=Vn(),e=t.queue;if(e===null)throw Error(F(311));e.lastRenderedReducer=n;var s=te,i=s.baseQueue,r=e.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,e.pending=null}if(i!==null){r=i.next,s=s.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((ra&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=s):c=c.next=d,Ot.lanes|=h,oa|=h}u=u.next}while(u!==null&&u!==r);c===null?o=s:c.next=l,fs(s,t.memoizedState)||(nn=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,e.lastRenderedState=s}if(n=e.interleaved,n!==null){i=n;do r=i.lane,Ot.lanes|=r,oa|=r,i=i.next;while(i!==n)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Qp(n){var t=Vn(),e=t.queue;if(e===null)throw Error(F(311));e.lastRenderedReducer=n;var s=e.dispatch,i=e.pending,r=t.memoizedState;if(i!==null){e.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);fs(r,t.memoizedState)||(nn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,s]}function N1(){}function I1(n,t){var e=Ot,s=Vn(),i=t(),r=!fs(s.memoizedState,i);if(r&&(s.memoizedState=i,nn=!0),s=s.queue,J0(O1.bind(null,e,s,n),[n]),s.getSnapshot!==t||r||ue!==null&&ue.memoizedState.tag&1){if(e.flags|=2048,du(9,F1.bind(null,e,s,i,t),void 0,null),he===null)throw Error(F(349));ra&30||D1(e,t,i)}return i}function D1(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function F1(n,t,e,s){t.value=e,t.getSnapshot=s,j1(t)&&z1(n)}function O1(n,t,e){return e(function(){j1(t)&&z1(n)})}function j1(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!fs(n,e)}catch{return!0}}function z1(n){var t=Pi(n,1);t!==null&&ds(t,n,1,-1)}function wv(n){var t=bs();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:n},t.queue=n,n=n.dispatch=I_.bind(null,Ot,n),[t.memoizedState,n]}function du(n,t,e,s){return n={tag:n,create:t,destroy:e,deps:s,next:null},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(s=e.next,e.next=n,n.next=s,t.lastEffect=n)),n}function $1(){return Vn().memoizedState}function Ed(n,t,e,s){var i=bs();Ot.flags|=n,i.memoizedState=du(1|t,e,void 0,s===void 0?null:s)}function hp(n,t,e,s){var i=Vn();s=s===void 0?null:s;var r=void 0;if(te!==null){var o=te.memoizedState;if(r=o.destroy,s!==null&&K0(s,o.deps)){i.memoizedState=du(t,e,r,s);return}}Ot.flags|=n,i.memoizedState=du(1|t,e,r,s)}function Av(n,t){return Ed(8390656,8,n,t)}function J0(n,t){return hp(2048,8,n,t)}function H1(n,t){return hp(4,2,n,t)}function B1(n,t){return hp(4,4,n,t)}function U1(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function G1(n,t,e){return e=e!=null?e.concat([n]):null,hp(4,4,U1.bind(null,t,n),e)}function ty(){}function V1(n,t){var e=Vn();t=t===void 0?null:t;var s=e.memoizedState;return s!==null&&t!==null&&K0(t,s[1])?s[0]:(e.memoizedState=[n,t],n)}function W1(n,t){var e=Vn();t=t===void 0?null:t;var s=e.memoizedState;return s!==null&&t!==null&&K0(t,s[1])?s[0]:(n=n(),e.memoizedState=[n,t],n)}function X1(n,t,e){return ra&21?(fs(e,t)||(e=Zw(),Ot.lanes|=e,oa|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,nn=!0),n.memoizedState=e)}function L_(n,t){var e=vt;vt=e!==0&&4>e?e:4,n(!0);var s=Yp.transition;Yp.transition={};try{n(!1),t()}finally{vt=e,Yp.transition=s}}function q1(){return Vn().memoizedState}function N_(n,t,e){var s=Er(n);if(e={lane:s,action:e,hasEagerState:!1,eagerState:null,next:null},Y1(n))K1(t,e);else if(e=R1(n,t,e,s),e!==null){var i=Be();ds(e,n,s,i),Q1(e,t,s)}}function I_(n,t,e){var s=Er(n),i={lane:s,action:e,hasEagerState:!1,eagerState:null,next:null};if(Y1(n))K1(t,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,e);if(i.hasEagerState=!0,i.eagerState=l,fs(l,o)){var c=t.interleaved;c===null?(i.next=i,V0(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}e=R1(n,t,i,s),e!==null&&(i=Be(),ds(e,n,s,i),Q1(e,t,s))}}function Y1(n){var t=n.alternate;return n===Ot||t!==null&&t===Ot}function K1(n,t){Vc=_f=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function Q1(n,t,e){if(e&4194240){var s=t.lanes;s&=n.pendingLanes,e|=s,t.lanes=e,M0(n,e)}}var Ef={readContext:Gn,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},D_={readContext:Gn,useCallback:function(n,t){return bs().memoizedState=[n,t===void 0?null:t],n},useContext:Gn,useEffect:Av,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Ed(4194308,4,U1.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Ed(4194308,4,n,t)},useInsertionEffect:function(n,t){return Ed(4,2,n,t)},useMemo:function(n,t){var e=bs();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var s=bs();return t=e!==void 0?e(t):t,s.memoizedState=s.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},s.queue=n,n=n.dispatch=N_.bind(null,Ot,n),[s.memoizedState,n]},useRef:function(n){var t=bs();return n={current:n},t.memoizedState=n},useState:wv,useDebugValue:ty,useDeferredValue:function(n){return bs().memoizedState=n},useTransition:function(){var n=wv(!1),t=n[0];return n=L_.bind(null,n[1]),bs().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var s=Ot,i=bs();if(Mt){if(e===void 0)throw Error(F(407));e=e()}else{if(e=t(),he===null)throw Error(F(349));ra&30||D1(s,t,e)}i.memoizedState=e;var r={value:e,getSnapshot:t};return i.queue=r,Av(O1.bind(null,s,r,n),[n]),s.flags|=2048,du(9,F1.bind(null,s,r,e,t),void 0,null),e},useId:function(){var n=bs(),t=he.identifierPrefix;if(Mt){var e=Si,s=xi;e=(s&~(1<<32-hs(s)-1)).toString(32)+e,t=":"+t+"R"+e,e=uu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=M_++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},F_={readContext:Gn,useCallback:V1,useContext:Gn,useEffect:J0,useImperativeHandle:G1,useInsertionEffect:H1,useLayoutEffect:B1,useMemo:W1,useReducer:Kp,useRef:$1,useState:function(){return Kp(hu)},useDebugValue:ty,useDeferredValue:function(n){var t=Vn();return X1(t,te.memoizedState,n)},useTransition:function(){var n=Kp(hu)[0],t=Vn().memoizedState;return[n,t]},useMutableSource:N1,useSyncExternalStore:I1,useId:q1,unstable_isNewReconciler:!1},O_={readContext:Gn,useCallback:V1,useContext:Gn,useEffect:J0,useImperativeHandle:G1,useInsertionEffect:H1,useLayoutEffect:B1,useMemo:W1,useReducer:Qp,useRef:$1,useState:function(){return Qp(hu)},useDebugValue:ty,useDeferredValue:function(n){var t=Vn();return te===null?t.memoizedState=n:X1(t,te.memoizedState,n)},useTransition:function(){var n=Qp(hu)[0],t=Vn().memoizedState;return[n,t]},useMutableSource:N1,useSyncExternalStore:I1,useId:q1,unstable_isNewReconciler:!1};function qn(n,t){if(n&&n.defaultProps){t=jt({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function $g(n,t,e,s){t=n.memoizedState,e=e(s,t),e=e==null?t:jt({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var dp={isMounted:function(n){return(n=n._reactInternals)?fa(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var s=Be(),i=Er(n),r=_i(s,i);r.payload=t,e!=null&&(r.callback=e),t=Sr(n,r,i),t!==null&&(ds(t,n,i,s),Sd(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var s=Be(),i=Er(n),r=_i(s,i);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Sr(n,r,i),t!==null&&(ds(t,n,i,s),Sd(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Be(),s=Er(n),i=_i(e,s);i.tag=2,t!=null&&(i.callback=t),t=Sr(n,i,s),t!==null&&(ds(t,n,s,e),Sd(t,n,s))}};function bv(n,t,e,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):t.prototype&&t.prototype.isPureReactComponent?!iu(e,s)||!iu(i,r):!0}function Z1(n,t,e){var s=!1,i=Pr,r=t.contextType;return typeof r=="object"&&r!==null?r=Gn(r):(i=rn(t)?sa:Ie.current,s=t.contextTypes,r=(s=s!=null)?Zl(n,i):Pr),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dp,n.stateNode=t,t._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),t}function xv(n,t,e,s){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,s),t.state!==n&&dp.enqueueReplaceState(t,t.state,null)}function Hg(n,t,e,s){var i=n.stateNode;i.props=e,i.state=n.memoizedState,i.refs={},W0(n);var r=t.contextType;typeof r=="object"&&r!==null?i.context=Gn(r):(r=rn(t)?sa:Ie.current,i.context=Zl(n,r)),i.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&($g(n,t,r,e),i.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&dp.enqueueReplaceState(i,i.state,null),xf(n,e,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function nc(n,t){try{var e="",s=t;do e+=hS(s),s=s.return;while(s);var i=e}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:i,digest:null}}function Zp(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function Bg(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var j_=typeof WeakMap=="function"?WeakMap:Map;function J1(n,t,e){e=_i(-1,e),e.tag=3,e.payload={element:null};var s=t.value;return e.callback=function(){kf||(kf=!0,Zg=s),Bg(n,t)},e}function tA(n,t,e){e=_i(-1,e),e.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;e.payload=function(){return s(i)},e.callback=function(){Bg(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Bg(n,t),typeof s!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function Sv(n,t,e){var s=n.pingCache;if(s===null){s=n.pingCache=new j_;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(e)||(i.add(e),n=Z_.bind(null,n,t,e),t.then(n,n))}function _v(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function Ev(n,t,e,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=_i(-1,1),t.tag=2,Sr(e,t,1))),e.lanes|=1),n)}var z_=Ni.ReactCurrentOwner,nn=!1;function He(n,t,e,s){t.child=n===null?P1(t,null,e,s):tc(t,n.child,e,s)}function Cv(n,t,e,s,i){e=e.render;var r=t.ref;return Ba(t,i),s=Q0(n,t,e,s,r,i),e=Z0(),n!==null&&!nn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,Ri(n,t,i)):(Mt&&e&&z0(t),t.flags|=1,He(n,t,s,i),t.child)}function kv(n,t,e,s,i){if(n===null){var r=e.type;return typeof r=="function"&&!ly(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,eA(n,t,r,s,i)):(n=Pd(e.type,null,s,t,t.mode,i),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:iu,e(o,s)&&n.ref===t.ref)return Ri(n,t,i)}return t.flags|=1,n=Cr(r,s),n.ref=t.ref,n.return=t,t.child=n}function eA(n,t,e,s,i){if(n!==null){var r=n.memoizedProps;if(iu(r,s)&&n.ref===t.ref)if(nn=!1,t.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(nn=!0);else return t.lanes=n.lanes,Ri(n,t,i)}return Ug(n,t,e,s,i)}function nA(n,t,e){var s=t.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Da,An),An|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,_t(Da,An),An|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:e,_t(Da,An),An|=s}else r!==null?(s=r.baseLanes|e,t.memoizedState=null):s=e,_t(Da,An),An|=s;return He(n,t,i,e),t.child}function sA(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Ug(n,t,e,s,i){var r=rn(e)?sa:Ie.current;return r=Zl(t,r),Ba(t,i),e=Q0(n,t,e,s,r,i),s=Z0(),n!==null&&!nn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,Ri(n,t,i)):(Mt&&s&&z0(t),t.flags|=1,He(n,t,e,i),t.child)}function Tv(n,t,e,s,i){if(rn(e)){var r=!0;yf(t)}else r=!1;if(Ba(t,i),t.stateNode===null)Cd(n,t),Z1(t,e,s),Hg(t,e,s,i),s=!0;else if(n===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Gn(u):(u=rn(e)?sa:Ie.current,u=Zl(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&xv(t,o,s,u),Oi=!1;var f=t.memoizedState;o.state=f,xf(t,s,o,i),c=t.memoizedState,l!==s||f!==c||sn.current||Oi?(typeof h=="function"&&($g(t,e,h,s),c=t.memoizedState),(l=Oi||bv(t,e,l,s,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,M1(n,t),l=t.memoizedProps,u=t.type===t.elementType?l:qn(t.type,l),o.props=u,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=Gn(c):(c=rn(e)?sa:Ie.current,c=Zl(t,c));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&xv(t,o,s,c),Oi=!1,f=t.memoizedState,o.state=f,xf(t,s,o,i);var m=t.memoizedState;l!==d||f!==m||sn.current||Oi?(typeof p=="function"&&($g(t,e,p,s),m=t.memoizedState),(u=Oi||bv(t,e,u,s,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),o.props=s,o.state=m,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),s=!1)}return Gg(n,t,e,s,r,i)}function Gg(n,t,e,s,i,r){sA(n,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&fv(t,e,!1),Ri(n,t,r);s=t.stateNode,z_.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,n!==null&&o?(t.child=tc(t,n.child,null,r),t.child=tc(t,null,l,r)):He(n,t,l,r),t.memoizedState=s.state,i&&fv(t,e,!0),t.child}function iA(n){var t=n.stateNode;t.pendingContext?dv(n,t.pendingContext,t.pendingContext!==t.context):t.context&&dv(n,t.context,!1),X0(n,t.containerInfo)}function Pv(n,t,e,s,i){return Jl(),H0(i),t.flags|=256,He(n,t,e,s),t.child}var Vg={dehydrated:null,treeContext:null,retryLane:0};function Wg(n){return{baseLanes:n,cachePool:null,transitions:null}}function rA(n,t,e){var s=t.pendingProps,i=Dt.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(i&2)!==0),l?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),_t(Dt,i&1),n===null)return jg(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,n=s.fallback,r?(s=t.mode,r=t.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=gp(o,s,0,null),n=na(n,s,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=Wg(e),t.memoizedState=Vg,n):ey(t,o));if(i=n.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $_(n,t,o,s,l,i,e);if(r){r=s.fallback,o=t.mode,i=n.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Cr(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?r=Cr(l,r):(r=na(r,o,e,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,o=n.child.memoizedState,o=o===null?Wg(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=Vg,s}return r=n.child,n=r.sibling,s=Cr(r,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=e),s.return=t,s.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=s,t.memoizedState=null,s}function ey(n,t){return t=gp({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function cd(n,t,e,s){return s!==null&&H0(s),tc(t,n.child,null,e),n=ey(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function $_(n,t,e,s,i,r,o){if(e)return t.flags&256?(t.flags&=-257,s=Zp(Error(F(422))),cd(n,t,o,s)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=s.fallback,i=t.mode,s=gp({mode:"visible",children:s.children},i,0,null),r=na(r,i,o,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,t.mode&1&&tc(t,n.child,null,o),t.child.memoizedState=Wg(o),t.memoizedState=Vg,r);if(!(t.mode&1))return cd(n,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,r=Error(F(419)),s=Zp(r,s,void 0),cd(n,t,o,s)}if(l=(o&n.childLanes)!==0,nn||l){if(s=he,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Pi(n,i),ds(s,n,i,-1))}return ay(),s=Zp(Error(F(421))),cd(n,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=n.child,t=J_.bind(null,n),i._reactRetry=t,null):(n=r.treeContext,Sn=xr(i.nextSibling),_n=t,Mt=!0,cs=null,n!==null&&(On[jn++]=xi,On[jn++]=Si,On[jn++]=ia,xi=n.id,Si=n.overflow,ia=t),t=ey(t,s.children),t.flags|=4096,t)}function Rv(n,t,e){n.lanes|=t;var s=n.alternate;s!==null&&(s.lanes|=t),zg(n.return,t,e)}function Jp(n,t,e,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:e,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=e,r.tailMode=i)}function oA(n,t,e){var s=t.pendingProps,i=s.revealOrder,r=s.tail;if(He(n,t,s.children,e),s=Dt.current,s&2)s=s&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Rv(n,e,t);else if(n.tag===19)Rv(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(_t(Dt,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)n=e.alternate,n!==null&&Sf(n)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),Jp(t,!1,i,e,r);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(n=i.alternate,n!==null&&Sf(n)===null){t.child=i;break}n=i.sibling,i.sibling=e,e=i,i=n}Jp(t,!0,e,null,r);break;case"together":Jp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cd(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function Ri(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),oa|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(F(153));if(t.child!==null){for(n=t.child,e=Cr(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Cr(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function H_(n,t,e){switch(t.tag){case 3:iA(t),Jl();break;case 5:L1(t);break;case 1:rn(t.type)&&yf(t);break;case 4:X0(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;_t(Af,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(_t(Dt,Dt.current&1),t.flags|=128,null):e&t.child.childLanes?rA(n,t,e):(_t(Dt,Dt.current&1),n=Ri(n,t,e),n!==null?n.sibling:null);_t(Dt,Dt.current&1);break;case 19:if(s=(e&t.childLanes)!==0,n.flags&128){if(s)return oA(n,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_t(Dt,Dt.current),s)break;return null;case 22:case 23:return t.lanes=0,nA(n,t,e)}return Ri(n,t,e)}var aA,Xg,lA,cA;aA=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Xg=function(){};lA=function(n,t,e,s){var i=n.memoizedProps;if(i!==s){n=t.stateNode,Yr(Hs.current);var r=null;switch(e){case"input":i=gg(n,i),s=gg(n,s),r=[];break;case"select":i=jt({},i,{value:void 0}),s=jt({},s,{value:void 0}),r=[];break;case"textarea":i=vg(n,i),s=vg(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=gf)}Ag(e,s);var o;e=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qc.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(l=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Et("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};cA=function(n,t,e,s){e!==s&&(t.flags|=4)};function pc(n,t){if(!Mt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function Se(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,s=0;if(t)for(var i=n.child;i!==null;)e|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)e|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=e,t}function B_(n,t,e){var s=t.pendingProps;switch($0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(t),null;case 1:return rn(t.type)&&mf(),Se(t),null;case 3:return s=t.stateNode,ec(),kt(sn),kt(Ie),Y0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(ad(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cs!==null&&(em(cs),cs=null))),Xg(n,t),Se(t),null;case 5:q0(t);var i=Yr(cu.current);if(e=t.type,n!==null&&t.stateNode!=null)lA(n,t,e,s,i),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(F(166));return Se(t),null}if(n=Yr(Hs.current),ad(t)){s=t.stateNode,e=t.type;var r=t.memoizedProps;switch(s[zs]=t,s[au]=r,n=(t.mode&1)!==0,e){case"dialog":Et("cancel",s),Et("close",s);break;case"iframe":case"object":case"embed":Et("load",s);break;case"video":case"audio":for(i=0;i<Sc.length;i++)Et(Sc[i],s);break;case"source":Et("error",s);break;case"img":case"image":case"link":Et("error",s),Et("load",s);break;case"details":Et("toggle",s);break;case"input":zy(s,r),Et("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Et("invalid",s);break;case"textarea":Hy(s,r),Et("invalid",s)}Ag(e,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?s.textContent!==l&&(r.suppressHydrationWarning!==!0&&od(s.textContent,l,n),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&od(s.textContent,l,n),i=["children",""+l]):Qc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Et("scroll",s)}switch(e){case"input":Zh(s),$y(s,r,!0);break;case"textarea":Zh(s),By(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=gf)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ow(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(e,{is:s.is}):(n=o.createElement(e),e==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,e),n[zs]=t,n[au]=s,aA(n,t,!1,!1),t.stateNode=n;t:{switch(o=bg(e,s),e){case"dialog":Et("cancel",n),Et("close",n),i=s;break;case"iframe":case"object":case"embed":Et("load",n),i=s;break;case"video":case"audio":for(i=0;i<Sc.length;i++)Et(Sc[i],n);i=s;break;case"source":Et("error",n),i=s;break;case"img":case"image":case"link":Et("error",n),Et("load",n),i=s;break;case"details":Et("toggle",n),i=s;break;case"input":zy(n,s),i=gg(n,s),Et("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=jt({},s,{value:void 0}),Et("invalid",n);break;case"textarea":Hy(n,s),i=vg(n,s),Et("invalid",n);break;default:i=s}Ag(e,i),l=i;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?$w(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jw(n,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Zc(n,c):typeof c=="number"&&Zc(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Qc.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Et("scroll",n):c!=null&&E0(n,r,c,o))}switch(e){case"input":Zh(n),$y(n,s,!1);break;case"textarea":Zh(n),By(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Tr(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?ja(n,!!s.multiple,r,!1):s.defaultValue!=null&&ja(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=gf)}switch(e){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Se(t),null;case 6:if(n&&t.stateNode!=null)cA(n,t,n.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(F(166));if(e=Yr(cu.current),Yr(Hs.current),ad(t)){if(s=t.stateNode,e=t.memoizedProps,s[zs]=t,(r=s.nodeValue!==e)&&(n=_n,n!==null))switch(n.tag){case 3:od(s.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&od(s.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else s=(e.nodeType===9?e:e.ownerDocument).createTextNode(s),s[zs]=t,t.stateNode=s}return Se(t),null;case 13:if(kt(Dt),s=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Mt&&Sn!==null&&t.mode&1&&!(t.flags&128))k1(),Jl(),t.flags|=98560,r=!1;else if(r=ad(t),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(F(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[zs]=t}else Jl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Se(t),r=!1}else cs!==null&&(em(cs),cs=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(n===null||Dt.current&1?ne===0&&(ne=3):ay())),t.updateQueue!==null&&(t.flags|=4),Se(t),null);case 4:return ec(),Xg(n,t),n===null&&ru(t.stateNode.containerInfo),Se(t),null;case 10:return G0(t.type._context),Se(t),null;case 17:return rn(t.type)&&mf(),Se(t),null;case 19:if(kt(Dt),r=t.memoizedState,r===null)return Se(t),null;if(s=(t.flags&128)!==0,o=r.rendering,o===null)if(s)pc(r,!1);else{if(ne!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=Sf(n),o!==null){for(t.flags|=128,pc(r,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=e,e=t.child;e!==null;)r=e,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return _t(Dt,Dt.current&1|2),t.child}n=n.sibling}r.tail!==null&&Gt()>sc&&(t.flags|=128,s=!0,pc(r,!1),t.lanes=4194304)}else{if(!s)if(n=Sf(o),n!==null){if(t.flags|=128,s=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),pc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Mt)return Se(t),null}else 2*Gt()-r.renderingStartTime>sc&&e!==1073741824&&(t.flags|=128,s=!0,pc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Gt(),t.sibling=null,e=Dt.current,_t(Dt,s?e&1|2:e&1),t):(Se(t),null);case 22:case 23:return oy(),s=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?An&1073741824&&(Se(t),t.subtreeFlags&6&&(t.flags|=8192)):Se(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function U_(n,t){switch($0(t),t.tag){case 1:return rn(t.type)&&mf(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return ec(),kt(sn),kt(Ie),Y0(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return q0(t),null;case 13:if(kt(Dt),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Jl()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return kt(Dt),null;case 4:return ec(),null;case 10:return G0(t.type._context),null;case 22:case 23:return oy(),null;case 24:return null;default:return null}}var ud=!1,Le=!1,G_=typeof WeakSet=="function"?WeakSet:Set,V=null;function Ia(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(s){$t(n,t,s)}else e.current=null}function qg(n,t,e){try{e()}catch(s){$t(n,t,s)}}var Mv=!1;function V_(n,t){if(Mg=df,n=p1(),j0(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var s=e.getSelection&&e.getSelection();if(s&&s.rangeCount!==0){e=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(l=o+i),d!==r||s!==0&&d.nodeType!==3||(c=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break e;if(f===e&&++u===i&&(l=o),f===r&&++h===s&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Lg={focusedElem:n,selectionRange:e},df=!1,V=t;V!==null;)if(t=V,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,V=n;else for(;V!==null;){t=V;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,S=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:qn(t.type,v),S);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){$t(t,t.return,_)}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}return m=Mv,Mv=!1,m}function Wc(n,t,e){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&qg(t,e,r)}i=i.next}while(i!==s)}}function fp(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var s=e.create;e.destroy=s()}e=e.next}while(e!==t)}}function Yg(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function uA(n){var t=n.alternate;t!==null&&(n.alternate=null,uA(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[zs],delete t[au],delete t[Dg],delete t[k_],delete t[T_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hA(n){return n.tag===5||n.tag===3||n.tag===4}function Lv(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||hA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Kg(n,t,e){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=gf));else if(s!==4&&(n=n.child,n!==null))for(Kg(n,t,e),n=n.sibling;n!==null;)Kg(n,t,e),n=n.sibling}function Qg(n,t,e){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Qg(n,t,e),n=n.sibling;n!==null;)Qg(n,t,e),n=n.sibling}var ve=null,ls=!1;function Ii(n,t,e){for(e=e.child;e!==null;)dA(n,t,e),e=e.sibling}function dA(n,t,e){if($s&&typeof $s.onCommitFiberUnmount=="function")try{$s.onCommitFiberUnmount(rp,e)}catch{}switch(e.tag){case 5:Le||Ia(e,t);case 6:var s=ve,i=ls;ve=null,Ii(n,t,e),ve=s,ls=i,ve!==null&&(ls?(n=ve,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):ve.removeChild(e.stateNode));break;case 18:ve!==null&&(ls?(n=ve,e=e.stateNode,n.nodeType===8?Wp(n.parentNode,e):n.nodeType===1&&Wp(n,e),nu(n)):Wp(ve,e.stateNode));break;case 4:s=ve,i=ls,ve=e.stateNode.containerInfo,ls=!0,Ii(n,t,e),ve=s,ls=i;break;case 0:case 11:case 14:case 15:if(!Le&&(s=e.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&qg(e,t,o),i=i.next}while(i!==s)}Ii(n,t,e);break;case 1:if(!Le&&(Ia(e,t),s=e.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(l){$t(e,t,l)}Ii(n,t,e);break;case 21:Ii(n,t,e);break;case 22:e.mode&1?(Le=(s=Le)||e.memoizedState!==null,Ii(n,t,e),Le=s):Ii(n,t,e);break;default:Ii(n,t,e)}}function Nv(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new G_),t.forEach(function(s){var i=tE.bind(null,n,s);e.has(s)||(e.add(s),s.then(i,i))})}}function Wn(n,t){var e=t.deletions;if(e!==null)for(var s=0;s<e.length;s++){var i=e[s];try{var r=n,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,ls=!1;break t;case 3:ve=l.stateNode.containerInfo,ls=!0;break t;case 4:ve=l.stateNode.containerInfo,ls=!0;break t}l=l.return}if(ve===null)throw Error(F(160));dA(r,o,i),ve=null,ls=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){$t(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fA(t,n),t=t.sibling}function fA(n,t){var e=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Wn(t,n),ms(n),s&4){try{Wc(3,n,n.return),fp(3,n)}catch(v){$t(n,n.return,v)}try{Wc(5,n,n.return)}catch(v){$t(n,n.return,v)}}break;case 1:Wn(t,n),ms(n),s&512&&e!==null&&Ia(e,e.return);break;case 5:if(Wn(t,n),ms(n),s&512&&e!==null&&Ia(e,e.return),n.flags&32){var i=n.stateNode;try{Zc(i,"")}catch(v){$t(n,n.return,v)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&Dw(i,r),bg(l,o);var u=bg(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?$w(i,d):h==="dangerouslySetInnerHTML"?jw(i,d):h==="children"?Zc(i,d):E0(i,h,d,u)}switch(l){case"input":mg(i,r);break;case"textarea":Fw(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?ja(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?ja(i,!!r.multiple,r.defaultValue,!0):ja(i,!!r.multiple,r.multiple?[]:"",!1))}i[au]=r}catch(v){$t(n,n.return,v)}}break;case 6:if(Wn(t,n),ms(n),s&4){if(n.stateNode===null)throw Error(F(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(v){$t(n,n.return,v)}}break;case 3:if(Wn(t,n),ms(n),s&4&&e!==null&&e.memoizedState.isDehydrated)try{nu(t.containerInfo)}catch(v){$t(n,n.return,v)}break;case 4:Wn(t,n),ms(n);break;case 13:Wn(t,n),ms(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(iy=Gt())),s&4&&Nv(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(Le=(u=Le)||h,Wn(t,n),Le=u):Wn(t,n),ms(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(V=n,h=n.child;h!==null;){for(d=V=h;V!==null;){switch(f=V,p=f.child,f.tag){case 0:case 11:case 14:case 15:Wc(4,f,f.return);break;case 1:Ia(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,e=f.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){$t(s,e,v)}}break;case 5:Ia(f,f.return);break;case 22:if(f.memoizedState!==null){Dv(d);continue}}p!==null?(p.return=f,V=p):Dv(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zw("display",o))}catch(v){$t(n,n.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){$t(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wn(t,n),ms(n),s&4&&Nv(n);break;case 21:break;default:Wn(t,n),ms(n)}}function ms(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(hA(e)){var s=e;break t}e=e.return}throw Error(F(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Zc(i,""),s.flags&=-33);var r=Lv(n);Qg(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Lv(n);Kg(n,l,o);break;default:throw Error(F(161))}}catch(c){$t(n,n.return,c)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function W_(n,t,e){V=n,pA(n)}function pA(n,t,e){for(var s=(n.mode&1)!==0;V!==null;){var i=V,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||ud;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Le;l=ud;var u=Le;if(ud=o,(Le=c)&&!u)for(V=i;V!==null;)o=V,c=o.child,o.tag===22&&o.memoizedState!==null?Fv(i):c!==null?(c.return=o,V=c):Fv(i);for(;r!==null;)V=r,pA(r),r=r.sibling;V=i,ud=l,Le=u}Iv(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,V=r):Iv(n)}}function Iv(n){for(;V!==null;){var t=V;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||fp(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Le)if(e===null)s.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:qn(t.type,e.memoizedProps);s.componentDidUpdate(i,e.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&vv(t,r,s);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}vv(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&nu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Le||t.flags&512&&Yg(t)}catch(f){$t(t,t.return,f)}}if(t===n){V=null;break}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}}function Dv(n){for(;V!==null;){var t=V;if(t===n){V=null;break}var e=t.sibling;if(e!==null){e.return=t.return,V=e;break}V=t.return}}function Fv(n){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{fp(4,t)}catch(c){$t(t,e,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){$t(t,i,c)}}var r=t.return;try{Yg(t)}catch(c){$t(t,r,c)}break;case 5:var o=t.return;try{Yg(t)}catch(c){$t(t,o,c)}}}catch(c){$t(t,t.return,c)}if(t===n){V=null;break}var l=t.sibling;if(l!==null){l.return=t.return,V=l;break}V=t.return}}var X_=Math.ceil,Cf=Ni.ReactCurrentDispatcher,ny=Ni.ReactCurrentOwner,Bn=Ni.ReactCurrentBatchConfig,ht=0,he=null,Xt=null,Ae=0,An=0,Da=Ir(0),ne=0,fu=null,oa=0,pp=0,sy=0,Xc=null,en=null,iy=0,sc=1/0,Ws=null,kf=!1,Zg=null,_r=null,hd=!1,vr=null,Tf=0,qc=0,Jg=null,kd=-1,Td=0;function Be(){return ht&6?Gt():kd!==-1?kd:kd=Gt()}function Er(n){return n.mode&1?ht&2&&Ae!==0?Ae&-Ae:R_.transition!==null?(Td===0&&(Td=Zw()),Td):(n=vt,n!==0||(n=window.event,n=n===void 0?16:r1(n.type)),n):1}function ds(n,t,e,s){if(50<qc)throw qc=0,Jg=null,Error(F(185));Uh(n,e,s),(!(ht&2)||n!==he)&&(n===he&&(!(ht&2)&&(pp|=e),ne===4&&zi(n,Ae)),on(n,s),e===1&&ht===0&&!(t.mode&1)&&(sc=Gt()+500,up&&Dr()))}function on(n,t){var e=n.callbackNode;RS(n,t);var s=hf(n,n===he?Ae:0);if(s===0)e!==null&&Vy(e),n.callbackNode=null,n.callbackPriority=0;else if(t=s&-s,n.callbackPriority!==t){if(e!=null&&Vy(e),t===1)n.tag===0?P_(Ov.bind(null,n)):_1(Ov.bind(null,n)),E_(function(){!(ht&6)&&Dr()}),e=null;else{switch(Jw(s)){case 1:e=R0;break;case 4:e=Kw;break;case 16:e=uf;break;case 536870912:e=Qw;break;default:e=uf}e=xA(e,gA.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function gA(n,t){if(kd=-1,Td=0,ht&6)throw Error(F(327));var e=n.callbackNode;if(Ua()&&n.callbackNode!==e)return null;var s=hf(n,n===he?Ae:0);if(s===0)return null;if(s&30||s&n.expiredLanes||t)t=Pf(n,s);else{t=s;var i=ht;ht|=2;var r=yA();(he!==n||Ae!==t)&&(Ws=null,sc=Gt()+500,ea(n,t));do try{K_();break}catch(l){mA(n,l)}while(!0);U0(),Cf.current=r,ht=i,Xt!==null?t=0:(he=null,Ae=0,t=ne)}if(t!==0){if(t===2&&(i=Cg(n),i!==0&&(s=i,t=tm(n,i))),t===1)throw e=fu,ea(n,0),zi(n,s),on(n,Gt()),e;if(t===6)zi(n,s);else{if(i=n.current.alternate,!(s&30)&&!q_(i)&&(t=Pf(n,s),t===2&&(r=Cg(n),r!==0&&(s=r,t=tm(n,r))),t===1))throw e=fu,ea(n,0),zi(n,s),on(n,Gt()),e;switch(n.finishedWork=i,n.finishedLanes=s,t){case 0:case 1:throw Error(F(345));case 2:Hr(n,en,Ws);break;case 3:if(zi(n,s),(s&130023424)===s&&(t=iy+500-Gt(),10<t)){if(hf(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){Be(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Ig(Hr.bind(null,n,en,Ws),t);break}Hr(n,en,Ws);break;case 4:if(zi(n,s),(s&4194240)===s)break;for(t=n.eventTimes,i=-1;0<s;){var o=31-hs(s);r=1<<o,o=t[o],o>i&&(i=o),s&=~r}if(s=i,s=Gt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*X_(s/1960))-s,10<s){n.timeoutHandle=Ig(Hr.bind(null,n,en,Ws),s);break}Hr(n,en,Ws);break;case 5:Hr(n,en,Ws);break;default:throw Error(F(329))}}}return on(n,Gt()),n.callbackNode===e?gA.bind(null,n):null}function tm(n,t){var e=Xc;return n.current.memoizedState.isDehydrated&&(ea(n,t).flags|=256),n=Pf(n,t),n!==2&&(t=en,en=e,t!==null&&em(t)),n}function em(n){en===null?en=n:en.push.apply(en,n)}function q_(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var s=0;s<e.length;s++){var i=e[s],r=i.getSnapshot;i=i.value;try{if(!fs(r(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zi(n,t){for(t&=~sy,t&=~pp,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-hs(t),s=1<<e;n[e]=-1,t&=~s}}function Ov(n){if(ht&6)throw Error(F(327));Ua();var t=hf(n,0);if(!(t&1))return on(n,Gt()),null;var e=Pf(n,t);if(n.tag!==0&&e===2){var s=Cg(n);s!==0&&(t=s,e=tm(n,s))}if(e===1)throw e=fu,ea(n,0),zi(n,t),on(n,Gt()),e;if(e===6)throw Error(F(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Hr(n,en,Ws),on(n,Gt()),null}function ry(n,t){var e=ht;ht|=1;try{return n(t)}finally{ht=e,ht===0&&(sc=Gt()+500,up&&Dr())}}function aa(n){vr!==null&&vr.tag===0&&!(ht&6)&&Ua();var t=ht;ht|=1;var e=Bn.transition,s=vt;try{if(Bn.transition=null,vt=1,n)return n()}finally{vt=s,Bn.transition=e,ht=t,!(ht&6)&&Dr()}}function oy(){An=Da.current,kt(Da)}function ea(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,__(e)),Xt!==null)for(e=Xt.return;e!==null;){var s=e;switch($0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&mf();break;case 3:ec(),kt(sn),kt(Ie),Y0();break;case 5:q0(s);break;case 4:ec();break;case 13:kt(Dt);break;case 19:kt(Dt);break;case 10:G0(s.type._context);break;case 22:case 23:oy()}e=e.return}if(he=n,Xt=n=Cr(n.current,null),Ae=An=t,ne=0,fu=null,sy=pp=oa=0,en=Xc=null,qr!==null){for(t=0;t<qr.length;t++)if(e=qr[t],s=e.interleaved,s!==null){e.interleaved=null;var i=s.next,r=e.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}e.pending=s}qr=null}return n}function mA(n,t){do{var e=Xt;try{if(U0(),_d.current=Ef,_f){for(var s=Ot.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}_f=!1}if(ra=0,ue=te=Ot=null,Vc=!1,uu=0,ny.current=null,e===null||e.return===null){ne=1,fu=t,Xt=null;break}t:{var r=n,o=e.return,l=e,c=t;if(t=Ae,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=_v(o);if(p!==null){p.flags&=-257,Ev(p,o,l,r,t),p.mode&1&&Sv(r,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break t}else{if(!(t&1)){Sv(r,u,t),ay();break t}c=Error(F(426))}}else if(Mt&&l.mode&1){var S=_v(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Ev(S,o,l,r,t),H0(nc(c,l));break t}}r=c=nc(c,l),ne!==4&&(ne=2),Xc===null?Xc=[r]:Xc.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var y=J1(r,c,t);yv(r,y);break t;case 1:l=c;var w=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(_r===null||!_r.has(x)))){r.flags|=65536,t&=-t,r.lanes|=t;var _=tA(r,l,t);yv(r,_);break t}}r=r.return}while(r!==null)}wA(e)}catch(C){t=C,Xt===e&&e!==null&&(Xt=e=e.return);continue}break}while(!0)}function yA(){var n=Cf.current;return Cf.current=Ef,n===null?Ef:n}function ay(){(ne===0||ne===3||ne===2)&&(ne=4),he===null||!(oa&268435455)&&!(pp&268435455)||zi(he,Ae)}function Pf(n,t){var e=ht;ht|=2;var s=yA();(he!==n||Ae!==t)&&(Ws=null,ea(n,t));do try{Y_();break}catch(i){mA(n,i)}while(!0);if(U0(),ht=e,Cf.current=s,Xt!==null)throw Error(F(261));return he=null,Ae=0,ne}function Y_(){for(;Xt!==null;)vA(Xt)}function K_(){for(;Xt!==null&&!bS();)vA(Xt)}function vA(n){var t=bA(n.alternate,n,An);n.memoizedProps=n.pendingProps,t===null?wA(n):Xt=t,ny.current=null}function wA(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=U_(e,t),e!==null){e.flags&=32767,Xt=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ne=6,Xt=null;return}}else if(e=B_(e,t,An),e!==null){Xt=e;return}if(t=t.sibling,t!==null){Xt=t;return}Xt=t=n}while(t!==null);ne===0&&(ne=5)}function Hr(n,t,e){var s=vt,i=Bn.transition;try{Bn.transition=null,vt=1,Q_(n,t,e,s)}finally{Bn.transition=i,vt=s}return null}function Q_(n,t,e,s){do Ua();while(vr!==null);if(ht&6)throw Error(F(327));e=n.finishedWork;var i=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(F(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(MS(n,r),n===he&&(Xt=he=null,Ae=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||hd||(hd=!0,xA(uf,function(){return Ua(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Bn.transition,Bn.transition=null;var o=vt;vt=1;var l=ht;ht|=4,ny.current=null,V_(n,e),fA(e,n),y_(Lg),df=!!Mg,Lg=Mg=null,n.current=e,W_(e),xS(),ht=l,vt=o,Bn.transition=r}else n.current=e;if(hd&&(hd=!1,vr=n,Tf=i),r=n.pendingLanes,r===0&&(_r=null),ES(e.stateNode),on(n,Gt()),t!==null)for(s=n.onRecoverableError,e=0;e<t.length;e++)i=t[e],s(i.value,{componentStack:i.stack,digest:i.digest});if(kf)throw kf=!1,n=Zg,Zg=null,n;return Tf&1&&n.tag!==0&&Ua(),r=n.pendingLanes,r&1?n===Jg?qc++:(qc=0,Jg=n):qc=0,Dr(),null}function Ua(){if(vr!==null){var n=Jw(Tf),t=Bn.transition,e=vt;try{if(Bn.transition=null,vt=16>n?16:n,vr===null)var s=!1;else{if(n=vr,vr=null,Tf=0,ht&6)throw Error(F(331));var i=ht;for(ht|=4,V=n.current;V!==null;){var r=V,o=r.child;if(V.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(V=u;V!==null;){var h=V;switch(h.tag){case 0:case 11:case 15:Wc(8,h,r)}var d=h.child;if(d!==null)d.return=h,V=d;else for(;V!==null;){h=V;var f=h.sibling,p=h.return;if(uA(h),h===u){V=null;break}if(f!==null){f.return=p,V=f;break}V=p}}}var m=r.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}V=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,V=o;else t:for(;V!==null;){if(r=V,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Wc(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,V=y;break t}V=r.return}}var w=n.current;for(V=w;V!==null;){o=V;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,V=x;else t:for(o=w;V!==null;){if(l=V,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fp(9,l)}}catch(C){$t(l,l.return,C)}if(l===o){V=null;break t}var _=l.sibling;if(_!==null){_.return=l.return,V=_;break t}V=l.return}}if(ht=i,Dr(),$s&&typeof $s.onPostCommitFiberRoot=="function")try{$s.onPostCommitFiberRoot(rp,n)}catch{}s=!0}return s}finally{vt=e,Bn.transition=t}}return!1}function jv(n,t,e){t=nc(e,t),t=J1(n,t,1),n=Sr(n,t,1),t=Be(),n!==null&&(Uh(n,1,t),on(n,t))}function $t(n,t,e){if(n.tag===3)jv(n,n,e);else for(;t!==null;){if(t.tag===3){jv(t,n,e);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(_r===null||!_r.has(s))){n=nc(e,n),n=tA(t,n,1),t=Sr(t,n,1),n=Be(),t!==null&&(Uh(t,1,n),on(t,n));break}}t=t.return}}function Z_(n,t,e){var s=n.pingCache;s!==null&&s.delete(t),t=Be(),n.pingedLanes|=n.suspendedLanes&e,he===n&&(Ae&e)===e&&(ne===4||ne===3&&(Ae&130023424)===Ae&&500>Gt()-iy?ea(n,0):sy|=e),on(n,t)}function AA(n,t){t===0&&(n.mode&1?(t=ed,ed<<=1,!(ed&130023424)&&(ed=4194304)):t=1);var e=Be();n=Pi(n,t),n!==null&&(Uh(n,t,e),on(n,e))}function J_(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),AA(n,e)}function tE(n,t){var e=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(e=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(t),AA(n,e)}var bA;bA=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||sn.current)nn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return nn=!1,H_(n,t,e);nn=!!(n.flags&131072)}else nn=!1,Mt&&t.flags&1048576&&E1(t,wf,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Cd(n,t),n=t.pendingProps;var i=Zl(t,Ie.current);Ba(t,e),i=Q0(null,t,s,n,i,e);var r=Z0();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rn(s)?(r=!0,yf(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,W0(t),i.updater=dp,t.stateNode=i,i._reactInternals=t,Hg(t,s,n,e),t=Gg(null,t,s,!0,r,e)):(t.tag=0,Mt&&r&&z0(t),He(null,t,i,e),t=t.child),t;case 16:s=t.elementType;t:{switch(Cd(n,t),n=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=nE(s),n=qn(s,n),i){case 0:t=Ug(null,t,s,n,e);break t;case 1:t=Tv(null,t,s,n,e);break t;case 11:t=Cv(null,t,s,n,e);break t;case 14:t=kv(null,t,s,qn(s.type,n),e);break t}throw Error(F(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:qn(s,i),Ug(n,t,s,i,e);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:qn(s,i),Tv(n,t,s,i,e);case 3:t:{if(iA(t),n===null)throw Error(F(387));s=t.pendingProps,r=t.memoizedState,i=r.element,M1(n,t),xf(t,s,null,e);var o=t.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=nc(Error(F(423)),t),t=Pv(n,t,s,e,i);break t}else if(s!==i){i=nc(Error(F(424)),t),t=Pv(n,t,s,e,i);break t}else for(Sn=xr(t.stateNode.containerInfo.firstChild),_n=t,Mt=!0,cs=null,e=P1(t,null,s,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Jl(),s===i){t=Ri(n,t,e);break t}He(n,t,s,e)}t=t.child}return t;case 5:return L1(t),n===null&&jg(t),s=t.type,i=t.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,Ng(s,i)?o=null:r!==null&&Ng(s,r)&&(t.flags|=32),sA(n,t),He(n,t,o,e),t.child;case 6:return n===null&&jg(t),null;case 13:return rA(n,t,e);case 4:return X0(t,t.stateNode.containerInfo),s=t.pendingProps,n===null?t.child=tc(t,null,s,e):He(n,t,s,e),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:qn(s,i),Cv(n,t,s,i,e);case 7:return He(n,t,t.pendingProps,e),t.child;case 8:return He(n,t,t.pendingProps.children,e),t.child;case 12:return He(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(s=t.type._context,i=t.pendingProps,r=t.memoizedProps,o=i.value,_t(Af,s._currentValue),s._currentValue=o,r!==null)if(fs(r.value,o)){if(r.children===i.children&&!sn.current){t=Ri(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=_i(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),zg(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(F(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),zg(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}He(n,t,i.children,e),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Ba(t,e),i=Gn(i),s=s(i),t.flags|=1,He(n,t,s,e),t.child;case 14:return s=t.type,i=qn(s,t.pendingProps),i=qn(s.type,i),kv(n,t,s,i,e);case 15:return eA(n,t,t.type,t.pendingProps,e);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:qn(s,i),Cd(n,t),t.tag=1,rn(s)?(n=!0,yf(t)):n=!1,Ba(t,e),Z1(t,s,i),Hg(t,s,i,e),Gg(null,t,s,!0,n,e);case 19:return oA(n,t,e);case 22:return nA(n,t,e)}throw Error(F(156,t.tag))};function xA(n,t){return Yw(n,t)}function eE(n,t,e,s){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(n,t,e,s){return new eE(n,t,e,s)}function ly(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nE(n){if(typeof n=="function")return ly(n)?1:0;if(n!=null){if(n=n.$$typeof,n===k0)return 11;if(n===T0)return 14}return 2}function Cr(n,t){var e=n.alternate;return e===null?(e=Hn(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function Pd(n,t,e,s,i,r){var o=2;if(s=n,typeof n=="function")ly(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case Ea:return na(e.children,i,r,t);case C0:o=8,i|=8;break;case hg:return n=Hn(12,e,t,i|2),n.elementType=hg,n.lanes=r,n;case dg:return n=Hn(13,e,t,i),n.elementType=dg,n.lanes=r,n;case fg:return n=Hn(19,e,t,i),n.elementType=fg,n.lanes=r,n;case Lw:return gp(e,i,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Rw:o=10;break t;case Mw:o=9;break t;case k0:o=11;break t;case T0:o=14;break t;case Fi:o=16,s=null;break t}throw Error(F(130,n==null?n:typeof n,""))}return t=Hn(o,e,t,i),t.elementType=n,t.type=s,t.lanes=r,t}function na(n,t,e,s){return n=Hn(7,n,s,t),n.lanes=e,n}function gp(n,t,e,s){return n=Hn(22,n,s,t),n.elementType=Lw,n.lanes=e,n.stateNode={isHidden:!1},n}function tg(n,t,e){return n=Hn(6,n,null,t),n.lanes=e,n}function eg(n,t,e){return t=Hn(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function sE(n,t,e,s,i){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dp(0),this.expirationTimes=Dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dp(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cy(n,t,e,s,i,r,o,l,c){return n=new sE(n,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Hn(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},W0(r),n}function iE(n,t,e){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:s==null?null:""+s,children:n,containerInfo:t,implementation:e}}function SA(n){if(!n)return Pr;n=n._reactInternals;t:{if(fa(n)!==n||n.tag!==1)throw Error(F(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(rn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(F(171))}if(n.tag===1){var e=n.type;if(rn(e))return S1(n,e,t)}return t}function _A(n,t,e,s,i,r,o,l,c){return n=cy(e,s,!0,n,i,r,o,l,c),n.context=SA(null),e=n.current,s=Be(),i=Er(e),r=_i(s,i),r.callback=t??null,Sr(e,r,i),n.current.lanes=i,Uh(n,i,s),on(n,s),n}function mp(n,t,e,s){var i=t.current,r=Be(),o=Er(i);return e=SA(e),t.context===null?t.context=e:t.pendingContext=e,t=_i(r,o),t.payload={element:n},s=s===void 0?null:s,s!==null&&(t.callback=s),n=Sr(i,t,o),n!==null&&(ds(n,i,o,r),Sd(n,i,o)),o}function Rf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function zv(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function uy(n,t){zv(n,t),(n=n.alternate)&&zv(n,t)}function rE(){return null}var EA=typeof reportError=="function"?reportError:function(n){console.error(n)};function hy(n){this._internalRoot=n}yp.prototype.render=hy.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(F(409));mp(n,t,null,null)};yp.prototype.unmount=hy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;aa(function(){mp(null,n,null,null)}),t[Ti]=null}};function yp(n){this._internalRoot=n}yp.prototype.unstable_scheduleHydration=function(n){if(n){var t=n1();n={blockedOn:null,target:n,priority:t};for(var e=0;e<ji.length&&t!==0&&t<ji[e].priority;e++);ji.splice(e,0,n),e===0&&i1(n)}};function dy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function vp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $v(){}function oE(n,t,e,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=Rf(o);r.call(u)}}var o=_A(t,s,n,0,null,!1,!1,"",$v);return n._reactRootContainer=o,n[Ti]=o.current,ru(n.nodeType===8?n.parentNode:n),aa(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var u=Rf(c);l.call(u)}}var c=cy(n,0,!1,null,null,!1,!1,"",$v);return n._reactRootContainer=c,n[Ti]=c.current,ru(n.nodeType===8?n.parentNode:n),aa(function(){mp(t,c,e,s)}),c}function wp(n,t,e,s,i){var r=e._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var l=i;i=function(){var c=Rf(o);l.call(c)}}mp(t,o,n,i)}else o=oE(e,t,n,i,s);return Rf(o)}t1=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=xc(t.pendingLanes);e!==0&&(M0(t,e|1),on(t,Gt()),!(ht&6)&&(sc=Gt()+500,Dr()))}break;case 13:aa(function(){var s=Pi(n,1);if(s!==null){var i=Be();ds(s,n,1,i)}}),uy(n,1)}};L0=function(n){if(n.tag===13){var t=Pi(n,134217728);if(t!==null){var e=Be();ds(t,n,134217728,e)}uy(n,134217728)}};e1=function(n){if(n.tag===13){var t=Er(n),e=Pi(n,t);if(e!==null){var s=Be();ds(e,n,t,s)}uy(n,t)}};n1=function(){return vt};s1=function(n,t){var e=vt;try{return vt=n,t()}finally{vt=e}};Sg=function(n,t,e){switch(t){case"input":if(mg(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var s=e[t];if(s!==n&&s.form===n.form){var i=cp(s);if(!i)throw Error(F(90));Iw(s),mg(s,i)}}}break;case"textarea":Fw(n,e);break;case"select":t=e.value,t!=null&&ja(n,!!e.multiple,t,!1)}};Uw=ry;Gw=aa;var aE={usingClientEntryPoint:!1,Events:[Vh,Pa,cp,Hw,Bw,ry]},gc={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:gc.bundleType,version:gc.version,rendererPackageName:gc.rendererPackageName,rendererConfig:gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Xw(n),n===null?null:n.stateNode},findFiberByHostInstance:gc.findFiberByHostInstance||rE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{rp=dd.inject(lE),$s=dd}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE;kn.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dy(t))throw Error(F(200));return iE(n,t,null,e)};kn.createRoot=function(n,t){if(!dy(n))throw Error(F(299));var e=!1,s="",i=EA;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=cy(n,1,!1,null,null,e,!1,s,i),n[Ti]=t.current,ru(n.nodeType===8?n.parentNode:n),new hy(t)};kn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(F(188)):(n=Object.keys(n).join(","),Error(F(268,n)));return n=Xw(t),n=n===null?null:n.stateNode,n};kn.flushSync=function(n){return aa(n)};kn.hydrate=function(n,t,e){if(!vp(t))throw Error(F(200));return wp(null,n,t,!0,e)};kn.hydrateRoot=function(n,t,e){if(!dy(n))throw Error(F(405));var s=e!=null&&e.hydratedSources||null,i=!1,r="",o=EA;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=_A(t,null,n,1,e??null,i,!1,r,o),n[Ti]=t.current,ru(n),s)for(n=0;n<s.length;n++)e=s[n],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new yp(t)};kn.render=function(n,t,e){if(!vp(t))throw Error(F(200));return wp(null,n,t,!1,e)};kn.unmountComponentAtNode=function(n){if(!vp(n))throw Error(F(40));return n._reactRootContainer?(aa(function(){wp(null,null,n,!1,function(){n._reactRootContainer=null,n[Ti]=null})}),!0):!1};kn.unstable_batchedUpdates=ry;kn.unstable_renderSubtreeIntoContainer=function(n,t,e,s){if(!vp(e))throw Error(F(200));if(n==null||n._reactInternals===void 0)throw Error(F(38));return wp(n,t,e,!1,s)};kn.version="18.3.1-next-f1338f8080-20240426";function CA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CA)}catch(n){console.error(n)}}CA(),Cw.exports=kn;var cE=Cw.exports,kA,Hv=cE;kA=Hv.createRoot,Hv.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),de=(n,t)=>{const e=ee.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>ee.createElement("svg",{ref:h,...uE,width:i,height:i,stroke:s,strokeWidth:o?Number(r)*24/Number(i):r,className:["lucide",`lucide-${hE(n)}`,l].join(" "),...u},[...t.map(([d,f])=>ee.createElement(d,f)),...Array.isArray(c)?c:[c]]));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=de("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=de("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=de("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=de("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=de("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=de("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=de("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=de("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),LA=({points:n,title:t})=>n.length===0?null:E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[E.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[E.jsx(MA,{className:"h-6 w-6 text-yellow-600"}),E.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["Key Points from ",t]})]}),E.jsx("div",{className:"space-y-3",children:n.map((e,s)=>E.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400",children:[E.jsx(nm,{className:"h-4 w-4 text-yellow-600 mt-1 flex-shrink-0"}),E.jsx("p",{className:"text-gray-800 text-sm leading-relaxed",children:e})]},s))}),E.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:E.jsxs("p",{className:"text-blue-800 text-sm",children:[" ",E.jsx("strong",{children:"Study Tip:"})," Review these key points before taking the quiz to improve your performance!"]})})]}),_E=({quiz:n,onStart:t,onDelete:e})=>{var s;return E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:[E.jsxs("div",{className:"flex items-start justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx(RA,{className:"h-8 w-8 text-blue-600"}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:n.title}),E.jsx("p",{className:"text-gray-600 text-sm",children:n.description})]})]}),E.jsx("button",{onClick:()=>e(n.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:E.jsx(wE,{className:"h-5 w-5"})})]}),E.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-4",children:[E.jsx("div",{className:"flex items-center space-x-1",children:E.jsxs("span",{children:[n.totalQuestions," questions"]})}),E.jsxs("div",{className:"flex items-center space-x-1",children:[E.jsx(PA,{className:"h-4 w-4"}),E.jsxs("span",{children:["~",n.estimatedTime," min"]})]}),E.jsxs("div",{className:"flex items-center space-x-1",children:[E.jsx(MA,{className:"h-4 w-4"}),E.jsxs("span",{children:[((s=n.importantPoints)==null?void 0:s.length)||0," key points"]})]})]}),E.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Created: ",new Date(n.createdAt).toLocaleDateString()]}),E.jsxs("button",{onClick:()=>t(n),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[E.jsx(mE,{className:"h-4 w-4"}),E.jsx("span",{children:"Start Quiz"})]})]})},Uv=n=>{let t;const e=new Set,s=(u,h)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const f=t;t=h??(typeof d!="object"||d===null)?d:Object.assign({},t,d),e.forEach(p=>p(t,f))}},i=()=>t,l={setState:s,getState:i,getInitialState:()=>c,subscribe:u=>(e.add(u),()=>e.delete(u))},c=t=n(s,i,l);return l},EE=n=>n?Uv(n):Uv,CE=n=>n;function kE(n,t=CE){const e=Dy.useSyncExternalStore(n.subscribe,()=>t(n.getState()),()=>t(n.getInitialState()));return Dy.useDebugValue(e),e}const TE=n=>{const t=EE(n),e=s=>kE(t,s);return Object.assign(e,t),e},PE=n=>TE;function RE(n,t){let e;try{e=n()}catch{return}return{getItem:i=>{var r;const o=c=>c===null?null:JSON.parse(c,void 0),l=(r=e.getItem(i))!=null?r:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,r)=>e.setItem(i,JSON.stringify(r,void 0)),removeItem:i=>e.removeItem(i)}}const sm=n=>t=>{try{const e=n(t);return e instanceof Promise?e:{then(s){return sm(s)(e)},catch(s){return this}}}catch(e){return{then(s){return this},catch(s){return sm(s)(e)}}}},ME=(n,t)=>(e,s,i)=>{let r={storage:RE(()=>localStorage),partialize:v=>v,version:0,merge:(v,S)=>({...S,...v}),...t},o=!1;const l=new Set,c=new Set;let u=r.storage;if(!u)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...v)},s,i);const h=()=>{const v=r.partialize({...s()});return u.setItem(r.name,{state:v,version:r.version})},d=i.setState;i.setState=(v,S)=>{d(v,S),h()};const f=n((...v)=>{e(...v),h()},s,i);i.getInitialState=()=>f;let p;const m=()=>{var v,S;if(!u)return;o=!1,l.forEach(w=>{var x;return w((x=s())!=null?x:f)});const y=((S=r.onRehydrateStorage)==null?void 0:S.call(r,(v=s())!=null?v:f))||void 0;return sm(u.getItem.bind(u))(r.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==r.version){if(r.migrate){const x=r.migrate(w.state,w.version);return x instanceof Promise?x.then(_=>[!0,_]):[!0,x]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var x;const[_,C]=w;if(p=r.merge(C,(x=s())!=null?x:f),e(p,!0),_)return h()}).then(()=>{y==null||y(p,void 0),p=s(),o=!0,c.forEach(w=>w(p))}).catch(w=>{y==null||y(void 0,w)})};return i.persist={setOptions:v=>{r={...r,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},r.skipHydration||m(),p||f},LE=ME,Ap=PE()(LE((n,t)=>({quizzes:[],currentQuiz:null,currentAttempt:null,isGenerating:!1,addQuiz:e=>{n(s=>({quizzes:[...s.quizzes,e]}))},setCurrentQuiz:e=>{n({currentQuiz:e})},setCurrentAttempt:e=>{n({currentAttempt:e})},setIsGenerating:e=>{n({isGenerating:e})},deleteQuiz:e=>{n(s=>({quizzes:s.quizzes.filter(i=>i.id!==e)}))}}),{name:"quiz-store",partialize:n=>({quizzes:n.quizzes})})),NE=({onCreateQuiz:n,onStartQuiz:t})=>{const{quizzes:e,deleteQuiz:s}=Ap(),i=r=>{window.confirm("Are you sure you want to delete this quiz?")&&s(r)};return E.jsxs("div",{className:"max-w-6xl mx-auto",children:[E.jsxs("div",{className:"mb-8",children:[E.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Quiz Dashboard"}),E.jsx("p",{className:"text-gray-600",children:"Create and manage your PDF-generated quizzes"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[E.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx(nm,{className:"h-8 w-8 text-blue-600"}),E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),E.jsx("div",{className:"text-sm text-gray-600",children:"Total Quizzes"})]})]})}),E.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx(AE,{className:"h-8 w-8 text-green-600"}),E.jsxs("div",{children:[E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.reduce((r,o)=>r+o.totalQuestions,0)}),E.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]})]})}),E.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx(yE,{className:"h-8 w-8 text-purple-600"}),E.jsxs("div",{children:[E.jsx("button",{onClick:n,className:"text-2xl font-bold text-purple-600 hover:text-purple-700 transition-colors",children:"Create New"}),E.jsx("div",{className:"text-sm text-gray-600",children:"Add Quiz"})]})]})})]}),e.length>0?E.jsxs("div",{className:"space-y-6",children:[e.length>0&&e[e.length-1].importantPoints&&E.jsx(LA,{points:e[e.length-1].importantPoints.slice(0,5),title:"Latest Upload"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(r=>E.jsx(_E,{quiz:r,onStart:t,onDelete:i},r.id))})]}):E.jsxs("div",{className:"text-center py-12",children:[E.jsx(nm,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),E.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No quizzes yet"}),E.jsx("p",{className:"text-gray-600 mb-6",children:"Upload your first PDF to generate a quiz and get started!"}),E.jsx("button",{onClick:n,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Create Your First Quiz"})]})]})};var Yc={};Yc.d=(n,t)=>{for(var e in t)Yc.o(t,e)&&!Yc.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};Yc.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var Z=globalThis.pdfjsLib={};Yc.d(Z,{AbortException:()=>Rr,AnnotationEditorLayer:()=>d0,AnnotationEditorParamsType:()=>ut,AnnotationEditorType:()=>et,AnnotationEditorUIManager:()=>ca,AnnotationLayer:()=>Tk,AnnotationMode:()=>$i,ColorPicker:()=>Ff,DOMSVGFactory:()=>by,DrawLayer:()=>g0,FeatureTest:()=>Ue,GlobalWorkerOptions:()=>bi,ImageKind:()=>Rd,InvalidPDFException:()=>rm,MissingPDFException:()=>pu,OPS:()=>Yn,OutputScale:()=>am,PDFDataRangeTransport:()=>Ib,PDFDateString:()=>yy,PDFWorker:()=>Va,PasswordResponses:()=>OE,PermissionFlag:()=>FE,PixelsPerInch:()=>Mr,RenderingCancelledException:()=>gy,TextLayer:()=>gu,TouchManager:()=>If,UnexpectedResponseException:()=>Mf,Util:()=>q,VerbosityLevel:()=>bp,XfaLayer:()=>Fb,build:()=>lk,createValidAbsoluteUrl:()=>HE,fetchData:()=>Ep,getDocument:()=>JC,getFilenameFromUrl:()=>KE,getPdfFilenameFromUrl:()=>QE,getXfaPageViewport:()=>ZE,isDataScheme:()=>Cp,isPdfFile:()=>my,noContextMenu:()=>ps,normalizeUnicode:()=>XE,setLayerDimensions:()=>la,shadow:()=>ot,stopEvent:()=>xn,version:()=>ak});const Ne=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),NA=[1,0,0,1,0,0],im=[.001,0,0,.001,0,0],IE=1e7,ng=1.35,wn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$i={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},DE="pdfjs_internal_editor_",et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ut={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},FE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_e={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Rd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},mc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bp={ERRORS:0,WARNINGS:1,INFOS:5},Yn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},OE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let xp=bp.WARNINGS;function jE(n){Number.isInteger(n)&&(xp=n)}function zE(){return xp}function Sp(n){xp>=bp.INFOS&&console.log(`Info: ${n}`)}function nt(n){xp>=bp.WARNINGS&&console.log(`Warning: ${n}`)}function bt(n){throw new Error(n)}function qt(n,t){n||bt(t)}function $E(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function HE(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=WE(n)}catch{}}const s=t?new URL(n,t):new URL(n);if($E(s))return s}catch{}return null}function ot(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Fr=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class Gv extends Fr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class sg extends Fr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class rm extends Fr{constructor(t){super(t,"InvalidPDFException")}}class pu extends Fr{constructor(t){super(t,"MissingPDFException")}}class Mf extends Fr{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class BE extends Fr{constructor(t){super(t,"FormatError")}}class Rr extends Fr{constructor(t){super(t,"AbortException")}}function IA(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&bt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function _p(n){typeof n!="string"&&bt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function UE(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function fy(n){const t=Object.create(null);for(const[e,s]of n)t[e]=s;return t}function GE(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function VE(){try{return new Function(""),!0}catch{return!1}}class Ue{static get isLittleEndian(){return ot(this,"isLittleEndian",GE())}static get isEvalSupported(){return ot(this,"isEvalSupported",VE())}static get isOffscreenCanvasSupported(){return ot(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ot(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ot(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ot(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return ot(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const ig=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ei,Md,om;class q{static makeHexColor(t,e,s){return`#${ig[t]}${ig[e]}${ig[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const s=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[s,i]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s;return[i,r]}static getAxialAlignedBoundingBox(t,e){const s=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],i[0],r[0],o[0]),Math.min(s[1],i[1],r[1],o[1]),Math.max(s[0],i[0],r[0],o[0]),Math.max(s[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],l=(s+o)/2,c=Math.sqrt((s+o)**2-4*(s*o-r*i))/2,u=l+c||1,h=l-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,i,o]}static bezierBoundingBox(t,e,s,i,r,o,l,c,u){return u?(u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c)):u=[Math.min(t,l),Math.min(e,c),Math.max(t,l),Math.max(e,c)],b(this,Ei,om).call(this,t,s,r,l,e,i,o,c,3*(-t+3*(s-r)+l),6*(t-2*s+r),3*(s-t),u),b(this,Ei,om).call(this,t,s,r,l,e,i,o,c,3*(-e+3*(i-o)+c),6*(e-2*i+o),3*(i-e),u),u}}Ei=new WeakSet,Md=function(t,e,s,i,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*t+3*u*e)+3*f*s)+p*i,v=d*(d*(d*r+3*u*o)+3*f*l)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],v)},om=function(t,e,s,i,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&b(this,Ei,Md).call(this,t,e,s,i,r,o,l,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),v=2*u;b(this,Ei,Md).call(this,t,e,s,i,r,o,l,c,(-h+m)/v,f),b(this,Ei,Md).call(this,t,e,s,i,r,o,l,c,(-h-m)/v,f)},A(q,Ei);function WE(n){return decodeURIComponent(escape(n))}let rg=null,Vv=null;function XE(n){return rg||(rg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Vv=new Map([["","t"]])),n.replaceAll(rg,(t,e,s)=>e?e.normalize("NFKC"):Vv.get(s))}function qE(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),IA(n)}const py="pdfjs_internal_id_";function YE(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(IA(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});const Us="http://www.w3.org/2000/svg",Vr=class Vr{};Y(Vr,"CSS",96),Y(Vr,"PDF",72),Y(Vr,"PDF_TO_CSS_UNITS",Vr.CSS/Vr.PDF);let Mr=Vr;async function Ep(n,t="text"){if(_c(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Xh{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let m,v,S,y;h===0?(m=Math.abs(u-t[1])*s+r,v=Math.abs(c-t[0])*s+o,S=(t[3]-t[1])*s,y=(t[2]-t[0])*s):(m=Math.abs(c-t[0])*s+r,v=Math.abs(u-t[1])*s+o,S=(t[2]-t[0])*s,y=(t[3]-t[1])*s),this.transform=[h*s,d*s,f*s,p*s,m-h*s*c-f*s*u,v-d*s*c-p*s*u],this.width=S,this.height=y}get rawDims(){const{userUnit:t,viewBox:e}=this,s=e.map(i=>i*t);return ot(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Xh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return q.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=q.applyTransform([t[0],t[1]],this.transform),s=q.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return q.applyInverseTransform([t,e],this.transform)}}class gy extends Fr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Cp(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function my(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function KE(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function QE(n,t="document.pdf"){if(typeof n!="string")return t;if(Cp(n))return nt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class Wv{constructor(){Y(this,"started",Object.create(null));Y(this,"times",[])}time(t){t in this.started&&nt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||nt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function _c(n,t){try{const{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function ps(n){n.preventDefault()}function xn(n){n.preventDefault(),n.stopPropagation()}var yu;class yy{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,yu)||g(this,yu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,yu).exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(s,i,r,o,l,c))}}yu=new WeakMap,A(yy,yu);function ZE(n,{scale:t=1,rotation:e=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Xh({viewBox:r,userUnit:1,scale:t,rotation:e})}function vy(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(nt(`Not a valid color format: "${n}"`),[0,0,0])}function JE(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,vy(s))}t.remove()}function Pt(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform();return[t,e,s,i,r,o]}function ys(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[t,e,s,i,r,o]}function la(n,t,e=!1,s=!0){if(t instanceof Xh){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=n,l=Ue.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}s&&n.setAttribute("data-main-rotation",t.rotation)}class am{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Hi,Kr,Kn,Qr,vu,wu,zf,DA,Ge,FA,OA,Ld,jA,cm;const Xs=class Xs{constructor(t){A(this,Ge);A(this,Hi,null);A(this,Kr,null);A(this,Kn);A(this,Qr,null);A(this,vu,null);g(this,Kn,t),a(Xs,wu)||g(Xs,wu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=g(this,Hi,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Kn)._uiManager._signal;t.addEventListener("contextmenu",ps,{signal:e}),t.addEventListener("pointerdown",b(Xs,zf,DA),{signal:e});const s=g(this,Qr,document.createElement("div"));s.className="buttons",t.append(s);const i=a(this,Kn).toolbarPosition;if(i){const{style:r}=t,o=a(this,Kn)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return b(this,Ge,jA).call(this),t}get div(){return a(this,Hi)}hide(){var t;a(this,Hi).classList.add("hidden"),(t=a(this,Kr))==null||t.hideDropdown()}show(){var t;a(this,Hi).classList.remove("hidden"),(t=a(this,vu))==null||t.shown()}async addAltText(t){const e=await t.render();b(this,Ge,Ld).call(this,e),a(this,Qr).prepend(e,a(this,Ge,cm)),g(this,vu,t)}addColorPicker(t){g(this,Kr,t);const e=t.renderButton();b(this,Ge,Ld).call(this,e),a(this,Qr).prepend(e,a(this,Ge,cm))}remove(){var t;a(this,Hi).remove(),(t=a(this,Kr))==null||t.destroy(),g(this,Kr,null)}};Hi=new WeakMap,Kr=new WeakMap,Kn=new WeakMap,Qr=new WeakMap,vu=new WeakMap,wu=new WeakMap,zf=new WeakSet,DA=function(t){t.stopPropagation()},Ge=new WeakSet,FA=function(t){a(this,Kn)._focusEventsAllowed=!1,xn(t)},OA=function(t){a(this,Kn)._focusEventsAllowed=!0,xn(t)},Ld=function(t){const e=a(this,Kn)._uiManager._signal;t.addEventListener("focusin",b(this,Ge,FA).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",b(this,Ge,OA).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ps,{signal:e})},jA=function(){const{editorType:t,_uiManager:e}=a(this,Kn),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",a(Xs,wu)[t]),b(this,Ge,Ld).call(this,s),s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),a(this,Qr).append(s)},cm=function(){const t=document.createElement("div");return t.className="divider",t},A(Xs,zf),A(Xs,wu,null);let lm=Xs;var Au,Zr,Jr,Lr,zA,$A,HA;class tC{constructor(t){A(this,Lr);A(this,Au,null);A(this,Zr,null);A(this,Jr);g(this,Jr,t)}show(t,e,s){const[i,r]=b(this,Lr,$A).call(this,e,s),{style:o}=a(this,Zr)||g(this,Zr,b(this,Lr,zA).call(this));t.append(a(this,Zr)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Zr).remove()}}Au=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,Lr=new WeakSet,zA=function(){const t=g(this,Zr,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ps,{signal:a(this,Jr)._signal});const e=g(this,Au,document.createElement("div"));return e.className="buttons",t.append(e),b(this,Lr,HA).call(this),t},$A=function(t,e){let s=0,i=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const l=r.x+(e?r.width:0);if(o>s){i=l,s=o;continue}e?l>i&&(i=l):l<i&&(i=l)}return[e?1-i:i,s]},HA=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=a(this,Jr)._signal;t.addEventListener("contextmenu",ps,{signal:s}),t.addEventListener("click",()=>{a(this,Jr).highlightSelection("floating_button")},{signal:s}),a(this,Au).append(t)};function Lf(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}var $f;class eC{constructor(){A(this,$f,0)}get id(){return`${DE}${De(this,$f)._++}`}}$f=new WeakMap;var Wa,bu,ke,Xa,Nd;const Ey=class Ey{constructor(){A(this,Xa);A(this,Wa,qE());A(this,bu,0);A(this,ke,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ot(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:i,type:r}=t;return b(this,Xa,Nd).call(this,`${e}_${s}_${i}_${r}`,t)}async getFromUrl(t){return b(this,Xa,Nd).call(this,t,t)}async getFromBlob(t,e){const s=await e;return b(this,Xa,Nd).call(this,t,s)}async getFromId(t){a(this,ke)||g(this,ke,new Map);const e=a(this,ke).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,ke)||g(this,ke,new Map);let s=a(this,ke).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${a(this,Wa)}_${De(this,bu)._++}`,refCounter:1,isSvg:!1},a(this,ke).set(t,s),a(this,ke).set(s.id,s),s}getSvgUrl(t){const e=a(this,ke).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;a(this,ke)||g(this,ke,new Map);const e=a(this,ke).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,Wa)}_`)}};Wa=new WeakMap,bu=new WeakMap,ke=new WeakMap,Xa=new WeakSet,Nd=async function(t,e){a(this,ke)||g(this,ke,new Map);let s=a(this,ke).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${a(this,Wa)}_${De(this,bu)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(s.url=e,i=await Ep(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=Ey._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,u()},o.onload=async()=>{const d=s.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){nt(i),s=null}return a(this,ke).set(t,s),s&&a(this,ke).set(s.id,s),s};let um=Ey;var Bt,Bi,xu,Nt;class nC{constructor(t=128){A(this,Bt,[]);A(this,Bi,!1);A(this,xu);A(this,Nt,-1);g(this,xu,t)}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&t(),a(this,Bi))return;const c={cmd:t,undo:e,post:s,type:r};if(a(this,Nt)===-1){a(this,Bt).length>0&&(a(this,Bt).length=0),g(this,Nt,0),a(this,Bt).push(c);return}if(o&&a(this,Bt)[a(this,Nt)].type===r){l&&(c.undo=a(this,Bt)[a(this,Nt)].undo),a(this,Bt)[a(this,Nt)]=c;return}const u=a(this,Nt)+1;u===a(this,xu)?a(this,Bt).splice(0,1):(g(this,Nt,u),u<a(this,Bt).length&&a(this,Bt).splice(u)),a(this,Bt).push(c)}undo(){if(a(this,Nt)===-1)return;g(this,Bi,!0);const{undo:t,post:e}=a(this,Bt)[a(this,Nt)];t(),e==null||e(),g(this,Bi,!1),g(this,Nt,a(this,Nt)-1)}redo(){if(a(this,Nt)<a(this,Bt).length-1){g(this,Nt,a(this,Nt)+1),g(this,Bi,!0);const{cmd:t,post:e}=a(this,Bt)[a(this,Nt)];t(),e==null||e(),g(this,Bi,!1)}}hasSomethingToUndo(){return a(this,Nt)!==-1}hasSomethingToRedo(){return a(this,Nt)<a(this,Bt).length-1}cleanType(t){if(a(this,Nt)!==-1){for(let e=a(this,Nt);e>=0;e--)if(a(this,Bt)[e].type!==t){a(this,Bt).splice(e+1,a(this,Nt)-e),g(this,Nt,e);return}a(this,Bt).length=0,g(this,Nt,-1)}}destroy(){g(this,Bt,null)}}Bt=new WeakMap,Bi=new WeakMap,xu=new WeakMap,Nt=new WeakMap;var Hf,BA;class qh{constructor(t){A(this,Hf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ue.platform;for(const[s,i,r={}]of t)for(const o of s){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(b(this,Hf,BA).call(this,e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:l=null}}=s;l&&!l(t,e)||(i.bind(t,...o,e)(),r||xn(e))}}Hf=new WeakSet,BA=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Bf=class Bf{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return JE(t),ot(this,"_colors",t)}convert(t){const e=vy(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,o)=>r===e[o]))return Bf._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?q.makeHexColor(...e):t}};Y(Bf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let hm=Bf;var qa,an,Zt,fe,Ya,Ks,Ka,Rn,Ui,to,Qa,eo,xs,Qn,no,Su,_u,Za,Eu,Ss,Gi,Ja,Vi,_s,Uf,Wi,Cu,Xi,so,ku,Tu,ie,mt,Qs,io,Pu,Ru,qi,Es,Zs,Mu,Mn,z,Id,dm,UA,GA,Dd,VA,WA,XA,fm,qA,pm,gm,YA,Fe,Gs,KA,QA,mm,ZA,Ec,ym;const Fa=class Fa{constructor(t,e,s,i,r,o,l,c,u,h,d,f,p){A(this,z);A(this,qa,new AbortController);A(this,an,null);A(this,Zt,new Map);A(this,fe,new Map);A(this,Ya,null);A(this,Ks,null);A(this,Ka,null);A(this,Rn,new nC);A(this,Ui,null);A(this,to,null);A(this,Qa,0);A(this,eo,new Set);A(this,xs,null);A(this,Qn,null);A(this,no,new Set);Y(this,"_editorUndoBar",null);A(this,Su,!1);A(this,_u,!1);A(this,Za,!1);A(this,Eu,null);A(this,Ss,null);A(this,Gi,null);A(this,Ja,null);A(this,Vi,!1);A(this,_s,null);A(this,Uf,new eC);A(this,Wi,!1);A(this,Cu,!1);A(this,Xi,null);A(this,so,null);A(this,ku,null);A(this,Tu,null);A(this,ie,et.NONE);A(this,mt,new Set);A(this,Qs,null);A(this,io,null);A(this,Pu,null);A(this,Ru,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,qi,[0,0]);A(this,Es,null);A(this,Zs,null);A(this,Mu,null);A(this,Mn,null);const m=this._signal=a(this,qa).signal;g(this,Zs,t),g(this,Mu,e),g(this,Ya,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:m}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),i._on("setpreference",this.onSetPreference.bind(this),{signal:m}),i._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:m}),b(this,z,VA).call(this),b(this,z,YA).call(this),b(this,z,fm).call(this),g(this,Ks,r.annotationStorage),g(this,Eu,r.filterFactory),g(this,io,o),g(this,Ja,l||null),g(this,Su,c),g(this,_u,u),g(this,Za,h),g(this,Tu,d||null),this.viewParameters={realScale:Mr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const t=Fa.prototype,e=o=>a(o,Zs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ot(this,"_keyboardManager",new qh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Zs).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Zs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,i,r;(t=a(this,Mn))==null||t.resolve(),g(this,Mn,null),(e=a(this,qa))==null||e.abort(),g(this,qa,null),this._signal=null;for(const o of a(this,fe).values())o.destroy();a(this,fe).clear(),a(this,Zt).clear(),a(this,no).clear(),g(this,an,null),a(this,mt).clear(),a(this,Rn).destroy(),(s=a(this,Ya))==null||s.destroy(),(i=a(this,_s))==null||i.hide(),g(this,_s,null),a(this,Ss)&&(clearTimeout(a(this,Ss)),g(this,Ss,null)),a(this,Es)&&(clearTimeout(a(this,Es)),g(this,Es,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Tu)}get useNewAltTextFlow(){return a(this,_u)}get useNewAltTextWhenAddingImage(){return a(this,Za)}get hcmFilter(){return ot(this,"hcmFilter",a(this,io)?a(this,Eu).addHCMFilter(a(this,io).foreground,a(this,io).background):"none")}get direction(){return ot(this,"direction",getComputedStyle(a(this,Zs)).direction)}get highlightColors(){return ot(this,"highlightColors",a(this,Ja)?new Map(a(this,Ja).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return ot(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,to,t)}setMainHighlightColorPicker(t){g(this,ku,t)}editAltText(t,e=!1){var s;(s=a(this,Ya))==null||s.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":g(this,Za,e);break}}onPageChanging({pageNumber:t}){g(this,Qa,t-1)}focusMainContainer(){a(this,Zs).focus()}findParent(t,e){for(const s of a(this,fe).values()){const{x:i,y:r,width:o,height:l}=s.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+l)return s}return null}disableUserSelect(t=!1){a(this,Mu).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,no).add(t)}removeShouldRescale(t){a(this,no).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Mr.PDF_TO_CSS_UNITS;for(const s of a(this,no))s.onScaleChanging();(e=a(this,to))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=e,l=e.toString(),u=b(this,z,Id).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=b(this,z,dm).call(this,u),f=a(this,ie)===et.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(et.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Ks)&&!a(this,Ks).has(t.id)&&a(this,Ks).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,Vi)&&(g(this,Vi,!1),b(this,z,Dd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,mt))if(e.div.contains(t)){g(this,so,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,so))return;const[t,e]=a(this,so);g(this,so,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){b(this,z,fm).call(this),b(this,z,pm).call(this)}removeEditListeners(){b(this,z,qA).call(this),b(this,z,gm).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of a(this,Qn))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of a(this,Qn))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=a(this,an))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of a(this,mt)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,Qn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){nt(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)b(this,z,mm).call(this,c);b(this,z,ym).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){nt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,ie)!==et.NONE&&!this.isEditorHandlingKeyboard&&Fa._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Vi)&&(g(this,Vi,!1),b(this,z,Dd).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(b(this,z,WA).call(this),b(this,z,pm).call(this),b(this,z,Fe).call(this,{isEditing:a(this,ie)!==et.NONE,isEmpty:b(this,z,Ec).call(this),hasSomethingToUndo:a(this,Rn).hasSomethingToUndo(),hasSomethingToRedo:a(this,Rn).hasSomethingToRedo(),hasSelectedEditor:!1})):(b(this,z,XA).call(this),b(this,z,gm).call(this),b(this,z,Fe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,Qn)){g(this,Qn,t);for(const e of a(this,Qn))b(this,z,Gs).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Uf).id}get currentLayer(){return a(this,fe).get(a(this,Qa))}getLayer(t){return a(this,fe).get(t)}get currentPageIndex(){return a(this,Qa)}addLayer(t){a(this,fe).set(t.pageIndex,t),a(this,Wi)?t.enable():t.disable()}removeLayer(t){a(this,fe).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var i;if(a(this,ie)!==t&&!(a(this,Mn)&&(await a(this,Mn).promise,!a(this,Mn)))){if(g(this,Mn,Promise.withResolvers()),g(this,ie,t),t===et.NONE){this.setEditingState(!1),b(this,z,QA).call(this),(i=this._editorUndoBar)==null||i.hide(),a(this,Mn).resolve();return}this.setEditingState(!0),await b(this,z,KA).call(this),this.unselectAll();for(const r of a(this,fe).values())r.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),a(this,Mn).resolve();return}for(const r of a(this,Zt).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();a(this,Mn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,ie)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(a(this,Qn)){switch(t){case ut.CREATE:this.currentLayer.addNewEditor();return;case ut.HIGHLIGHT_DEFAULT_COLOR:(s=a(this,ku))==null||s.updateColor(e);break;case ut.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Pu)||g(this,Pu,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of a(this,mt))i.updateParams(t,e);for(const i of a(this,Qn))i.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of a(this,Zt).values())o.editorType===t&&o.show(e);(((r=a(this,Pu))==null?void 0:r.get(ut.HIGHLIGHT_SHOW_ALL))??!0)!==e&&b(this,z,Gs).call(this,[[ut.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Cu)!==t){g(this,Cu,t);for(const e of a(this,fe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of a(this,Zt).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return a(this,Zt).get(t)}addEditor(t){a(this,Zt).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(a(this,Ss)&&clearTimeout(a(this,Ss)),g(this,Ss,setTimeout(()=>{this.focusMainContainer(),g(this,Ss,null)},0))),a(this,Zt).delete(t.id),this.unselect(t),(!t.annotationElementId||!a(this,eo).has(t.annotationElementId))&&((e=a(this,Ks))==null||e.remove(t.id))}addDeletedAnnotationElement(t){a(this,eo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,eo).has(t)}removeDeletedAnnotationElement(t){a(this,eo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,an)!==t&&(g(this,an,t),t&&b(this,z,Gs).call(this,t.propertiesToUpdate))}updateUI(t){a(this,z,ZA)===t&&b(this,z,Gs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){b(this,z,Gs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,mt).has(t)){a(this,mt).delete(t),t.unselect(),b(this,z,Fe).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,mt).add(t),t.select(),b(this,z,Gs).call(this,t.propertiesToUpdate),b(this,z,Fe).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,to))==null||e.commitOrRemove();for(const s of a(this,mt))s!==t&&s.unselect();a(this,mt).clear(),a(this,mt).add(t),t.select(),b(this,z,Gs).call(this,t.propertiesToUpdate),b(this,z,Fe).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,mt).has(t)}get firstSelectedEditor(){return a(this,mt).values().next().value}unselect(t){t.unselect(),a(this,mt).delete(t),b(this,z,Fe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,mt).size!==0}get isEnterHandled(){return a(this,mt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Rn).undo(),b(this,z,Fe).call(this,{hasSomethingToUndo:a(this,Rn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:b(this,z,Ec).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Rn).redo(),b(this,z,Fe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Rn).hasSomethingToRedo(),isEmpty:b(this,z,Ec).call(this)})}addCommands(t){a(this,Rn).add(t),b(this,z,Fe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:b(this,z,Ec).call(this)})}cleanUndoStack(t){a(this,Rn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,mt)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},i=()=>{for(const o of e)b(this,z,mm).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=a(this,an))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,an)||this.hasSelection}selectAll(){for(const t of a(this,mt))t.commit();b(this,z,ym).call(this,a(this,Zt).values())}unselectAll(){var t;if(!(a(this,an)&&(a(this,an).commitOrRemove(),a(this,ie)!==et.NONE))&&!((t=a(this,to))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,mt))e.unselect();a(this,mt).clear(),b(this,z,Fe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;a(this,qi)[0]+=t,a(this,qi)[1]+=e;const[i,r]=a(this,qi),o=[...a(this,mt)],l=1e3;a(this,Es)&&clearTimeout(a(this,Es)),g(this,Es,setTimeout(()=>{g(this,Es,null),a(this,qi)[0]=a(this,qi)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,Zt).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of o)a(this,Zt).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,xs,new Map);for(const t of a(this,mt))a(this,xs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,xs))return!1;this.disableUserSelect(!1);const t=a(this,xs);g(this,xs,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},l]of t)l.newX=i,l.newY=r,l.newPageIndex=o,e||(e=i!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const s=(i,r,o,l)=>{if(a(this,Zt).has(i.id)){const c=a(this,fe).get(l);c?i._setParentAndPosition(c,r,o):(i.pageIndex=l,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:l}]of t)s(i,r,o,l)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:l}]of t)s(i,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,xs))for(const s of a(this,xs).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,mt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,an)===t}getActive(){return a(this,an)}getMode(){return a(this,ie)}get imageManager(){return ot(this,"imageManager",new um)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-s)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-s)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:v}of d.getClientRects())m===0||v===0||c.push(l(f,p,m,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Ka)||g(this,Ka,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Ka))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=a(this,Ka))==null?void 0:i.get(t.data.id);if(!e)return;const s=a(this,Ks).getRawValue(e);s&&(a(this,ie)===et.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};qa=new WeakMap,an=new WeakMap,Zt=new WeakMap,fe=new WeakMap,Ya=new WeakMap,Ks=new WeakMap,Ka=new WeakMap,Rn=new WeakMap,Ui=new WeakMap,to=new WeakMap,Qa=new WeakMap,eo=new WeakMap,xs=new WeakMap,Qn=new WeakMap,no=new WeakMap,Su=new WeakMap,_u=new WeakMap,Za=new WeakMap,Eu=new WeakMap,Ss=new WeakMap,Gi=new WeakMap,Ja=new WeakMap,Vi=new WeakMap,_s=new WeakMap,Uf=new WeakMap,Wi=new WeakMap,Cu=new WeakMap,Xi=new WeakMap,so=new WeakMap,ku=new WeakMap,Tu=new WeakMap,ie=new WeakMap,mt=new WeakMap,Qs=new WeakMap,io=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,qi=new WeakMap,Es=new WeakMap,Zs=new WeakMap,Mu=new WeakMap,Mn=new WeakMap,z=new WeakSet,Id=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},dm=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of a(this,fe).values())if(s.hasTextLayer(t))return s;return null},UA=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=b(this,z,Id).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(a(this,_s)||g(this,_s,new tC(this)),a(this,_s).show(s,i,this.direction==="ltr"))},GA=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,Qs)&&((r=a(this,_s))==null||r.hide(),g(this,Qs,null),b(this,z,Fe).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,Qs))return;const i=b(this,z,Id).call(this,t).closest(".textLayer");if(!i){a(this,Qs)&&((o=a(this,_s))==null||o.hide(),g(this,Qs,null),b(this,z,Fe).call(this,{hasSelectedText:!1}));return}if((l=a(this,_s))==null||l.hide(),g(this,Qs,e),b(this,z,Fe).call(this,{hasSelectedText:!0}),!(a(this,ie)!==et.HIGHLIGHT&&a(this,ie)!==et.NONE)&&(a(this,ie)===et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,Vi,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,ie)===et.HIGHLIGHT?b(this,z,dm).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&b(this,z,Dd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Dd=function(t=""){a(this,ie)===et.HIGHLIGHT?this.highlightSelection(t):a(this,Su)&&b(this,z,UA).call(this)},VA=function(){document.addEventListener("selectionchange",b(this,z,GA).bind(this),{signal:this._signal})},WA=function(){if(a(this,Gi))return;g(this,Gi,new AbortController);const t=this.combinedSignal(a(this,Gi));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},XA=function(){var t;(t=a(this,Gi))==null||t.abort(),g(this,Gi,null)},fm=function(){if(a(this,Xi))return;g(this,Xi,new AbortController);const t=this.combinedSignal(a(this,Xi));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},qA=function(){var t;(t=a(this,Xi))==null||t.abort(),g(this,Xi,null)},pm=function(){if(a(this,Ui))return;g(this,Ui,new AbortController);const t=this.combinedSignal(a(this,Ui));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},gm=function(){var t;(t=a(this,Ui))==null||t.abort(),g(this,Ui,null)},YA=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Fe=function(t){Object.entries(t).some(([s,i])=>a(this,Ru)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Ru),t)}),a(this,ie)===et.HIGHLIGHT&&t.hasSelectedEditor===!1&&b(this,z,Gs).call(this,[[ut.HIGHLIGHT_FREE,!0]]))},Gs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},KA=async function(){if(!a(this,Wi)){g(this,Wi,!0);const t=[];for(const e of a(this,fe).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,Zt).values())e.enable()}},QA=function(){if(this.unselectAll(),a(this,Wi)){g(this,Wi,!1);for(const t of a(this,fe).values())t.disable();for(const t of a(this,Zt).values())t.disable()}},mm=function(t){const e=a(this,fe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},ZA=function(){let t=null;for(t of a(this,mt));return t},Ec=function(){if(a(this,Zt).size===0)return!0;if(a(this,Zt).size===1)for(const t of a(this,Zt).values())return t.isEmpty();return!1},ym=function(t){for(const e of a(this,mt))e.unselect();a(this,mt).clear();for(const e of t)e.isEmpty()||(a(this,mt).add(e),e.select());b(this,z,Fe).call(this,{hasSelectedEditor:this.hasSelection})},Y(Fa,"TRANSLATE_SMALL",1),Y(Fa,"TRANSLATE_BIG",10);let ca=Fa;var re,Cs,Zn,tl,ks,ln,el,Ts,Qe,Js,ro,Ps,Yi,us,Cc,Fd;const Oe=class Oe{constructor(t){A(this,us);A(this,re,null);A(this,Cs,!1);A(this,Zn,null);A(this,tl,null);A(this,ks,null);A(this,ln,null);A(this,el,!1);A(this,Ts,null);A(this,Qe,null);A(this,Js,null);A(this,ro,null);A(this,Ps,!1);g(this,Qe,t),g(this,Ps,t._uiManager.useNewAltTextFlow),a(Oe,Yi)||g(Oe,Yi,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Oe._l10n??(Oe._l10n=t)}async render(){const t=g(this,Zn,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=g(this,tl,document.createElement("span"));t.append(e),a(this,Ps)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(Oe,Yi).missing),e.setAttribute("data-l10n-id",a(Oe,Yi)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=a(this,Qe)._uiManager._signal;t.addEventListener("contextmenu",ps,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),a(this,Qe)._uiManager.editAltText(a(this,Qe)),a(this,Ps)&&a(this,Qe)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,us,Cc)}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(g(this,el,!0),i(r))},{signal:s}),await b(this,us,Fd).call(this),t}finish(){a(this,Zn)&&(a(this,Zn).focus({focusVisible:a(this,el)}),g(this,el,!1))}isEmpty(){return a(this,Ps)?a(this,re)===null:!a(this,re)&&!a(this,Cs)}hasData(){return a(this,Ps)?a(this,re)!==null||!!a(this,Js):this.isEmpty()}get guessedText(){return a(this,Js)}async setGuessedText(t){a(this,re)===null&&(g(this,Js,t),g(this,ro,await Oe._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),b(this,us,Fd).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Ps)||a(this,re)){(e=a(this,Ts))==null||e.remove(),g(this,Ts,null);return}if(!a(this,Ts)){const s=g(this,Ts,document.createElement("div"));s.className="noAltTextBadge",a(this,Qe).div.append(s)}a(this,Ts).classList.toggle("hidden",!t)}serialize(t){let e=a(this,re);return!t&&a(this,Js)===e&&(e=a(this,ro)),{altText:e,decorative:a(this,Cs),guessedText:a(this,Js),textWithDisclaimer:a(this,ro)}}get data(){return{altText:a(this,re),decorative:a(this,Cs)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(g(this,Js,s),g(this,ro,i)),!(a(this,re)===t&&a(this,Cs)===e)&&(r||(g(this,re,t),g(this,Cs,e)),b(this,us,Fd).call(this))}toggle(t=!1){a(this,Zn)&&(!t&&a(this,ln)&&(clearTimeout(a(this,ln)),g(this,ln,null)),a(this,Zn).disabled=!t)}shown(){a(this,Qe)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,us,Cc)}})}destroy(){var t,e;(t=a(this,Zn))==null||t.remove(),g(this,Zn,null),g(this,tl,null),g(this,ks,null),(e=a(this,Ts))==null||e.remove(),g(this,Ts,null)}};re=new WeakMap,Cs=new WeakMap,Zn=new WeakMap,tl=new WeakMap,ks=new WeakMap,ln=new WeakMap,el=new WeakMap,Ts=new WeakMap,Qe=new WeakMap,Js=new WeakMap,ro=new WeakMap,Ps=new WeakMap,Yi=new WeakMap,us=new WeakSet,Cc=function(){return a(this,re)&&"added"||a(this,re)===null&&this.guessedText&&"review"||"missing"},Fd=async function(){var i,r,o;const t=a(this,Zn);if(!t)return;if(a(this,Ps)){if(t.classList.toggle("done",!!a(this,re)),t.setAttribute("data-l10n-id",a(Oe,Yi)[a(this,us,Cc)]),(i=a(this,tl))==null||i.setAttribute("data-l10n-id",a(Oe,Yi)[`${a(this,us,Cc)}-label`]),!a(this,re)){(r=a(this,ks))==null||r.remove();return}}else{if(!a(this,re)&&!a(this,Cs)){t.classList.remove("done"),(o=a(this,ks))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,ks);if(!e){g(this,ks,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Qe).id}`;const l=100,c=a(this,Qe)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,ln)),g(this,ln,null)},{once:!0}),t.addEventListener("mouseenter",()=>{g(this,ln,setTimeout(()=>{g(this,ln,null),a(this,ks).classList.add("show"),a(this,Qe)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;a(this,ln)&&(clearTimeout(a(this,ln)),g(this,ln,null)),(u=a(this,ks))==null||u.classList.remove("show")},{signal:c})}a(this,Cs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,re)),e.parentNode||t.append(e);const s=a(this,Qe).getImageForAltText();s==null||s.setAttribute("aria-describedby",e.id)},A(Oe,Yi,null),Y(Oe,"_l10n",null);let Nf=Oe;var Lu,oo,Nu,Iu,Du,Fu,Ou,nl,ti,ao,Ki,Mi,JA,tb,vm;const Cy=class Cy{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){A(this,Mi);A(this,Lu);A(this,oo,!1);A(this,Nu,null);A(this,Iu);A(this,Du);A(this,Fu);A(this,Ou);A(this,nl);A(this,ti,null);A(this,ao);A(this,Ki,null);g(this,Lu,t),g(this,Nu,s),g(this,Iu,e),g(this,Du,i),g(this,Fu,r),g(this,Ou,o),g(this,ao,new AbortController),g(this,nl,AbortSignal.any([l,a(this,ao).signal])),t.addEventListener("touchstart",b(this,Mi,JA).bind(this),{passive:!1,signal:a(this,nl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ot(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=a(this,ao))==null||t.abort(),g(this,ao,null)}};Lu=new WeakMap,oo=new WeakMap,Nu=new WeakMap,Iu=new WeakMap,Du=new WeakMap,Fu=new WeakMap,Ou=new WeakMap,nl=new WeakMap,ti=new WeakMap,ao=new WeakMap,Ki=new WeakMap,Mi=new WeakSet,JA=function(t){var i,r,o;if((i=a(this,Iu))!=null&&i.call(this)||t.touches.length<2)return;if(!a(this,Ki)){g(this,Ki,new AbortController);const l=AbortSignal.any([a(this,nl),a(this,Ki).signal]),c=a(this,Lu),u={signal:l,passive:!1};c.addEventListener("touchmove",b(this,Mi,tb).bind(this),u),c.addEventListener("touchend",b(this,Mi,vm).bind(this),u),c.addEventListener("touchcancel",b(this,Mi,vm).bind(this),u),(r=a(this,Du))==null||r.call(this)}if(xn(t),t.touches.length!==2||(o=a(this,Nu))!=null&&o.call(this)){g(this,ti,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),g(this,ti,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},tb=function(t){var _;if(!a(this,ti)||t.touches.length!==2)return;let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:l}=s,c=a(this,ti),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,m=f-h,v=o-i,S=l-r,y=Math.hypot(v,S)||1,w=Math.hypot(p,m)||1;if(!a(this,oo)&&Math.abs(w-y)<=Cy.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,t.preventDefault(),!a(this,oo)){g(this,oo,!0);return}const x=[(i+o)/2,(r+l)/2];(_=a(this,Fu))==null||_.call(this,x,w,y)},vm=function(t){var e;a(this,Ki).abort(),g(this,Ki,null),(e=a(this,Ou))==null||e.call(this),a(this,ti)&&(t.preventDefault(),g(this,ti,null),g(this,oo,!1))};let If=Cy;var lo,Jn,Ct,sl,Qi,ju,co,pe,uo,ei,Zi,zu,ho,cn,$u,fo,ni,Rs,il,rl,Ln,po,Hu,Gf,K,wm,Bu,Am,Od,eb,nb,bm,jd,xm,sb,ib,rb,Sm,ob,_m,ab,lb,cb,Em,kc;const st=class st{constructor(t){A(this,K);A(this,lo,null);A(this,Jn,null);A(this,Ct,null);A(this,sl,!1);A(this,Qi,null);A(this,ju,"");A(this,co,!1);A(this,pe,null);A(this,uo,null);A(this,ei,null);A(this,Zi,null);A(this,zu,"");A(this,ho,!1);A(this,cn,null);A(this,$u,!1);A(this,fo,!1);A(this,ni,!1);A(this,Rs,null);A(this,il,0);A(this,rl,0);A(this,Ln,null);A(this,po,null);Y(this,"_editToolbar",null);Y(this,"_initialOptions",Object.create(null));Y(this,"_initialData",null);Y(this,"_isVisible",!0);Y(this,"_uiManager",null);Y(this,"_focusEventsAllowed",!0);A(this,Hu,!1);A(this,Gf,st._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=st.prototype._resizeWithKeyboard,e=ca.TRANSLATE_SMALL,s=ca.TRANSLATE_BIG;return ot(this,"_resizerKeyboardManager",new qh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],st.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ot(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new sC({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(st._l10n??(st._l10n=t),st._l10nResizer||(st._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),st._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);st._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Hu)}set _isDraggable(t){var e;g(this,Hu,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Gf)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):b(this,K,kc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,ho)?g(this,ho,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/o,this.fixAndSetPosition()}translate(t,e){b(this,K,wm).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,cn)||g(this,cn,[this.x,this.y,this.width,this.height]),b(this,K,wm).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){a(this,cn)||g(this,cn,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=s;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,cn)&&(a(this,cn)[0]!==this.x||a(this,cn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,cn)&&(a(this,cn)[2]!==this.width||a(this,cn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=st,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=s,c*=i,r*=s,o*=i,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(s-l,r)),o=Math.max(0,Math.min(i-c,o));break;case 90:r=Math.max(0,Math.min(s-c,r)),o=Math.min(i,Math.max(l,o));break;case 180:r=Math.min(s,Math.max(l,r)),o=Math.min(i,Math.max(c,o));break;case 270:r=Math.min(s,Math.max(c,r)),o=Math.max(0,Math.min(i-l,o));break}this.x=r/=s,this.y=o/=i;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return b(s=st,Bu,Am).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return b(s=st,Bu,Am).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,a(this,co)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,i=s.endsWith("%"),r=!a(this,co)&&e.endsWith("%");if(i&&r)return;const[o,l]=this.parentDimensions;i||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!a(this,co)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Ct))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,fo)?this._editToolbar:(this._editToolbar=new lm(this),this.div.append(this._editToolbar.render()),a(this,Ct)&&await this._editToolbar.addAltText(a(this,Ct)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,Ct))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,Ct)||(Nf.initialize(st._l10n),g(this,Ct,new Nf(this)),a(this,lo)&&(a(this,Ct).data=a(this,lo),g(this,lo,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,Ct))==null?void 0:t.data}set altTextData(t){a(this,Ct)&&(a(this,Ct).data=t)}get guessedAltText(){var t;return(t=a(this,Ct))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Ct))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Ct))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Ct)&&!a(this,Ct).isEmpty()}hasAltTextData(){var t;return((t=a(this,Ct))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,sl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),b(this,K,_m).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),Lf(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,po)||g(this,po,new If({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:b(this,K,sb).bind(this),onPinching:b(this,K,ib).bind(this),onPinchEnd:b(this,K,rb).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=Ue.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(g(this,ho,!0),this._isDraggable){b(this,K,ob).call(this,t);return}b(this,K,Sm).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Rs)&&clearTimeout(a(this,Rs)),g(this,Rs,setTimeout(()=>{var t;g(this,Rs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/i,h=e/i,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(s){case 0:return[d+u+l,o-f-h-m+c,d+u+p+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+m+l,o-f+u+p+c];case 180:return[d-u-p+l,o-f+h+c,d-u+l,o-f+h+m+c];case 270:return[d-h-m+l,o-f-u-p+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,o]=t,l=r-s,c=o-i;switch(this.rotation){case 0:return[s,e-o,l,c];case 90:return[s,e-i,c,l];case 180:return[r,e-i,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){g(this,fo,!0)}disableEditMode(){g(this,fo,!1)}isInEditMode(){return a(this,fo)}shouldGetKeyboardEvents(){return a(this,ni)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&s>0}rebuild(){b(this,K,_m).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){bt("An editor must be serializable")}static async deserialize(t,e,s){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});i.rotation=t.rotation,g(i,lo,t.accessibilityData);const[r,o]=i.pageDimensions,[l,c,u,h]=i.getRectInCurrentCoords(t.rect,o);return i.x=l/r,i.y=c/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,Zi))==null||t.abort(),g(this,Zi,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Rs)&&(clearTimeout(a(this,Rs)),g(this,Rs,null)),b(this,K,kc).call(this),this.removeEditToolbar(),a(this,Ln)){for(const s of a(this,Ln).values())clearTimeout(s);g(this,Ln,null)}this.parent=null,(e=a(this,po))==null||e.destroy(),g(this,po,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(b(this,K,eb).call(this),a(this,pe).classList.remove("hidden"),Lf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),g(this,ei,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,pe).children;if(!a(this,Jn)){g(this,Jn,Array.from(e));const o=b(this,K,ab).bind(this),l=b(this,K,lb).bind(this),c=this._uiManager._signal;for(const u of a(this,Jn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",b(this,K,cb).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",st._l10nResizer[h])}}const s=a(this,Jn)[0];let i=0;for(const o of e){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Jn).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)a(this,pe).append(a(this,pe).firstChild);else if(r>i)for(let l=0;l<r-i;l++)a(this,pe).firstChild.before(a(this,pe).lastChild);let o=0;for(const l of e){const u=a(this,Jn)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",st._l10nResizer[u])}}b(this,K,Em).call(this,0),g(this,ni,!0),a(this,pe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,ni)&&b(this,K,xm).call(this,a(this,zu),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){b(this,K,kc).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=a(this,Ct))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,i,r;(t=a(this,pe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=a(this,Ct))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,$u)}set isEditing(t){g(this,$u,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){g(this,co,!0);const s=t/e,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Ln)||g(this,Ln,new Map);const{action:s}=t;let i=a(this,Ln).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),a(this,Ln).delete(s),a(this,Ln).size===0&&g(this,Ln,null)},st._telemetryTimeout),a(this,Ln).set(s,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),g(this,sl,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,sl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};lo=new WeakMap,Jn=new WeakMap,Ct=new WeakMap,sl=new WeakMap,Qi=new WeakMap,ju=new WeakMap,co=new WeakMap,pe=new WeakMap,uo=new WeakMap,ei=new WeakMap,Zi=new WeakMap,zu=new WeakMap,ho=new WeakMap,cn=new WeakMap,$u=new WeakMap,fo=new WeakMap,ni=new WeakMap,Rs=new WeakMap,il=new WeakMap,rl=new WeakMap,Ln=new WeakMap,po=new WeakMap,Hu=new WeakMap,Gf=new WeakMap,K=new WeakSet,wm=function([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Bu=new WeakSet,Am=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Od=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},eb=function(){if(a(this,pe))return;g(this,pe,document.createElement("div")),a(this,pe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");a(this,pe).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",b(this,K,nb).bind(this,s),{signal:e}),i.addEventListener("contextmenu",ps,{signal:e}),i.tabIndex=-1}this.div.prepend(a(this,pe))},nb=function(t,e){var h;e.preventDefault();const{isMac:s}=Ue.platform;if(e.button!==0||e.ctrlKey&&s)return;(h=a(this,Ct))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,g(this,uo,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",b(this,K,xm).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",xn,{passive:!1,signal:o}),window.addEventListener("contextmenu",ps,{signal:o}),g(this,ei,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Ct))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,b(this,K,jd).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},bm=function(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()},jd=function(){if(!a(this,ei))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=a(this,ei);g(this,ei,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===s&&c===i||this.addCommands({cmd:b(this,K,bm).bind(this,r,o,l,c),undo:b(this,K,bm).bind(this,t,e,s,i),mustExec:!0})},xm=function(t,e){const[s,i]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=st.MIN_SIZE/s,h=st.MIN_SIZE/i,d=b(this,K,Od).call(this,this.rotation),f=(H,D)=>[d[0]*H+d[2]*D,d[1]*H+d[3]*D],p=b(this,K,Od).call(this,360-this.rotation),m=(H,D)=>[p[0]*H+p[2]*D,p[1]*H+p[3]*D];let v,S,y=!1,w=!1;switch(t){case"topLeft":y=!0,v=(H,D)=>[0,0],S=(H,D)=>[H,D];break;case"topMiddle":v=(H,D)=>[H/2,0],S=(H,D)=>[H/2,D];break;case"topRight":y=!0,v=(H,D)=>[H,0],S=(H,D)=>[0,D];break;case"middleRight":w=!0,v=(H,D)=>[H,D/2],S=(H,D)=>[0,D/2];break;case"bottomRight":y=!0,v=(H,D)=>[H,D],S=(H,D)=>[0,0];break;case"bottomMiddle":v=(H,D)=>[H/2,D],S=(H,D)=>[H/2,0];break;case"bottomLeft":y=!0,v=(H,D)=>[0,D],S=(H,D)=>[H,0];break;case"middleLeft":w=!0,v=(H,D)=>[0,D/2],S=(H,D)=>[H,D/2];break}const x=v(l,c),_=S(l,c);let C=f(..._);const T=st._round(r+C[0]),k=st._round(o+C[1]);let M=1,I=1,O,B;if(e.fromKeyboard)({deltaX:O,deltaY:B}=e);else{const{screenX:H,screenY:D}=e,[N,R]=a(this,uo);[O,B]=this.screenToPageTranslation(H-N,D-R),a(this,uo)[0]=H,a(this,uo)[1]=D}if([O,B]=m(O/s,B/i),y){const H=Math.hypot(l,c);M=I=Math.max(Math.min(Math.hypot(_[0]-x[0]-O,_[1]-x[1]-B)/H,1/l,1/c),u/l,h/c)}else w?M=Math.max(u,Math.min(1,Math.abs(_[0]-x[0]-O)))/l:I=Math.max(h,Math.min(1,Math.abs(_[1]-x[1]-B)))/c;const it=st._round(l*M),ft=st._round(c*I);C=f(...S(it,ft));const at=T-C[0],Lt=k-C[1];a(this,cn)||g(this,cn,[this.x,this.y,this.width,this.height]),this.width=it,this.height=ft,this.x=at,this.y=Lt,this.setDims(s*it,i*ft),this.fixAndSetPosition(),this._onResizing()},sb=function(){var t;g(this,ei,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Ct))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},ib=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=b(this,K,Od).call(this,this.rotation),l=(T,k)=>[o[0]*T+o[2]*k,o[1]*T+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,m=st.MIN_SIZE/c,v=st.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),m/f,v/p);const S=st._round(f*r),y=st._round(p*r);if(S===f&&y===p)return;a(this,cn)||g(this,cn,[h,d,f,p]);const w=l(f/2,p/2),x=st._round(h+w[0]),_=st._round(d+w[1]),C=l(S/2,y/2);this.x=x-C[0],this.y=_-C[1],this.width=S,this.height=y,this.setDims(c*S,u*y),this.fixAndSetPosition(),this._onResizing()},rb=function(){var t;(t=a(this,Ct))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),b(this,K,jd).call(this)},Sm=function(t){const{isMac:e}=Ue.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},ob=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},l=u=>{i.abort(),g(this,Qi,null),g(this,ho,!1),this._uiManager.endDragSession()||b(this,K,Sm).call(this,u),s&&this._onStopDragging()};e&&(g(this,il,t.clientX),g(this,rl,t.clientY),g(this,Qi,t.pointerId),g(this,ju,t.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,Qi)){xn(u);return}const[p,m]=this.screenToPageTranslation(h-a(this,il),d-a(this,rl));g(this,il,h),g(this,rl,d),this._uiManager.dragSelectedEditors(p,m)},o),window.addEventListener("touchmove",xn,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,ju)&&(a(this,po)||u.isPrimary)&&l(u),xn(u)},o));const c=u=>{if(!a(this,Qi)||a(this,Qi)===u.pointerId){l(u);return}xn(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},_m=function(){if(a(this,Zi)||!this.div)return;g(this,Zi,new AbortController);const t=this._uiManager.combinedSignal(a(this,Zi));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},ab=function(t){st._resizerKeyboardManager.exec(this,t)},lb=function(t){var e;a(this,ni)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,pe)&&b(this,K,kc).call(this)},cb=function(t){g(this,zu,a(this,ni)?t:"")},Em=function(t){if(a(this,Jn))for(const e of a(this,Jn))e.tabIndex=t},kc=function(){g(this,ni,!1),b(this,K,Em).call(this,-1),b(this,K,jd).call(this)},A(st,Bu),Y(st,"_l10n",null),Y(st,"_l10nResizer",null),Y(st,"_borderLineWidth",-1),Y(st,"_colorManager",new hm),Y(st,"_zIndex",1),Y(st,"_telemetryTimeout",1e3);let Ft=st;class sC extends Ft{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Xv=3285377520,Pn=4294901760,vs=65535;class ub{constructor(t){this.h1=t?t&4294967295:Xv,this.h2=t?t&4294967295:Xv}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let v=0,S=t.length;v<S;v++){const y=t.charCodeAt(v);y<=255?e[s++]=y:(e[s++]=y>>>8,e[s++]=y&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(e.buffer,0,i);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&vs,m=f&vs;for(let v=0;v<i;v++)v&1?(l=o[v],l=l*d&Pn|l*p&vs,l=l<<15|l>>>17,l=l*f&Pn|l*m&vs,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[v],c=c*d&Pn|c*p&vs,c=c<<15|c>>>17,c=c*f&Pn|c*m&vs,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=e[i*4+2]<<16;case 2:l^=e[i*4+1]<<8;case 1:l^=e[i*4],l=l*d&Pn|l*p&vs,l=l<<15|l>>>17,l=l*f&Pn|l*m&vs,i&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Pn|t*36045&vs,e=e*4283543511&Pn|((e<<16|t>>>16)*2950163797&Pn)>>>16,t^=e>>>1,t=t*444984403&Pn|t*60499&vs,e=e*3301882366&Pn|((e<<16|t>>>16)*3120437893&Pn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Cm=Object.freeze({map:null,hash:"",transfer:void 0});var go,mo,oe,Vf,hb;class wy{constructor(){A(this,Vf);A(this,go,!1);A(this,mo,null);A(this,oe,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=a(this,oe).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return a(this,oe).get(t)}remove(t){if(a(this,oe).delete(t),a(this,oe).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,oe).values())if(e instanceof Ft)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=a(this,oe).get(t);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(i=!0,s[r]=o);else i=!0,a(this,oe).set(t,e);i&&b(this,Vf,hb).call(this),e instanceof Ft&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,oe).has(t)}getAll(){return a(this,oe).size>0?fy(a(this,oe)):null}setAll(t){for(const[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return a(this,oe).size}resetModified(){a(this,go)&&(g(this,go,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new db(this)}get serializable(){if(a(this,oe).size===0)return Cm;const t=new Map,e=new ub,s=[],i=Object.create(null);let r=!1;for(const[o,l]of a(this,oe)){const c=l instanceof Ft?l.serialize(!1,i):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:Cm}get editorStats(){let t=null;const e=new Map;for(const s of a(this,oe).values()){if(!(s instanceof Ft))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(i)){if(l==="type")continue;let u=o.get(l);u||(u=new Map,o.set(l,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[s,i]of e)t[s]=i.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){g(this,mo,null)}get modifiedIds(){if(a(this,mo))return a(this,mo);const t=[];for(const e of a(this,oe).values())!(e instanceof Ft)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return g(this,mo,{ids:new Set(t),hash:t.join(",")})}}go=new WeakMap,mo=new WeakMap,oe=new WeakMap,Vf=new WeakSet,hb=function(){a(this,go)||(g(this,go,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Uu;class db extends wy{constructor(e){super();A(this,Uu);const{map:s,hash:i,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);g(this,Uu,{map:o,hash:i,transfer:r})}get print(){bt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Uu)}get modifiedIds(){return ot(this,"modifiedIds",{ids:new Set,hash:""})}}Uu=new WeakMap;var ol;class iC{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,ol,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,ol).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||a(this,ol).has(t.loadedName))){if(qt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=t,o=new FontFace(s,i,r);this.addNativeFontFace(o);try{await o.load(),a(this,ol).add(s),e==null||e(t)}catch{nt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw nt(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ot(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Ne||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ot(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(qt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ot(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(_,C){return _.charCodeAt(C)<<24|_.charCodeAt(C+1)<<16|_.charCodeAt(C+2)<<8|_.charCodeAt(C+3)&255}function i(_,C,T,k){const M=_.substring(0,C),I=_.substring(C+T);return M+k+I}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(_,C){if(++u>30){nt("Load test font never loaded."),C();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,_,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,v=1482184792;let S=s(f,m);for(r=0,o=d.length-3;r<o;r+=4)S=S-v+s(d,r)|0;r<d.length&&(S=S-v+s(d+"XXX",r)|0),f=i(f,m,4,UE(S));const y=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(w);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const _ of[t.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=_,x.append(C)}this._document.body.append(x),h(d,()=>{x.remove(),e.complete()})}}ol=new WeakMap;class rC{constructor(t,{disableFontFace:e=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${YE(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(o){nt(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const fd={DATA:1,ERROR:2},Wt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function qv(){}function Ye(n){if(n instanceof Rr||n instanceof rm||n instanceof pu||n instanceof Gv||n instanceof Mf||n instanceof sg)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Rr(n.message);case"InvalidPDFException":return new rm(n.message);case"MissingPDFException":return new pu(n.message);case"PasswordException":return new Gv(n.message,n.code);case"UnexpectedResponseException":return new Mf(n.message,n.status);case"UnknownErrorException":return new sg(n.message,n.details)}return new sg(n.message,n.toString())}var al,Un,fb,pb,gb,zd;class Tc{constructor(t,e,s){A(this,Un);A(this,al,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",b(this,Un,fb).bind(this),{signal:a(this,al).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:Wt.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{qt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Wt.CANCEL,streamId:r,reason:Ye(u)}),h.promise}},s)}destroy(){var t;(t=a(this,al))==null||t.abort(),g(this,al,null)}}al=new WeakMap,Un=new WeakSet,fb=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){b(this,Un,gb).call(this,t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===fd.DATA)i.resolve(t.data);else if(t.callback===fd.ERROR)i.reject(Ye(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:fd.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:fd.ERROR,callbackId:t.callbackId,reason:Ye(o)})});return}if(t.streamId){b(this,Un,pb).call(this,t);return}e(t.data)},pb=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Wt.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Wt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){qt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Wt.ERROR,streamId:e,reason:Ye(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Wt.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Wt.START_COMPLETE,streamId:e,reason:Ye(u)})})},gb=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Wt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Ye(t.reason));break;case Wt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Ye(t.reason));break;case Wt.PULL:if(!l){r.postMessage({sourceName:s,targetName:i,stream:Wt.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||qv).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Wt.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Wt.PULL_COMPLETE,streamId:e,reason:Ye(u)})});break;case Wt.ENQUEUE:if(qt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Wt.CLOSE:if(qt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),b(this,Un,zd).call(this,o,e);break;case Wt.ERROR:qt(o,"error should have stream controller"),o.controller.error(Ye(t.reason)),b(this,Un,zd).call(this,o,e);break;case Wt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Ye(t.reason)),b(this,Un,zd).call(this,o,e);break;case Wt.CANCEL:if(!l)break;const c=Ye(t.reason);Promise.try(l.onCancel||qv,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Wt.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Wt.CANCEL_COMPLETE,streamId:e,reason:Ye(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},zd=async function(t,e){var s,i,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Gu;class mb{constructor({enableHWA:t=!1}){A(this,Gu,!1);g(this,Gu,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!a(this,Gu)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){bt("Abstract method `_createCanvas` called.")}}Gu=new WeakMap;class oC extends mb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class yb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class vb extends yb{async _fetch(t){const e=await Ep(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):_p(e)}}class wb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}var yo,ll,si,ii,Te,vo,wo,U,Ee,Pc,ya,$d,va,Ab,km,wa,Rc,Mc,Tm,Lc;class aC extends wb{constructor({docId:e,ownerDocument:s=globalThis.document}){super();A(this,U);A(this,yo);A(this,ll);A(this,si);A(this,ii);A(this,Te);A(this,vo);A(this,wo,0);g(this,ii,e),g(this,Te,s)}addFilter(e){if(!e)return"none";let s=a(this,U,Ee).get(e);if(s)return s;const[i,r,o]=b(this,U,$d).call(this,e),l=e.length===1?i:`${i}${r}${o}`;if(s=a(this,U,Ee).get(l),s)return a(this,U,Ee).set(e,s),s;const c=`g_${a(this,ii)}_transfer_map_${De(this,wo)._++}`,u=b(this,U,va).call(this,c);a(this,U,Ee).set(e,u),a(this,U,Ee).set(l,u);const h=b(this,U,wa).call(this,c);return b(this,U,Mc).call(this,i,r,o,h),u}addHCMFilter(e,s){var m;const i=`${e}-${s}`,r="base";let o=a(this,U,Pc).get(r);if((o==null?void 0:o.key)===i||(o?((m=o.filter)==null||m.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},a(this,U,Pc).set(r,o)),!e||!s))return o.url;const l=b(this,U,Lc).call(this,e);e=q.makeHexColor(...l);const c=b(this,U,Lc).call(this,s);if(s=q.makeHexColor(...c),a(this,U,ya).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const u=new Array(256);for(let v=0;v<=255;v++){const S=v/255;u[v]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,ii)}_hcm_filter`,f=o.filter=b(this,U,wa).call(this,d);b(this,U,Mc).call(this,h,h,h,f),b(this,U,km).call(this,f);const p=(v,S)=>{const y=l[v]/255,w=c[v]/255,x=new Array(S+1);for(let _=0;_<=S;_++)x[_]=y+_/S*(w-y);return x.join(",")};return b(this,U,Mc).call(this,p(0,5),p(1,5),p(2,5),f),o.url=b(this,U,va).call(this,d),o.url}addAlphaFilter(e){let s=a(this,U,Ee).get(e);if(s)return s;const[i]=b(this,U,$d).call(this,[e]),r=`alpha_${i}`;if(s=a(this,U,Ee).get(r),s)return a(this,U,Ee).set(e,s),s;const o=`g_${a(this,ii)}_alpha_map_${De(this,wo)._++}`,l=b(this,U,va).call(this,o);a(this,U,Ee).set(e,l),a(this,U,Ee).set(r,l);const c=b(this,U,wa).call(this,o);return b(this,U,Tm).call(this,i,c),l}addLuminosityFilter(e){let s=a(this,U,Ee).get(e||"luminosity");if(s)return s;let i,r;if(e?([i]=b(this,U,$d).call(this,[e]),r=`luminosity_${i}`):r="luminosity",s=a(this,U,Ee).get(r),s)return a(this,U,Ee).set(e,s),s;const o=`g_${a(this,ii)}_luminosity_map_${De(this,wo)._++}`,l=b(this,U,va).call(this,o);a(this,U,Ee).set(e,l),a(this,U,Ee).set(r,l);const c=b(this,U,wa).call(this,o);return b(this,U,Ab).call(this,c),e&&b(this,U,Tm).call(this,i,c),l}addHighlightHCMFilter(e,s,i,r,o){var w;const l=`${s}-${i}-${r}-${o}`;let c=a(this,U,Pc).get(e);if((c==null?void 0:c.key)===l||(c?((w=c.filter)==null||w.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,U,Pc).set(e,c)),!s||!i))return c.url;const[u,h]=[s,i].map(b(this,U,Lc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(b(this,U,Lc).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),a(this,U,ya).style.color="";const v=(x,_,C)=>{const T=new Array(256),k=(f-d)/C,M=x/255,I=(_-x)/(255*C);let O=0;for(let B=0;B<=C;B++){const it=Math.round(d+B*k),ft=M+B*I;for(let at=O;at<=it;at++)T[at]=ft;O=it+1}for(let B=O;B<256;B++)T[B]=T[O-1];return T.join(",")},S=`g_${a(this,ii)}_hcm_${e}_filter`,y=c.filter=b(this,U,wa).call(this,S);return b(this,U,km).call(this,y),b(this,U,Mc).call(this,v(p[0],m[0],5),v(p[1],m[1],5),v(p[2],m[2],5),y),c.url=b(this,U,va).call(this,S),c.url}destroy(e=!1){var s,i,r,o;e&&((s=a(this,vo))!=null&&s.size)||((i=a(this,si))==null||i.parentNode.parentNode.remove(),g(this,si,null),(r=a(this,ll))==null||r.clear(),g(this,ll,null),(o=a(this,vo))==null||o.clear(),g(this,vo,null),g(this,wo,0))}}yo=new WeakMap,ll=new WeakMap,si=new WeakMap,ii=new WeakMap,Te=new WeakMap,vo=new WeakMap,wo=new WeakMap,U=new WeakSet,Ee=function(){return a(this,ll)||g(this,ll,new Map)},Pc=function(){return a(this,vo)||g(this,vo,new Map)},ya=function(){if(!a(this,si)){const e=a(this,Te).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=a(this,Te).createElementNS(Us,"svg");i.setAttribute("width",0),i.setAttribute("height",0),g(this,si,a(this,Te).createElementNS(Us,"defs")),e.append(i),i.append(a(this,si)),a(this,Te).body.append(e)}return a(this,si)},$d=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,l[u]=i[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},va=function(e){if(a(this,yo)===void 0){g(this,yo,"");const s=a(this,Te).URL;s!==a(this,Te).baseURI&&(Cp(s)?nt('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,yo,s.split("#",1)[0]))}return`url(${a(this,yo)}#${e})`},Ab=function(e){const s=a(this,Te).createElementNS(Us,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},km=function(e){const s=a(this,Te).createElementNS(Us,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},wa=function(e){const s=a(this,Te).createElementNS(Us,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),a(this,U,ya).append(s),s},Rc=function(e,s,i){const r=a(this,Te).createElementNS(Us,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},Mc=function(e,s,i,r){const o=a(this,Te).createElementNS(Us,"feComponentTransfer");r.append(o),b(this,U,Rc).call(this,o,"feFuncR",e),b(this,U,Rc).call(this,o,"feFuncG",s),b(this,U,Rc).call(this,o,"feFuncB",i)},Tm=function(e,s){const i=a(this,Te).createElementNS(Us,"feComponentTransfer");s.append(i),b(this,U,Rc).call(this,i,"feFuncA",e)},Lc=function(e){return a(this,U,ya).style.color=e,vy(getComputedStyle(a(this,U,ya)).getPropertyValue("color"))};class bb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class xb extends bb{async _fetch(t){const e=await Ep(t,"arraybuffer");return new Uint8Array(e)}}Ne&&nt("Please use the `legacy` build in Node.js environments.");async function Sb(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class lC extends wb{}class cC extends mb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class uC extends yb{async _fetch(t){return Sb(t)}}class hC extends bb{async _fetch(t){return Sb(t)}}const Me={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Pm(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),n.clip(i)}class Ay{getPattern(){bt("Abstract method `getPattern` called.")}}class dC extends Ay{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===Me.STROKE||i===Me.FILL){const o=e.current.getClippedPathBoundingBox(i,Pt(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=q.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Pm(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else Pm(t,this._bbox),r=this._createGradient(t);return r}}function og(n,t,e,s,i,r,o,l){const c=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=o,o=l,l=f),c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,m=(c[e+1]+t.offsetY)*t.scaleY,v=(c[s]+t.offsetX)*t.scaleX,S=(c[s+1]+t.offsetY)*t.scaleY,y=(c[i]+t.offsetX)*t.scaleX,w=(c[i+1]+t.offsetY)*t.scaleY;if(m>=w)return;const x=u[r],_=u[r+1],C=u[r+2],T=u[o],k=u[o+1],M=u[o+2],I=u[l],O=u[l+1],B=u[l+2],it=Math.round(m),ft=Math.round(w);let at,Lt,H,D,N,R,P,L;for(let j=it;j<=ft;j++){if(j<S){const J=j<m?0:(m-j)/(m-S);at=p-(p-v)*J,Lt=x-(x-T)*J,H=_-(_-k)*J,D=C-(C-M)*J}else{let J;j>w?J=1:S===w?J=0:J=(S-j)/(S-w),at=v-(v-y)*J,Lt=T-(T-I)*J,H=k-(k-O)*J,D=M-(M-B)*J}let $;j<m?$=0:j>w?$=1:$=(m-j)/(m-w),N=p-(p-y)*$,R=x-(x-I)*$,P=_-(_-O)*$,L=C-(C-B)*$;const Q=Math.round(Math.min(at,N)),xt=Math.round(Math.max(at,N));let lt=d*j+Q*4;for(let J=Q;J<=xt;J++)$=(at-J)/(at-N),$<0?$=0:$>1&&($=1),h[lt++]=Lt-(Lt-R)*$|0,h[lt++]=H-(H-P)*$|0,h[lt++]=D-(D-L)*$|0,h[lt++]=255}}function fC(n,t,e){const s=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(s.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)og(n,e,s[h],s[h+1],s[h+l],i[h],i[h+1],i[h+l]),og(n,e,s[h+l+1],s[h+1],s[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)og(n,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class pC extends Ay{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,m=h/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/m},S=d+2*2,y=f+2*2,w=s.getCanvas("mesh",S,y),x=w.context,_=x.createImageData(d,f);if(e){const T=_.data;for(let k=0,M=T.length;k<M;k+=4)T[k]=e[0],T[k+1]=e[1],T[k+2]=e[2],T[k+3]=255}for(const T of this._figures)fC(_,T,v);return x.putImageData(_,2,2),{canvas:w.canvas,offsetX:l-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(t,e,s,i){Pm(t,this._bbox);let r;if(i===Me.SHADING)r=q.singularValueDecompose2dScale(Pt(t));else if(r=q.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=q.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const o=this._createMeshCanvas(r,i===Me.SHADING?null:this._background,e.cachedCanvases);return i!==Me.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class gC extends Ay{getPattern(){return"hotpink"}}function mC(n){switch(n[0]){case"RadialAxial":return new dC(n);case"Mesh":return new pC(n);case"Dummy":return new gC}throw new Error(`Unknown IR type: ${n[0]}`)}const Yv={COLORED:1,UNCOLORED:2},Wf=class Wf{constructor(t,e,s,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Sp("TilingType: "+r);const h=e[0],d=e[1],f=e[2],p=e[3],m=f-h,v=p-d,S=q.singularValueDecompose2dScale(this.matrix),y=q.singularValueDecompose2dScale(this.baseTransform),w=S[0]*y[0],x=S[1]*y[1];let _=m,C=v,T=!1,k=!1;const M=Math.ceil(c*w),I=Math.ceil(u*x),O=Math.ceil(m*w),B=Math.ceil(v*x);M>=O?_=c:T=!0,I>=B?C=u:k=!0;const it=this.getSizeAndScale(_,this.ctx.canvas.width,w),ft=this.getSizeAndScale(C,this.ctx.canvas.height,x),at=t.cachedCanvases.getCanvas("pattern",it.size,ft.size),Lt=at.context,H=l.createCanvasGraphics(Lt);if(H.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(H,i,o),Lt.translate(-it.scale*h,-ft.scale*d),H.transform(it.scale,0,0,ft.scale,0,0),Lt.save(),this.clipBbox(H,h,d,f,p),H.baseTransform=Pt(H.ctx),H.executeOperatorList(s),H.endDrawing(),Lt.restore(),T||k){const D=at.canvas;T&&(_=c),k&&(C=u);const N=this.getSizeAndScale(_,this.ctx.canvas.width,w),R=this.getSizeAndScale(C,this.ctx.canvas.height,x),P=N.size,L=R.size,j=t.cachedCanvases.getCanvas("pattern-workaround",P,L),$=j.context,Q=T?Math.floor(m/c):0,xt=k?Math.floor(v/u):0;for(let lt=0;lt<=Q;lt++)for(let J=0;J<=xt;J++)$.drawImage(D,P*lt,L*J,P,L,0,0,P,L);return{canvas:j.canvas,scaleX:N.scale,scaleY:R.scale,offsetX:h,offsetY:d}}return{canvas:at.canvas,scaleX:it.scale,scaleY:ft.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,s){const i=Math.max(Wf.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const o=i-e,l=r-s;t.ctx.rect(e,s,o,l),t.current.updateRectMinMax(Pt(t.ctx),[e,s,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case Yv.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case Yv.UNCOLORED:const l=q.makeHexColor(s[0],s[1],s[2]);i.fillStyle=l,i.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new BE(`Unsupported paint type: ${e}`)}}getPattern(t,e,s,i){let r=s;i!==Me.SHADING&&(r=q.transform(r,e.baseTransform),this.matrix&&(r=q.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};Y(Wf,"MAX_PATTERN_SIZE",3e3);let Rm=Wf;function yC({src:n,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=Ue.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=s>>3,d=s&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let m=0;m<i;m++){for(const S=t+h;t<S;t++){const y=t<f?n[t]:255;e[p++]=y&128?u:c,e[p++]=y&64?u:c,e[p++]=y&32?u:c,e[p++]=y&16?u:c,e[p++]=y&8?u:c,e[p++]=y&4?u:c,e[p++]=y&2?u:c,e[p++]=y&1?u:c}if(d===0)continue;const v=t<f?n[t++]:255;for(let S=0;S<d;S++)e[p++]=v&1<<7-S?u:c}return{srcPos:t,destPos:p}}const Kv=16,Qv=100,vC=15,Zv=10,Jv=1e3,tn=16;function wC(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(s,i){t.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){t.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,o,l,c){t.transform(s,i,r,o,l,c),this.__originalTransform(s,i,r,o,l,c)},n.setTransform=function(s,i,r,o,l,c){t.setTransform(s,i,r,o,l,c),this.__originalSetTransform(s,i,r,o,l,c)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){t.rotate(s),this.__originalRotate(s)},n.clip=function(s){t.clip(s),this.__originalClip(s)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,i,r,o,l){t.bezierCurveTo(e,s,i,r,o,l),this.__originalBezierCurveTo(e,s,i,r,o,l)},n.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class AC{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function pd(n,t,e,s,i,r,o,l,c,u){const[h,d,f,p,m,v]=Pt(n);if(d===0&&f===0){const w=o*h+m,x=Math.round(w),_=l*p+v,C=Math.round(_),T=(o+c)*h+m,k=Math.abs(Math.round(T)-x)||1,M=(l+u)*p+v,I=Math.abs(Math.round(M)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),x,C),n.drawImage(t,e,s,i,r,0,0,k,I),n.setTransform(h,d,f,p,m,v),[k,I]}if(h===0&&p===0){const w=l*f+m,x=Math.round(w),_=o*d+v,C=Math.round(_),T=(l+u)*f+m,k=Math.abs(Math.round(T)-x)||1,M=(o+c)*d+v,I=Math.abs(Math.round(M)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,x,C),n.drawImage(t,e,s,i,r,0,0,I,k),n.setTransform(h,d,f,p,m,v),[I,k]}n.drawImage(t,e,s,i,r,o,l,c,u);const S=Math.hypot(h,d),y=Math.hypot(f,p);return[S*c,y*u]}function bC(n){const{width:t,height:e}=n;if(t>Jv||e>Jv)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),l,c,u;const h=t+7&-8;let d=new Uint8Array(h*e),f=0;for(const y of n.data){let w=128;for(;w>0;)d[f++]=y&w?0:255,w>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),l=1;l<e;l++){f=l*h,u=l*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let y=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<t;c++)y=(y>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[y]&&(o[u+c]=i[y],++p),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++p),p>s)return null}for(f=h*(e-1),u=l*r,d[f]!==0&&(o[u]=8,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+c]=4,++p),p>s)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),v=new Path2D;for(l=0;p&&l<=e;l++){let y=l*r;const w=y+t;for(;y<w&&!o[y];)y++;if(y===w)continue;v.moveTo(y%r,l);const x=y;let _=o[y];do{const C=m[_];do y+=C;while(!o[y]);const T=o[y];T!==5&&T!==10?(_=T,o[y]=0):(_=T&51*_>>4,o[y]&=_>>2|_<<2),v.lineTo(y%r,y/r|0),o[y]||--p}while(x!==y);--l}return d=null,o=null,function(y){y.save(),y.scale(1/t,-1/e),y.translate(0,-e),y.fill(v),y.beginPath(),y.restore()}}class tw{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=NA,this.textMatrixScale=1,this.fontMatrix=im,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=_e.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,s){[e,s]=q.applyTransform([e,s],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=q.applyTransform(e,t),i=q.applyTransform(e.slice(2),t),r=q.applyTransform([e[0],e[3]],t),o=q.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],o[1])}updateScalingPathMinMax(t,e){q.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,i,r,o,l,c,u,h){const d=q.bezierBoundingBox(e,s,i,r,o,l,c,u,h);h||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Me.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===Me.STROKE){e||bt("Stroke bounding box must include transform.");const i=q.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Me.FILL,e=null){return q.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ew(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%tn,r=(e-i)/tn,o=i===0?r:r+1,l=n.createImageData(s,tn);let c=0,u;const h=t.data,d=l.data;let f,p,m,v;if(t.kind===Rd.GRAYSCALE_1BPP){const S=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),w=y.length,x=s+7>>3,_=4294967295,C=Ue.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?tn:i,u=0,p=0;p<m;p++){const T=S-c;let k=0;const M=T>x?s:T*8-7,I=M&-8;let O=0,B=0;for(;k<I;k+=8)B=h[c++],y[u++]=B&128?_:C,y[u++]=B&64?_:C,y[u++]=B&32?_:C,y[u++]=B&16?_:C,y[u++]=B&8?_:C,y[u++]=B&4?_:C,y[u++]=B&2?_:C,y[u++]=B&1?_:C;for(;k<M;k++)O===0&&(B=h[c++],O=128),y[u++]=B&O?_:C,O>>=1}for(;u<w;)y[u++]=0;n.putImageData(l,0,f*tn)}}else if(t.kind===Rd.RGBA_32BPP){for(p=0,v=s*tn*4,f=0;f<r;f++)d.set(h.subarray(c,c+v)),c+=v,n.putImageData(l,0,p),p+=tn;f<o&&(v=s*i*4,d.set(h.subarray(c,c+v)),n.putImageData(l,0,p))}else if(t.kind===Rd.RGB_24BPP)for(m=tn,v=s*m,f=0;f<o;f++){for(f>=r&&(m=i,v=s*m),u=0,p=v;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*tn)}else throw new Error(`bad image kind: ${t.kind}`)}function nw(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%tn,r=(e-i)/tn,o=i===0?r:r+1,l=n.createImageData(s,tn);let c=0;const u=t.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?tn:i;({srcPos:c}=yC({src:u,srcPos:c,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(l,0,d*tn)}}function yc(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function gd(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Ne){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function sw(n,t){if(t)return!0;const e=q.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Mr.PDF_TO_CSS_UNITS);return e[0]<=s&&e[1]<=s}const xC=["butt","round","square"],SC=["miter","round","bevel"],_C={},iw={};var gs,Mm,Lm,Nm;const ky=class ky{constructor(t,e,s,i,r,{optionalContentConfig:o,markedContentStack:l=null},c,u){A(this,gs);this.ctx=t,this.current=new tw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new AC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Pt(this.compositeCtx))}this.ctx.save(),gd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Pt(this.ctx)}executeOperatorList(t,e,s,i){const r=t.argsArray,o=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const u=c-l>Zv&&typeof s=="function",h=u?Date.now()+vC:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,s),l;if(m=o[l],m!==Yn.dependency)this[m].apply(this,r[l]);else for(const v of r[l]){const S=v.startsWith("g_")?f:p;if(!S.has(v))return S.get(v,s),l}if(l++,l===c)return l;if(u&&++d>Zv){if(Date.now()>h)return s(),l;d=0}}}endDrawing(){b(this,gs,Mm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),b(this,gs,Lm).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=s,c=i,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,l,c,0,0,f,p),t=h.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:i}=t,r=this.current.fillColor,o=this.current.patternFill,l=Pt(e);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const M=t.bitmap||t.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(M),c||(c=new Map,this._cachedBitmapsMap.set(M,c));const I=c.get(u);if(I&&!o){const O=Math.round(Math.min(l[0],l[2])+l[4]),B=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:I,offsetX:O,offsetY:B}}h=I}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),nw(d.context,t));let f=q.transform(l,[1/s,0,0,-1/i,0,0]);f=q.transform(f,[1,0,0,1,0,-i]);const[p,m,v,S]=q.getAxialAlignedBoundingBox([0,0,s,i],f),y=Math.round(v-p)||1,w=Math.round(S-m)||1,x=this.cachedCanvases.getCanvas("fillCanvas",y,w),_=x.context,C=p,T=m;_.translate(-C,-T),_.transform(...f),h||(h=this._scaleImage(d.canvas,ys(_)),h=h.img,c&&o&&c.set(u,h)),_.imageSmoothingEnabled=sw(Pt(_),t.interpolate),pd(_,h,0,0,h.width,h.height,0,0,s,i),_.globalCompositeOperation="source-in";const k=q.transform(ys(_),[1,0,0,1,-C,-T]);return _.fillStyle=o?r.getPattern(e,this,k,Me.FILL):r,_.fillRect(0,0,s,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),{canvas:x.canvas,offsetX:Math.round(C),offsetY:Math.round(T)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=xC[t]}setLineJoin(t){this.ctx.lineJoin=SC[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Pt(this.suspendedCtx)),yc(this.suspendedCtx,r),wC(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),yc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],o=i[1],l=i[2]-r,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,s,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,o,l,c,u,h,d){let f=t.canvas,p=c-h,m=u-d;if(o){const S=q.makeHexColor(...o);if(p<0||m<0||p+s>f.width||m+i>f.height){const y=this.cachedCanvases.getCanvas("maskExtension",s,i),w=y.context;w.drawImage(f,-p,-m),w.globalCompositeOperation="destination-atop",w.fillStyle=S,w.fillRect(0,0,s,i),w.globalCompositeOperation="source-over",f=y.canvas,p=m=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,m,s,i),t.clip(y),t.globalCompositeOperation="destination-atop",t.fillStyle=S,t.fillRect(p,m,s,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,u,s,i),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(f,p,m,s,i,c,u,s,i),e.restore()}save(){this.inSMaskMode?(yc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),yc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,s,i,r,o){this.ctx.transform(t,e,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const i=this.ctx,r=this.current;let o=r.x,l=r.y,c,u;const h=Pt(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?s.slice(0):null;for(let p=0,m=0,v=t.length;p<v;p++)switch(t[p]|0){case Yn.rectangle:o=e[m++],l=e[m++];const S=e[m++],y=e[m++],w=o+S,x=l+y;i.moveTo(o,l),S===0||y===0?i.lineTo(w,x):(i.lineTo(w,l),i.lineTo(w,x),i.lineTo(o,x)),d||r.updateRectMinMax(h,[o,l,w,x]),i.closePath();break;case Yn.moveTo:o=e[m++],l=e[m++],i.moveTo(o,l),d||r.updatePathMinMax(h,o,l);break;case Yn.lineTo:o=e[m++],l=e[m++],i.lineTo(o,l),d||r.updatePathMinMax(h,o,l);break;case Yn.curveTo:c=o,u=l,o=e[m+4],l=e[m+5],i.bezierCurveTo(e[m],e[m+1],e[m+2],e[m+3],o,l),r.updateCurvePathMinMax(h,c,u,e[m],e[m+1],e[m+2],e[m+3],o,l,f),m+=6;break;case Yn.curveTo2:c=o,u=l,i.bezierCurveTo(o,l,e[m],e[m+1],e[m+2],e[m+3]),r.updateCurvePathMinMax(h,c,u,o,l,e[m],e[m+1],e[m+2],e[m+3],f),o=e[m+2],l=e[m+3],m+=4;break;case Yn.curveTo3:c=o,u=l,o=e[m+2],l=e[m+3],i.bezierCurveTo(e[m],e[m+1],o,l,o,l),r.updateCurvePathMinMax(h,c,u,e[m],e[m+1],o,l,o,l,f),m+=4;break;case Yn.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(e.save(),e.strokeStyle=s.getPattern(e,this,ys(e),Me.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=s.getPattern(e,this,ys(e),Me.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_C}eoClip(){this.pendingClip=iw}beginText(){this.current.textMatrix=NA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const s=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:u}of t)s.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(o,l).scale(c,-c));e.clip(s),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||im,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&nt("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((h=s.systemFontInfo)==null?void 0:h.css)||`"${r}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let u=e;e<Kv?u=Kv:e>Qv&&(u=Qv),this.current.fontSizeScale=e/u,this.ctx.font=`${c} ${l} ${u}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,i,r,o){this.current.textMatrix=[t,e,s,i,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,i,r){const o=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=u&_e.FILL_STROKE_MASK,f=!!(u&_e.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,m=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||f||p||m)&&(v=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||p||m){if(o.save(),o.translate(e,s),o.scale(h,-h),d===_e.FILL||d===_e.FILL_STROKE)if(i){const S=o.getTransform();o.setTransform(...i),o.fill(b(this,gs,Nm).call(this,v,S,i))}else o.fill(v);if(d===_e.STROKE||d===_e.FILL_STROKE)if(r){const S=o.getTransform();o.setTransform(...r),o.stroke(b(this,gs,Nm).call(this,v,S,r))}else o.lineWidth/=h,o.stroke(v);o.restore()}else(d===_e.FILL||d===_e.FILL_STROKE)&&o.fillText(t,e,s),(d===_e.STROKE||d===_e.FILL_STROKE)&&o.strokeText(t,e,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pt(o),x:e,y:s,fontSize:h,path:v})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return ot(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=s.vertical,p=f?1:-1,m=s.defaultVMetrics,v=i*e.fontMatrix[0],S=e.textRenderingMode===_e.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let y,w;if(e.patternFill){r.save();const k=e.fillColor.getPattern(r,this,ys(r),Me.FILL);y=Pt(r),r.restore(),r.fillStyle=k}if(e.patternStroke){r.save();const k=e.strokeColor.getPattern(r,this,ys(r),Me.STROKE);w=Pt(r),r.restore(),r.strokeStyle=k}let x=e.lineWidth;const _=e.textMatrixScale;if(_===0||x===0){const k=e.textRenderingMode&_e.FILL_STROKE_MASK;(k===_e.STROKE||k===_e.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=_;if(o!==1&&(r.scale(o,o),x/=o),r.lineWidth=x,s.isInvalidPDFjsFont){const k=[];let M=0;for(const I of t)k.push(I.unicode),M+=I.width;r.fillText(k.join(""),0,0),e.x+=M*v*h,r.restore(),this.compose();return}let C=0,T;for(T=0;T<d;++T){const k=t[T];if(typeof k=="number"){C+=p*k*i/1e3;continue}let M=!1;const I=(k.isSpace?c:0)+l,O=k.fontChar,B=k.accent;let it,ft,at=k.width;if(f){const H=k.vmetric||m,D=-(k.vmetric?H[1]:at*.5)*v,N=H[2]*v;at=H?-H[0]:at,it=D/o,ft=(C+N)/o}else it=C/o,ft=0;if(s.remeasure&&at>0){const H=r.measureText(O).width*1e3/i*o;if(at<H&&this.isFontSubpixelAAEnabled){const D=at/H;M=!0,r.save(),r.scale(D,1),it/=D}else at!==H&&(it+=(at-H)/2e3*i/o)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(S&&!B)r.fillText(O,it,ft);else if(this.paintChar(O,it,ft,y,w),B){const H=it+i*B.offset.x/o,D=ft-i*B.offset.y/o;this.paintChar(B.fontChar,H,D,y,w)}}const Lt=f?at*v-I*u:at*v+I*u;C+=Lt,M&&r.restore()}f?e.y-=C:e.x+=C*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,l=i.vertical?1:-1,c=s.charSpacing,u=s.wordSpacing,h=s.textHScale*o,d=s.fontMatrix||im,f=t.length,p=s.textRenderingMode===_e.INVISIBLE;let m,v,S,y;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...s.textMatrix),e.translate(s.x,s.y),e.scale(h,o),m=0;m<f;++m){if(v=t[m],typeof v=="number"){y=l*v*r/1e3,this.ctx.translate(y,0),s.x+=y*h;continue}const w=(v.isSpace?u:0)+c,x=i.charProcOperatorList[v.operatorListId];if(!x){nt(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(x),this.restore()),S=q.applyTransform([v.width,0],d)[0]*r+w,e.translate(S,0),s.x+=S*h}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,i,r,o){this.ctx.rect(s,i,r-s,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=t[1],i=this.baseTransform||Pt(this.ctx),r={createCanvasGraphics:o=>new ky(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Rm(t,s,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=q.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=q.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=mC(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,ys(e),Me.SHADING);const i=ys(e);if(i){const{width:r,height:o}=e.canvas,[l,c,u,h]=q.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(l,c,u-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){bt("Should not call beginInlineImage")}beginImageData(){bt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Pt(this.ctx),e)){const s=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],s,i),this.current.updateRectMinMax(Pt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Sp("TODO: Support non-isolated groups."),t.knockout&&nt("Knockout groups not supported.");const s=Pt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=q.getAxialAlignedBoundingBox(t.bbox,Pt(e));const r=[0,0,e.canvas.width,e.canvas.height];i=q.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),u=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-l),f.transform(...s),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),yc(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Pt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=q.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,i,r){if(b(this,gs,Mm).call(this),gd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l;const[c,u]=q.singularValueDecompose2dScale(Pt(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(l*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,l*u),gd(this.ctx)}else gd(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new tw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),b(this,gs,Lm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=bC(t)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,i=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Pt(l);l.transform(e,s,i,r,0,0);const u=this._createMaskCanvas(t);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=q.transform(c,[e,s,i,r,o[h],o[h+1]]),[p,m]=q.applyTransform([0,0],f);l.drawImage(u.canvas,p,m)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:o,width:l,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=h.context;d.save();const f=this.getObject(o,r);nw(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,ys(e),Me.FILL):s,d.fillRect(0,0,l,c),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),pd(e,h.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){nt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){nt("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[e,0,0,s,i[u],i[u+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,i=this.ctx;if(this.save(),!Ne){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/e,-1/s);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,s).context;ew(c,t),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,ys(i));i.imageSmoothingEnabled=sw(Pt(i),t.interpolate),pd(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;ew(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),pd(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===iw?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Pt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let o,l;if(s===0&&i===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=l=1/c;else{const h=c*t;o=l=h<1?1/h:1}else if(t===0)o=1/c,l=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-s*i),u=Math.hypot(e,s),h=Math.hypot(i,r);if(t===0)o=h/c,l=u/c;else{const d=t*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=s||1,i===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(i,r),o.length>0){const l=Math.max(i,r);e.setLineDash(o.map(c=>c/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};gs=new WeakSet,Mm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Lm=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Nm=function(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i};let Ga=ky;for(const n in Yn)Ga.prototype[n]!==void 0&&(Ga.prototype[Yn[n]]=Ga.prototype[n]);var Vu,Wu;class bi{static get workerPort(){return a(this,Vu)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");g(this,Vu,t)}static get workerSrc(){return a(this,Wu)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");g(this,Wu,t)}}Vu=new WeakMap,Wu=new WeakMap,A(bi,Vu,null),A(bi,Wu,"");var Ao,Xu;class EC{constructor({parsedData:t,rawData:e}){A(this,Ao);A(this,Xu);g(this,Ao,t),g(this,Xu,e)}getRaw(){return a(this,Xu)}get(t){return a(this,Ao).get(t)??null}getAll(){return fy(a(this,Ao))}has(t){return a(this,Ao).has(t)}}Ao=new WeakMap,Xu=new WeakMap;const Aa=Symbol("INTERNAL");var qu,Yu,Ku,cl;class CC{constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){A(this,qu,!1);A(this,Yu,!1);A(this,Ku,!1);A(this,cl,!0);g(this,qu,!!(t&wn.DISPLAY)),g(this,Yu,!!(t&wn.PRINT)),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(a(this,Ku))return a(this,cl);if(!a(this,cl))return!1;const{print:t,view:e}=this.usage;return a(this,qu)?(e==null?void 0:e.viewState)!=="OFF":a(this,Yu)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==Aa&&bt("Internal method `_setVisible` called."),g(this,Ku,s),g(this,cl,e)}}qu=new WeakMap,Yu=new WeakMap,Ku=new WeakMap,cl=new WeakMap;var Ji,yt,ul,hl,Qu,Im;class kC{constructor(t,e=wn.DISPLAY){A(this,Qu);A(this,Ji,null);A(this,yt,new Map);A(this,ul,null);A(this,hl,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,g(this,hl,t.order);for(const s of t.groups)a(this,yt).set(s.id,new CC(e,s));if(t.baseState==="OFF")for(const s of a(this,yt).values())s._setVisible(Aa,!1);for(const s of t.on)a(this,yt).get(s)._setVisible(Aa,!0);for(const s of t.off)a(this,yt).get(s)._setVisible(Aa,!1);g(this,ul,this.getHash())}}isVisible(t){if(a(this,yt).size===0)return!0;if(!t)return Sp("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,yt).has(t.id)?a(this,yt).get(t.id).visible:(nt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return b(this,Qu,Im).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,yt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(a(this,yt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,yt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(!a(this,yt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,yt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(!a(this,yt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,yt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(a(this,yt).get(e).visible)return!1}return!0}return nt(`Unknown optional content policy ${t.policy}.`),!0}return nt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const i=a(this,yt).get(t);if(!i){nt(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==t&&((r=a(this,yt).get(l))==null||r._setVisible(Aa,!1,!0));i._setVisible(Aa,!!e,!0),g(this,Ji,null)}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=a(this,yt).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}g(this,Ji,null)}get hasInitialVisibility(){return a(this,ul)===null||this.getHash()===a(this,ul)}getOrder(){return a(this,yt).size?a(this,hl)?a(this,hl).slice():[...a(this,yt).keys()]:null}getGroups(){return a(this,yt).size>0?fy(a(this,yt)):null}getGroup(t){return a(this,yt).get(t)||null}getHash(){if(a(this,Ji)!==null)return a(this,Ji);const t=new ub;for(const[e,s]of a(this,yt))t.update(`${e}:${s.visible}`);return g(this,Ji,t.hexdigest())}}Ji=new WeakMap,yt=new WeakMap,ul=new WeakMap,hl=new WeakMap,Qu=new WeakSet,Im=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=b(this,Qu,Im).call(this,r);else if(a(this,yt).has(r))o=a(this,yt).get(r).visible;else return nt(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class TC{constructor(t,{disableRange:e=!1,disableStream:s=!1}){qt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});qt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,i,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PC(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new RC(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class PC{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=my(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class RC{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function MC(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=o(n),e){const h=u(e);return r(h)}if(e=s("filename","i").exec(n),e){e=e[1];let h=l(e);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=_p(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,v,S,y]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[S,y]}const m=[];for(let v=0;v<d.length&&v in d;++v){let[S,y]=d[v];y=l(y),S&&(y=unescape(y),v===0&&(y=c(y))),m.push(y)}return m.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function _b(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function kp(n){try{return new URL(n).origin}catch{}return null}function Eb({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Cb(n){const t=n.get("Content-Disposition");if(t){let e=MC(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(my(e))return e}return null}function Tp(n,t){return n===404||n===0&&t.startsWith("file:")?new pu('Missing PDF "'+t+'".'):new Mf(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function kb(n){return n===200||n===206}function Tb(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Pb(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(nt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class rw{constructor(t){Y(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=_b(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new LC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new NC(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class LC{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,Tb(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=kp(r.url),!kb(r.status))throw Tp(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=Eb({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=Cb(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Rr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Pb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class NC{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=i.url;fetch(o,Tb(r,this._withCredentials,this._abortController)).then(l=>{const c=kp(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!kb(l.status))throw Tp(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:Pb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const ag=200,lg=206;function IC(n){const t=n.response;return typeof t!="string"?t:_p(t).buffer}class DC{constructor({url:t,httpHeaders:e,withCredentials:s}){Y(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=_b(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=lg):i.expectedStatus=ag,e.responseType="arraybuffer",qt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&((i=s.onProgress)==null||i.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||ag;if(!(r===ag&&s.expectedStatus===lg)&&r!==s.expectedStatus){s.onError(i.status);return}const l=IC(i);if(r===lg){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:l}):(nt('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class FC{constructor(t){this._source=t,this._manager=new DC(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new OC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new jC(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class OC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=kp(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=Eb({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Cb(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Tp(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class jC{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=kp((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Tp(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const zC=/^[a-z][a-z0-9\-+.]+:/i;function $C(n){if(zC.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class HC{constructor(t){this.source=t,this.url=$C(t.url),qt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new BC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new UC(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class BC{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new pu(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Rr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class UC{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const GC=1e5,qe=30,VC=.8;var pw,tr,Ze,Zu,Ju,bo,ri,th,eh,xo,dl,fl,er,pl,nh,gl,So,sh,ih,_o,Eo,rh,nr,ml,Li,Rb,Mb,Dm,En,Hd,Fm,Lb,Nb;const Qt=class Qt{constructor({textContentSource:t,container:e,viewport:s}){A(this,Li);A(this,tr,Promise.withResolvers());A(this,Ze,null);A(this,Zu,!1);A(this,Ju,!!((pw=globalThis.FontInspector)!=null&&pw.enabled));A(this,bo,null);A(this,ri,null);A(this,th,0);A(this,eh,0);A(this,xo,null);A(this,dl,null);A(this,fl,0);A(this,er,0);A(this,pl,Object.create(null));A(this,nh,[]);A(this,gl,null);A(this,So,[]);A(this,sh,new WeakMap);A(this,ih,null);var c;if(t instanceof ReadableStream)g(this,gl,t);else if(typeof t=="object")g(this,gl,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,Ze,g(this,dl,e)),g(this,er,s.scale*(globalThis.devicePixelRatio||1)),g(this,fl,s.rotation),g(this,ri,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:l}=s.rawDims;g(this,ih,[1,0,0,-1,-o,l+r]),g(this,eh,i),g(this,th,r),b(c=Qt,En,Lb).call(c),la(e,s),a(this,tr).promise.finally(()=>{a(Qt,ml).delete(this),g(this,ri,null),g(this,pl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ue.platform;return ot(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,xo).read().then(({value:e,done:s})=>{if(s){a(this,tr).resolve();return}a(this,bo)??g(this,bo,e.lang),Object.assign(a(this,pl),e.styles),b(this,Li,Rb).call(this,e.items),t()},a(this,tr).reject)};return g(this,xo,a(this,gl).getReader()),a(Qt,ml).add(this),t(),a(this,tr).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==a(this,fl)&&(e==null||e(),g(this,fl,i),la(a(this,dl),{rotation:i})),s!==a(this,er)){e==null||e(),g(this,er,s);const o={div:null,properties:null,ctx:b(r=Qt,En,Hd).call(r,a(this,bo))};for(const l of a(this,So))o.properties=a(this,sh).get(l),o.div=l,b(this,Li,Dm).call(this,o)}}cancel(){var e;const t=new Rr("TextLayer task cancelled.");(e=a(this,xo))==null||e.cancel(t).catch(()=>{}),g(this,xo,null),a(this,tr).reject(t)}get textDivs(){return a(this,So)}get textContentItemsStr(){return a(this,nh)}static cleanup(){if(!(a(this,ml).size>0)){a(this,_o).clear();for(const{canvas:t}of a(this,Eo).values())t.remove();a(this,Eo).clear()}}};tr=new WeakMap,Ze=new WeakMap,Zu=new WeakMap,Ju=new WeakMap,bo=new WeakMap,ri=new WeakMap,th=new WeakMap,eh=new WeakMap,xo=new WeakMap,dl=new WeakMap,fl=new WeakMap,er=new WeakMap,pl=new WeakMap,nh=new WeakMap,gl=new WeakMap,So=new WeakMap,sh=new WeakMap,ih=new WeakMap,_o=new WeakMap,Eo=new WeakMap,rh=new WeakMap,nr=new WeakMap,ml=new WeakMap,Li=new WeakSet,Rb=function(t){var i,r;if(a(this,Zu))return;(r=a(this,ri)).ctx??(r.ctx=b(i=Qt,En,Hd).call(i,a(this,bo)));const e=a(this,So),s=a(this,nh);for(const o of t){if(e.length>GC){nt("Ignoring additional textDivs for performance reasons."),g(this,Zu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Ze);g(this,Ze,document.createElement("span")),a(this,Ze).classList.add("markedContent"),o.id!==null&&a(this,Ze).setAttribute("id",`${o.id}`),l.append(a(this,Ze))}else o.type==="endMarkedContent"&&g(this,Ze,a(this,Ze).parentNode);continue}s.push(o.str),b(this,Li,Mb).call(this,o)}},Mb=function(t){var v;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,So).push(e);const i=q.transform(a(this,ih),t.transform);let r=Math.atan2(i[1],i[0]);const o=a(this,pl)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Ju)&&o.fontSubstitution||o.fontFamily;l=Qt.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),u=c*b(v=Qt,En,Nb).call(v,l,a(this,bo));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=e.style;a(this,Ze)===a(this,dl)?(p.left=`${(100*h/a(this,eh)).toFixed(2)}%`,p.top=`${(100*d/a(this,th)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(a(Qt,nr)*c).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Ju)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),y=Math.abs(t.transform[3]);S!==y&&Math.max(S,y)/Math.min(S,y)>1.5&&(m=!0)}if(m&&(s.canvasWidth=o.vertical?t.height:t.width),a(this,sh).set(e,s),a(this,ri).div=e,a(this,ri).properties=s,b(this,Li,Dm).call(this,a(this,ri)),s.hasText&&a(this,Ze).append(e),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),a(this,Ze).append(S)}},Dm=function(t){var l;const{div:e,properties:s,ctx:i}=t,{style:r}=e;let o="";if(a(Qt,nr)>1&&(o=`scale(${1/a(Qt,nr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;b(l=Qt,En,Fm).call(l,i,h*a(this,er),c);const{width:d}=i.measureText(e.textContent);d>0&&(o=`scaleX(${u*a(this,er)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},En=new WeakSet,Hd=function(t=null){let e=a(this,Eo).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Eo).set(t,e),a(this,rh).set(e,{size:0,family:""})}return e},Fm=function(t,e,s){const i=a(this,rh).get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)},Lb=function(){if(a(this,nr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),g(this,nr,t.getBoundingClientRect().height),t.remove()},Nb=function(t,e){const s=a(this,_o).get(t);if(s)return s;const i=b(this,En,Hd).call(this,e);i.canvas.width=i.canvas.height=qe,b(this,En,Fm).call(this,i,qe,t);const r=i.measureText("");let o=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+l);return a(this,_o).set(t,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,qe,qe),i.strokeText("g",0,0);let c=i.getImageData(0,0,qe,qe).data;l=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){l=Math.ceil(h/4/qe);break}i.clearRect(0,0,qe,qe),i.strokeText("A",0,qe),c=i.getImageData(0,0,qe,qe).data,o=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){o=qe-Math.floor(h/4/qe);break}i.canvas.width=i.canvas.height=0;const u=o?o/(o+l):VC;return a(this,_o).set(t,u),u},A(Qt,En),A(Qt,_o,new Map),A(Qt,Eo,new Map),A(Qt,rh,new WeakMap),A(Qt,nr,null),A(Qt,ml,new Set);let gu=Qt;class mu{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(mu.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const WC=65536,XC=100,qC=5e3,YC=Ne?cC:oC,KC=Ne?uC:vb,QC=Ne?lC:aC,ZC=Ne?hC:xb;function JC(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new Om,{docId:e}=t,s=n.url?tk(n.url):null,i=n.data?ek(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof Ib?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:WC;let h=n.worker instanceof Va?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Cp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,v=n.CMapReaderFactory||KC,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||ZC,w=n.stopAtErrors!==!0,x=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ne,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ne&&(Ue.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ne,I=n.fontExtraProperties===!0,O=n.enableXfa===!0,B=n.ownerDocument||globalThis.document,it=n.disableRange===!0,ft=n.disableStream===!0,at=n.disableAutoFetch===!0,Lt=n.pdfBug===!0,H=n.CanvasFactory||YC,D=n.FilterFactory||QC,N=n.enableHWA===!0,R=c?c.length:n.length??NaN,P=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ne&&!M,L=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:v===vb&&y===xb&&p&&S&&_c(p,document.baseURI)&&_c(S,document.baseURI),j=null;jE(d);const $={canvasFactory:new H({ownerDocument:B,enableHWA:N}),filterFactory:new D({docId:e,ownerDocument:B}),cMapReaderFactory:L?null:new v({baseUrl:p,isCompressed:m}),standardFontDataFactory:L?null:new y({baseUrl:S})};if(!h){const lt={verbosity:d,port:bi.workerPort};h=lt.port?Va.fromPort(lt):new Va(lt),t._worker=h}const Q={docId:e,apiVersion:"4.10.38",data:i,password:l,disableAutoFetch:at,rangeChunkSize:u,length:R,docBaseUrl:f,enableXfa:O,evaluatorOptions:{maxImageSize:x,disableFontFace:M,ignoreErrors:w,isEvalSupported:_,isOffscreenCanvasSupported:C,isImageDecoderSupported:T,canvasMaxAreaInBytes:k,fontExtraProperties:I,useSystemFonts:P,cMapUrl:L?p:null,standardFontDataUrl:L?S:null}},xt={disableFontFace:M,fontExtraProperties:I,ownerDocument:B,pdfBug:Lt,styleElement:j,loadingParams:{disableAutoFetch:at,enableXfa:O}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const lt=h.messageHandler.sendWithPromise("GetDocRequest",Q,i?[i.buffer]:null);let J;if(c)J=new TC(c,{disableRange:it,disableStream:ft});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let Ht;if(Ne)if(_c(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ht=rw}else Ht=HC;else Ht=_c(s)?rw:FC;J=new Ht({url:s,length:R,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:it,disableStream:ft})}return lt.then(Ht=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ga=new Tc(e,Ht,h.port),Or=new rk(ga,t,J,xt,$);t._transport=Or,ga.send("Ready",null)})}).catch(t._capability.reject),t}function tk(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Ne&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ek(n){if(Ne&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return _p(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ow(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Xf;const qf=class qf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${De(qf,Xf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,s,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};Xf=new WeakMap,A(qf,Xf,0);let Om=qf;class Ib{constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class nk{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ot(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var sr,oi,zn,ba,Bd;class sk{constructor(t,e,s,i=!1){A(this,zn);A(this,sr,null);A(this,oi,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new Wv:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new Db,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Xh({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ot(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:i=$i.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var _,C;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(s,i,h,d),{renderingIntent:p,cacheKey:m}=f;g(this,oi,!1),b(this,zn,Bd).call(this),l||(l=this._transport.getOptionalContentConfig(p));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const S=!!(p&wn.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(f));const y=T=>{var k;v.renderTasks.delete(w),(this._maybeCleanupAfterRender||S)&&g(this,oi,!0),b(this,zn,ba).call(this,!S),T?(w.capability.reject(T),this._abortOperatorList({intentState:v,reason:T instanceof Error?T:new Error(T)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new zm({callback:y,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(v.renderTasks||(v.renderTasks=new Set)).add(w);const x=w.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([T,k])=>{var M;if(this.destroyed){y();return}if((M=this._stats)==null||M.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:T,optionalContentConfig:k}),w.operatorListChanged()}).catch(y),x}getOperatorList({intent:t="display",annotationMode:e=$i.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>mu.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){o.read().then(function({value:c,done:u}){if(u){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},i)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),g(this,oi,!1),b(this,zn,Bd).call(this),Promise.all(t)}cleanup(t=!1){g(this,oi,!0);const e=b(this,zn,ba).call(this,!1);return t&&e&&this._stats&&(this._stats=new Wv),e}_startRenderPage(t,e){var i,r;const s=this._intentStates.get(e);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&b(this,zn,ba).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();b(this,zn,ba).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof gy){let i=XC;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Rr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}sr=new WeakMap,oi=new WeakMap,zn=new WeakSet,ba=function(t=!1){if(b(this,zn,Bd).call(this),!a(this,oi)||this.destroyed)return!1;if(t)return g(this,sr,setTimeout(()=>{g(this,sr,null),b(this,zn,ba).call(this,!1)},qC)),!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,oi,!1),!0},Bd=function(){a(this,sr)&&(clearTimeout(a(this,sr)),g(this,sr,null))};var ai,Yf;class ik{constructor(){A(this,ai,new Map);A(this,Yf,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};a(this,Yf).then(()=>{for(const[i]of a(this,ai))i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){nt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,ai).set(e,i)}removeEventListener(t,e){const s=a(this,ai).get(e);s==null||s(),a(this,ai).delete(e)}terminate(){for(const[,t]of a(this,ai))t==null||t();a(this,ai).clear()}}ai=new WeakMap,Yf=new WeakMap;var Kf,Co,ko,yl,Ud,vl,Gd;const Tt=class Tt{constructor({name:t=null,port:e=null,verbosity:s=zE()}={}){A(this,yl);var i;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=a(Tt,ko))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(Tt,ko)||g(Tt,ko,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Tc("main","worker",t),this._messageHandler.on("ready",function(){}),b(this,yl,Ud).call(this)}_initialize(){if(a(Tt,Co)||a(Tt,vl,Gd)){this._setupFakeWorker();return}let{workerSrc:t}=Tt;try{Tt._isSameOrigin(window.location.href,t)||(t=Tt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Tc("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}this._messageHandler=s,this._port=e,this._webWorker=e,b(this,yl,Ud).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{Sp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(Tt,Co)||(nt("Setting up fake worker."),g(Tt,Co,!0)),Tt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new ik;this._port=e;const s=`fake${De(Tt,Kf)._++}`,i=new Tc(s+"_worker",s,e);t.setup(i,e),this._messageHandler=new Tc(s,s+"_worker",e),b(this,yl,Ud).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=a(Tt,ko))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=a(this,ko))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Tt(t)}static get workerSrc(){if(bi.workerSrc)return bi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ot(this,"_setupFakeWorkerGlobal",(async()=>a(this,vl,Gd)?a(this,vl,Gd):(await import(this.workerSrc)).WorkerMessageHandler)())}};Kf=new WeakMap,Co=new WeakMap,ko=new WeakMap,yl=new WeakSet,Ud=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},vl=new WeakSet,Gd=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(Tt,vl),A(Tt,Kf,0),A(Tt,Co,!1),A(Tt,ko),Ne&&(g(Tt,Co,!0),bi.workerSrc||(bi.workerSrc="./pdf.worker.mjs")),Tt._isSameOrigin=(t,e)=>{let s;try{if(s=new URL(t),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(e,s);return s.origin===i.origin},Tt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Va=Tt;var li,Ms,wl,Al,ci,To,Nc;class rk{constructor(t,e,s,i,r){A(this,To);A(this,li,new Map);A(this,Ms,new Map);A(this,wl,new Map);A(this,Al,new Map);A(this,ci,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Db,this.fontLoader=new iC({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ot(this,"annotationStorage",new wy)}getRenderingIntent(t,e=$i.ENABLE,s=null,i=!1,r=!1){let o=wn.DISPLAY,l=Cm;switch(t){case"any":o=wn.ANY;break;case"display":break;case"print":o=wn.PRINT;break;default:nt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&wn.PRINT&&s instanceof db?s:this.annotationStorage;switch(e){case $i.DISABLE:o+=wn.ANNOTATIONS_DISABLE;break;case $i.ENABLE:break;case $i.ENABLE_FORMS:o+=wn.ANNOTATIONS_FORMS;break;case $i.ENABLE_STORAGE:o+=wn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:nt(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=wn.IS_EDITING),r&&(o+=wn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=a(this,ci))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of a(this,Ms).values())t.push(i._destroy());a(this,Ms).clear(),a(this,wl).clear(),a(this,Al).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,li).clear(),this.filterFactory.destroy(),gu.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Rr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}qt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,i)=>{qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){i.close();return}qt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new nk(s,this))}),t.on("DocException",s=>{e._capability.reject(Ye(s))}),t.on("PasswordRequest",s=>{g(this,ci,Promise.withResolvers());try{if(!e.onPassword)throw Ye(s);const i=r=>{r instanceof Error?a(this,ci).reject(r):a(this,ci).resolve({password:r})};e.onPassword(i,s.code)}catch(i){a(this,ci).reject(i)}return a(this,ci).promise}),t.on("DataLoaded",s=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;a(this,Ms).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;nt(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new rC(r,{disableFontFace:l,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=r;qt(f,"The imageRef must be defined.");for(const p of a(this,Ms).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Ms).get(i);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":l.objs.resolve(s,o),(o==null?void 0:o.dataLen)>IE&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),t.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&nt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=a(this,wl).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Al).set(r.refStr,t);const o=new sk(e,r,this,this._params.pdfBug);return a(this,Ms).set(e,o),o});return a(this,wl).set(e,i),i}getPageIndex(t){return ow(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return b(this,To,Nc).call(this,"GetFieldObjects")}hasJSActions(){return b(this,To,Nc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return b(this,To,Nc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return b(this,To,Nc).call(this,"GetOptionalContentConfig").then(e=>new kC(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,li).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new EC(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,li).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Ms).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,li).clear(),this.filterFactory.destroy(!0),gu.cleanup()}}cachedPageNumber(t){if(!ow(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Al).get(e)??null}}li=new WeakMap,Ms=new WeakMap,wl=new WeakMap,Al=new WeakMap,ci=new WeakMap,To=new WeakSet,Nc=function(t,e=null){const s=a(this,li).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return a(this,li).set(t,i),i};const vc=Symbol("INITIAL_DATA");var un,oh,jm;class Db{constructor(){A(this,oh);A(this,un,Object.create(null))}get(t,e=null){if(e){const i=b(this,oh,jm).call(this,t);return i.promise.then(()=>e(i.data)),null}const s=a(this,un)[t];if(!s||s.data===vc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=a(this,un)[t];return!!e&&e.data!==vc}delete(t){const e=a(this,un)[t];return!e||e.data===vc?!1:(delete a(this,un)[t],!0)}resolve(t,e=null){const s=b(this,oh,jm).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in a(this,un)){const{data:s}=a(this,un)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}g(this,un,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,un)){const{data:e}=a(this,un)[t];e!==vc&&(yield[t,e])}}}un=new WeakMap,oh=new WeakSet,jm=function(t){var e;return(e=a(this,un))[t]||(e[t]={...Promise.withResolvers(),data:vc})};var ir;class ok{constructor(t){A(this,ir,null);g(this,ir,t),this.onContinue=null}get promise(){return a(this,ir).capability.promise}cancel(t=0){a(this,ir).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,ir).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,ir);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}ir=new WeakMap;var rr,Po;const Wr=class Wr{constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){A(this,rr,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ok(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(Wr,Po).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Wr,Po).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new Ga(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),a(this,rr)&&(window.cancelAnimationFrame(a(this,rr)),g(this,rr,null)),a(Wr,Po).delete(this._canvas),this.callback(t||new gy(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,rr,window.requestAnimationFrame(()=>{g(this,rr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Wr,Po).delete(this._canvas),this.callback())))}};rr=new WeakMap,Po=new WeakMap,A(Wr,Po,new WeakSet);let zm=Wr;const ak="4.10.38",lk="f9bea397f";function aw(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function wc(n){return Math.max(0,Math.min(255,255*n))}class lw{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=wc(t),[t,t,t]}static G_HTML([t]){const e=aw(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(wc)}static RGB_HTML(t){return`#${t.map(aw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[wc(1-Math.min(1,t+i)),wc(1-Math.min(1,s+i)),wc(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,o=1-s,l=Math.min(i,r,o);return["CMYK",i,r,o,l]}}class ck{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){bt("Abstract method `_createSVG` called.")}}class by extends ck{_createSVG(t){return document.createElementNS(Us,t)}}class Fb{static setupStorage(t,e,s,i,r){const o=i.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{i.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{i.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var d,f;const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),l&&mu.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[p,m,v]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const S=p.children[++h.at(-1)[1]];if(S===null)continue;const{name:y}=S;if(y==="#text"){const x=document.createTextNode(S.value);u.push(x),v.append(x);continue}const w=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,y):document.createElement(y);if(v.append(w),S.attributes&&this.setAttributes({html:w,element:S,storage:e,intent:r,linkService:s}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,w]);else if(S.value){const x=document.createTextNode(S.value);l&&mu.shouldBuildText(y)&&u.push(x),w.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Yh=1e3,uk=9,ua=new WeakSet;function kr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class hk{static create(t){switch(t.data.annotationType){case Kt.LINK:return new Ob(t);case Kt.TEXT:return new dk(t);case Kt.WIDGET:switch(t.data.fieldType){case"Tx":return new fk(t);case"Btn":return t.data.radioButton?new $b(t):t.data.checkBox?new gk(t):new mk(t);case"Ch":return new yk(t);case"Sig":return new pk(t)}return new pa(t);case Kt.POPUP:return new Hm(t);case Kt.FREETEXT:return new Vb(t);case Kt.LINE:return new wk(t);case Kt.SQUARE:return new Ak(t);case Kt.CIRCLE:return new bk(t);case Kt.POLYLINE:return new Wb(t);case Kt.CARET:return new Sk(t);case Kt.INK:return new xy(t);case Kt.POLYGON:return new xk(t);case Kt.HIGHLIGHT:return new Xb(t);case Kt.UNDERLINE:return new _k(t);case Kt.SQUIGGLY:return new Ek(t);case Kt.STRIKEOUT:return new Ck(t);case Kt.STAMP:return new qb(t);case Kt.FILEATTACHMENT:return new kk(t);default:return new Vt(t)}}}var Ro,bl,xl,ah,$m;const Ty=class Ty{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){A(this,ah);A(this,Ro,null);A(this,bl,!1);A(this,xl,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ty._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;a(this,Ro)||g(this,Ro,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&b(this,ah,$m).call(this,e),(s=a(this,xl))==null||s.popup.updateEdited(t)}resetEdited(){var t;a(this,Ro)&&(b(this,ah,$m).call(this,a(this,Ro).rect),(t=a(this,xl))==null||t.popup.resetEdited(),g(this,Ro,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof pa||(r.tabIndex=Yh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Hm){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:l,height:c}=kr(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(v>0||S>0){const w=`calc(${v}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;o.borderRadius=w}else if(this instanceof $b){const w=`calc(${l}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case mc.SOLID:o.borderStyle="solid";break;case mc.DASHED:o.borderStyle="dashed";break;case mc.BEVELED:nt("Unimplemented border style: beveled");break;case mc.INSET:nt("Unimplemented border style: inset");break;case mc.UNDERLINE:o.borderBottomStyle="solid";break}const y=e.borderColor||null;y?(g(this,bl,!0),o.borderColor=q.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const u=q.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=e;return e.hasOwnCanvas||m===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=kr(this.data.rect);let l,c;t%180===0?(l=100*r/s,c=100*o/i):(l=100*o/s,c=100*r/i),e.style.width=`${l}%`,e.style.height=`${c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],o=r[0],l=r.slice(1);i.target.style[s]=lw[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:lw[`${o}_rgb`](l)})};return ot(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||s[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const o=s[i];if(o){const l={detail:{[i]:r},target:t};o(l),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,S,y,w]=t.subarray(2,6);if(i===v&&r===S&&e===y&&s===w)return}const{style:o}=this.container;let l;if(a(this,bl)){const{borderColor:v,borderWidth:S}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=i-e,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let v=2,S=t.length;v<S;v+=8){const y=t[v],w=t[v+1],x=t[v+2],_=t[v+3],C=h.createElement("rect"),T=(x-e)/c,k=(r-w)/u,M=(y-x)/c,I=(w-_)/u;C.setAttribute("x",T),C.setAttribute("y",k),C.setAttribute("width",M),C.setAttribute("height",I),p.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${M}" height="${I}"/>`)}a(this,bl)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:t}=this,e=g(this,xl,new Hm({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:l}of i){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!ua.has(u)){nt(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&ua.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Ro=new WeakMap,bl=new WeakMap,xl=new WeakMap,ah=new WeakSet,$m=function(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...t);const{width:u,height:h}=kr(t);e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,i===0?(e.width=`${100*u/r}%`,e.height=`${100*h/o}%`):this.setRotation(i)};let Vt=Ty;var bn,Br,jb,zb;class Ob extends Vt{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,bn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(b(this,bn,jb).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(b(this,bn,zb).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&b(this,bn,Br).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),b(this,bn,Br).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),b(this,bn,Br).call(this)}_bindResetFormAction(e,s){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),b(this,bn,Br).call(this),!this._fieldObjects){nt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:v}of m)f.add(v)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===l&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const v=f.defaultValue||"";u.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(p,{value:v});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!ua.has(m)){nt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}bn=new WeakSet,Br=function(){this.container.setAttribute("data-internal-link","")},jb=function(e,s,i=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},b(this,bn,Br).call(this)},zb=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),b(this,bn,Br).call(this)};class dk extends Vt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class pa extends Vt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ue.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var l;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,s,i){var r,o,l;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":q.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||uk,r=t.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(ng*i))||1,d=u/h;o=Math.min(i,c(d/ng))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(u/ng))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=q.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class fk extends pa{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ua.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Yh,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var v;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(v){h.userValue=v.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),v.target.value=h.userValue},formattedValue(v){const{formattedValue:S}=v.detail;h.formattedValue=S,S!=null&&v.target!==document.activeElement&&(v.target.value=S),t.setValue(e,{formattedValue:S})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var x;const{charLimit:S}=v.detail,{target:y}=v;if(S===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",S);let w=h.userValue;!w||w.length<=S||(w=w.slice(0,S),y.value=h.userValue=w,t.setValue(e,{value:w}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("keydown",p=>{var S;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:v}=p.target;h.lastCommittedValue!==v&&(h.lastCommittedValue=v,h.userValue=v,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",p=>{var v,S;if(!h.focused||!p.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var C;h.lastCommittedValue=null;const{data:m,target:v}=p,{value:S,selectionStart:y,selectionEnd:w}=v;let x=y,_=w;switch(p.inputType){case"deleteWordBackward":{const T=S.substring(0,y).match(/\w*[^\w]*$/);T&&(x-=T[0].length);break}case"deleteWordForward":{const T=S.substring(y).match(/^[^\w]*\w*/);T&&(_+=T[0].length);break}case"deleteContentBackward":y===w&&(x-=1);break;case"deleteContentForward":y===w&&(_+=1);break}p.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:m||"",willCommit:!1,selStart:x,selEnd:_}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class pk extends pa{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class gk extends pa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ua.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Yh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $b extends pa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(ua.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Yh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s))t.setValue(u.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class mk extends Ob{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class yk extends pa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");ua.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Yh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const v of i.options)v.selected=m.has(v.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,m=f.detail.remove;p[m].selected=!1,i.remove(m),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:m,exportValue:v}=f.detail.insert,S=i.children[p],y=document.createElement("option");y.textContent=m,y.value=v,S?S.before(y):i.append(y),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of p){const{displayValue:v,exportValue:S}=m,y=document.createElement("option");y.textContent=v,y.value=S,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Hm extends Vt{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Vt._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new vk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${py}${s}`).join(",")),this.container}}var Sl,Qf,Zf,_l,Mo,zt,ui,El,lh,ch,Cl,hi,ts,di,uh,fi,hh,Lo,No,At,Vd,Bm,Hb,Bb,Ub,Gb,Wd,Xd,Um;class vk{constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d}){A(this,At);A(this,Sl,b(this,At,Ub).bind(this));A(this,Qf,b(this,At,Um).bind(this));A(this,Zf,b(this,At,Xd).bind(this));A(this,_l,b(this,At,Wd).bind(this));A(this,Mo,null);A(this,zt,null);A(this,ui,null);A(this,El,null);A(this,lh,null);A(this,ch,null);A(this,Cl,null);A(this,hi,!1);A(this,ts,null);A(this,di,null);A(this,uh,null);A(this,fi,null);A(this,hh,null);A(this,Lo,null);A(this,No,!1);var f;g(this,zt,t),g(this,hh,i),g(this,ui,o),g(this,fi,l),g(this,ch,c),g(this,Mo,e),g(this,uh,u),g(this,Cl,h),g(this,lh,s),g(this,El,yy.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",a(this,_l)),p.addEventListener("mouseenter",a(this,Zf)),p.addEventListener("mouseleave",a(this,Qf)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",a(this,Sl));a(this,zt).hidden=!0,d&&b(this,At,Wd).call(this)}render(){if(a(this,ts))return;const t=g(this,ts,document.createElement("div"));if(t.className="popup",a(this,Mo)){const r=t.style.outlineColor=q.makeHexColor(...a(this,Mo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=q.makeHexColor(...a(this,Mo).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=a(this,hh),t.append(e),a(this,El)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,El).valueOf()})),e.append(r)}const i=a(this,At,Vd);if(i)Fb.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,ui));t.append(r)}a(this,zt).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const l=i[r];s.append(document.createTextNode(l)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;a(this,Lo)||g(this,Lo,{contentsObj:a(this,ui),richText:a(this,fi)}),t&&g(this,di,null),e&&(g(this,fi,b(this,At,Bb).call(this,e)),g(this,ui,null)),(s=a(this,ts))==null||s.remove(),g(this,ts,null)}resetEdited(){var t;a(this,Lo)&&({contentsObj:De(this,ui)._,richText:De(this,fi)._}=a(this,Lo),g(this,Lo,null),(t=a(this,ts))==null||t.remove(),g(this,ts,null),g(this,di,null))}forceHide(){g(this,No,this.isVisible),a(this,No)&&(a(this,zt).hidden=!0)}maybeShow(){a(this,No)&&(a(this,ts)||b(this,At,Xd).call(this),g(this,No,!1),a(this,zt).hidden=!1)}get isVisible(){return a(this,zt).hidden===!1}}Sl=new WeakMap,Qf=new WeakMap,Zf=new WeakMap,_l=new WeakMap,Mo=new WeakMap,zt=new WeakMap,ui=new WeakMap,El=new WeakMap,lh=new WeakMap,ch=new WeakMap,Cl=new WeakMap,hi=new WeakMap,ts=new WeakMap,di=new WeakMap,uh=new WeakMap,fi=new WeakMap,hh=new WeakMap,Lo=new WeakMap,No=new WeakMap,At=new WeakSet,Vd=function(){const t=a(this,fi),e=a(this,ui);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,fi).html||null},Bm=function(){var t,e,s;return((s=(e=(t=a(this,At,Vd))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},Hb=function(){var t,e,s;return((s=(e=(t=a(this,At,Vd))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},Bb=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:a(this,At,Hb),fontSize:a(this,At,Bm)?`calc(${a(this,At,Bm)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s},Ub=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,hi))&&b(this,At,Wd).call(this)},Gb=function(){if(a(this,di)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=a(this,ch);let o=!!a(this,Cl),l=o?a(this,Cl):a(this,uh);for(const m of a(this,lh))if(!l||q.intersect(m.data.rect,l)!==null){l=m.data.rect,o=!0;break}const c=q.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];g(this,di,[100*(d-i)/e,100*(f-r)/s]);const{style:p}=a(this,zt);p.left=`${a(this,di)[0]}%`,p.top=`${a(this,di)[1]}%`},Wd=function(){g(this,hi,!a(this,hi)),a(this,hi)?(b(this,At,Xd).call(this),a(this,zt).addEventListener("click",a(this,_l)),a(this,zt).addEventListener("keydown",a(this,Sl))):(b(this,At,Um).call(this),a(this,zt).removeEventListener("click",a(this,_l)),a(this,zt).removeEventListener("keydown",a(this,Sl)))},Xd=function(){a(this,ts)||this.render(),this.isVisible?a(this,hi)&&a(this,zt).classList.add("focused"):(b(this,At,Gb).call(this),a(this,zt).hidden=!1,a(this,zt).style.zIndex=parseInt(a(this,zt).style.zIndex)+1e3)},Um=function(){a(this,zt).classList.remove("focused"),!(a(this,hi)||!this.isVisible)&&(a(this,zt).hidden=!0,a(this,zt).style.zIndex=parseInt(a(this,zt).style.zIndex)-1e3)};class Vb extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var dh;class wk extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,dh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:s,height:i}=kr(e.rect),r=this.svgFactory.create(s,i,!0),o=g(this,dh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,dh)}addHighlightArea(){this.container.classList.add("highlightArea")}}dh=new WeakMap;var fh;class Ak extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,fh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:s,height:i}=kr(e.rect),r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,l=g(this,fh,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}fh=new WeakMap;var ph;class bk extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,ph,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:s,height:i}=kr(e.rect),r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,l=g(this,ph,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",i/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}ph=new WeakMap;var gh;class Wb extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,gh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:o,height:l}=kr(e),c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-e[0],m=e[3]-s[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=g(this,gh,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,gh)}addHighlightArea(){this.container.classList.add("highlightArea")}}gh=new WeakMap;class xk extends Wb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Sk extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var mh,Io,yh,Gm;class xy extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,yh);A(this,mh,null);A(this,Io,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?et.HIGHLIGHT:et.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=b(this,yh,Gm).call(this,s,e),h=this.svgFactory.create(c,u,!0),d=g(this,mh,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=i.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);a(this,Io).push(m),m.setAttribute("points",i[f].join(",")),d.append(m)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:i,rect:r}=e,o=a(this,mh);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let l=0,c=a(this,Io).length;l<c;l++)a(this,Io)[l].setAttribute("points",i[l].join(","));if(r){const{transform:l,width:c,height:u}=b(this,yh,Gm).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Io)}addHighlightArea(){this.container.classList.add("highlightArea")}}mh=new WeakMap,Io=new WeakMap,yh=new WeakSet,Gm=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class Xb extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=et.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class _k extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ek extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ck extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class qb extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=et.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var vh,wh,Vm;class kk extends Vt{constructor(e){var i;super(e,{isRenderable:!0});A(this,wh);A(this,vh,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",b(this,wh,Vm).bind(this)),g(this,vh,i);const{isMac:r}=Ue.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&b(this,wh,Vm).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return a(this,vh)}addHighlightArea(){this.container.classList.add("highlightArea")}}vh=new WeakMap,wh=new WeakSet,Vm=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Ah,Do,Fo,bh,ha,Yb,Wm;class Tk{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:l}){A(this,ha);A(this,Ah,null);A(this,Do,null);A(this,Fo,new Map);A(this,bh,null);this.div=t,g(this,Ah,e),g(this,Do,s),g(this,bh,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return a(this,Fo).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;la(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new by,annotationStorage:t.annotationStorage||new wy,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Kt.POPUP;if(c){const d=i.get(l.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=kr(l.rect);if(d<=0||f<=0)continue}r.data=l;const u=hk.create(r);if(!u.isRenderable)continue;if(!c&&l.popupRef){const d=i.get(l.popupRef);d?d.push(u):i.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),await b(this,ha,Yb).call(this,h,l.id),u._isEditable&&(a(this,Fo).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}b(this,ha,Wm).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,la(e,{rotation:t.rotation}),b(this,ha,Wm).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Fo).values())}getEditableAnnotation(t){return a(this,Fo).get(t)}}Ah=new WeakMap,Do=new WeakMap,Fo=new WeakMap,bh=new WeakMap,ha=new WeakSet,Yb=async function(t,e){var o,l;const s=t.firstChild||t,i=s.id=`${py}${e}`,r=await((o=a(this,bh))==null?void 0:o.getAriaAttributes(i));if(r)for(const[c,u]of r)s.setAttribute(c,u);this.div.append(t),(l=a(this,Ah))==null||l.moveElementInDOM(this.div,t,s,!1)},Wm=function(){if(!a(this,Do))return;const t=this.div;for(const[e,s]of a(this,Do)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}a(this,Do).clear()};const md=/\r\n?|\n/g;var es,hn,xh,Oo,dn,Yt,Kb,Qb,Zb,qd,Ci,Yd,Kd,Jb,qm,tx;const St=class St extends Ft{constructor(e){super({...e,name:"freeTextEditor"});A(this,Yt);A(this,es);A(this,hn,"");A(this,xh,`${this.id}-editor`);A(this,Oo,null);A(this,dn);g(this,es,e.color||St._defaultColor||Ft._defaultLineColor),g(this,dn,e.fontSize||St._defaultFontSize)}static get _keyboardManager(){const e=St.prototype,s=o=>o.isEmpty(),i=ca.TRANSLATE_SMALL,r=ca.TRANSLATE_BIG;return ot(this,"_keyboardManager",new qh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){Ft.initialize(e,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case ut.FREETEXT_SIZE:St._defaultFontSize=s;break;case ut.FREETEXT_COLOR:St._defaultColor=s;break}}updateParams(e,s){switch(e){case ut.FREETEXT_SIZE:b(this,Yt,Kb).call(this,s);break;case ut.FREETEXT_COLOR:b(this,Yt,Qb).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ut.FREETEXT_SIZE,St._defaultFontSize],[ut.FREETEXT_COLOR,St._defaultColor||Ft._defaultLineColor]]}get propertiesToUpdate(){return[[ut.FREETEXT_SIZE,a(this,dn)],[ut.FREETEXT_COLOR,a(this,es)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-St._internalPadding*e,-(St._internalPadding+a(this,dn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(et.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,Oo,new AbortController);const e=this._uiManager.combinedSignal(a(this,Oo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,xh)),this._isDraggable=!0,(e=a(this,Oo))==null||e.abort(),g(this,Oo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,hn),s=g(this,hn,b(this,Yt,Zb).call(this).trimEnd());if(e===s)return;const i=r=>{if(g(this,hn,r),!r){this.remove();return}b(this,Yt,Kd).call(this),this._uiManager.rebuild(this),b(this,Yt,qd).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(e)},mustExec:!1}),b(this,Yt,qd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){St._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,xh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${a(this,dn)}px * var(--scale-factor))`,i.color=a(this,es),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Lf(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,v;switch(this.rotation){case 0:m=e+(l[0]-f)/h,v=s+this.height-(l[1]-p)/d;break;case 90:m=e+(l[0]-f)/h,v=s-(l[1]-p)/d,[c,u]=[u,-c];break;case 180:m=e-this.width+(l[0]-f)/h,v=s-(l[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=e+(l[0]-f-this.height*d)/h,v=s+(l[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,v*o,c,u)}else this.setAt(e*r,s*o,this.width*r,this.height*o);b(this,Yt,Kd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var m,v,S;const s=e.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=b(m=St,Ci,qm).call(m,s.getData("text")||"").replaceAll(md,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(md,"")),y!==this.editorDiv){let w=h;for(const x of this.editorDiv.childNodes){if(x===y){w=d;continue}w.push(b(v=St,Ci,Yd).call(v,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(md,""))}else if(c===this.editorDiv){let y=h,w=0;for(const x of this.editorDiv.childNodes)w++===u&&(y=d),y.push(b(S=St,Ci,Yd).call(S,x))}g(this,hn,`${h.join(`
`)}${r}${d.join(`
`)}`),b(this,Yt,Kd).call(this);const f=new Range;let p=h.reduce((y,w)=>y+w.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(p<=w){f.setStart(y,p),f.setEnd(y,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,i){var l;let r=null;if(e instanceof Vb){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:v,parent:{page:{pageNumber:S}}}=e;if(!m||m.length===0)return null;r=e={annotationType:et.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:v,pageIndex:S-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(e,s,i);return g(o,dn,e.fontSize),g(o,es,q.makeHexColor(...e.color)),g(o,hn,b(l=St,Ci,qm).call(l,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=St._internalPadding*this.parentScale,i=this.getRect(s,s),r=Ft._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,es)),o={annotationType:et.FREETEXT,color:r,fontSize:a(this,dn),value:b(this,Yt,Jb).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!b(this,Yt,tx).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${a(this,dn)}px * var(--scale-factor))`,i.color=a(this,es),s.replaceChildren();for(const o of a(this,hn).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),s.append(l)}const r=St._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,hn)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};es=new WeakMap,hn=new WeakMap,xh=new WeakMap,Oo=new WeakMap,dn=new WeakMap,Yt=new WeakSet,Kb=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-a(this,dn))*this.parentScale),g(this,dn,r),b(this,Yt,qd).call(this)},i=a(this,dn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Qb=function(e){const s=r=>{g(this,es,this.editorDiv.style.color=r)},i=a(this,es);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Zb=function(){var i;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(b(i=St,Ci,Yd).call(i,r)),s=r);return e.join(`
`)},qd=function(){const[e,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/s):(this.width=i.height/e,this.height=i.width/s),this.fixAndSetPosition()},Ci=new WeakSet,Yd=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(md,"")},Kd=function(){if(this.editorDiv.replaceChildren(),!!a(this,hn))for(const e of a(this,hn).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},Jb=function(){return a(this,hn).replaceAll(""," ")},qm=function(e){return e.replaceAll(" ","")},tx=function(e){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==i||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},A(St,Ci),Y(St,"_freeTextDefaultContent",""),Y(St,"_internalPadding",0),Y(St,"_defaultColor",null),Y(St,"_defaultFontSize",10),Y(St,"_type","freetext"),Y(St,"_editorType",et.FREETEXT);let Xm=St;class G{toSVGPath(){bt("Abstract method `toSVGPath` must be implemented.")}get box(){bt("Abstract getter `box` must be implemented.")}serialize(t,e){bt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*i,o[l+1]=s+t[l+1]*r;return o}static _rescaleAndSwap(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*i,o[l+1]=s+t[l]*r;return o}static _translate(t,e,s,i){i||(i=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,o){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}Y(G,"PRECISION",1e-4);var fn,ns,kl,Tl,Ls,rt,jo,zo,Sh,_h,Pl,Rl,or,Eh,Jf,tp,se,Ic,ex,nx,sx,ix,rx,ox;const qs=class qs{constructor({x:t,y:e},s,i,r,o,l=0){A(this,se);A(this,fn);A(this,ns,[]);A(this,kl);A(this,Tl);A(this,Ls,[]);A(this,rt,new Float32Array(18));A(this,jo);A(this,zo);A(this,Sh);A(this,_h);A(this,Pl);A(this,Rl);A(this,or,[]);g(this,fn,s),g(this,Rl,r*i),g(this,Tl,o),a(this,rt).set([NaN,NaN,NaN,NaN,t,e],6),g(this,kl,l),g(this,_h,a(qs,Eh)*i),g(this,Sh,a(qs,tp)*i),g(this,Pl,i),a(this,or).push(t,e)}isEmpty(){return isNaN(a(this,rt)[8])}add({x:t,y:e}){var I;g(this,jo,t),g(this,zo,e);const[s,i,r,o]=a(this,fn);let[l,c,u,h]=a(this,rt).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<a(this,Sh))return!1;const m=p-a(this,_h),v=m/p,S=v*d,y=v*f;let w=l,x=c;l=u,c=h,u+=S,h+=y,(I=a(this,or))==null||I.push(t,e);const _=-y/m,C=S/m,T=_*a(this,Rl),k=C*a(this,Rl);return a(this,rt).set(a(this,rt).subarray(2,8),0),a(this,rt).set([u+T,h+k],4),a(this,rt).set(a(this,rt).subarray(14,18),12),a(this,rt).set([u-T,h-k],16),isNaN(a(this,rt)[6])?(a(this,Ls).length===0&&(a(this,rt).set([l+T,c+k],2),a(this,Ls).push(NaN,NaN,NaN,NaN,(l+T-s)/r,(c+k-i)/o),a(this,rt).set([l-T,c-k],14),a(this,ns).push(NaN,NaN,NaN,NaN,(l-T-s)/r,(c-k-i)/o)),a(this,rt).set([w,x,l,c,u,h],6),!this.isEmpty()):(a(this,rt).set([w,x,l,c,u,h],6),Math.abs(Math.atan2(x-c,w-l)-Math.atan2(y,S))<Math.PI/2?([l,c,u,h]=a(this,rt).subarray(2,6),a(this,Ls).push(NaN,NaN,NaN,NaN,((l+u)/2-s)/r,((c+h)/2-i)/o),[l,c,w,x]=a(this,rt).subarray(14,18),a(this,ns).push(NaN,NaN,NaN,NaN,((w+l)/2-s)/r,((x+c)/2-i)/o),!0):([w,x,l,c,u,h]=a(this,rt).subarray(0,6),a(this,Ls).push(((w+5*l)/6-s)/r,((x+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),[u,h,l,c,w,x]=a(this,rt).subarray(12,18),a(this,ns).push(((w+5*l)/6-s)/r,((x+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Ls),e=a(this,ns);if(isNaN(a(this,rt)[6])&&!this.isEmpty())return b(this,se,ex).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);b(this,se,sx).call(this,s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return b(this,se,nx).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,i,r,o){return new ax(t,e,s,i,r,o)}getOutlines(){var d;const t=a(this,Ls),e=a(this,ns),s=a(this,rt),[i,r,o,l]=a(this,fn),c=new Float32Array((((d=a(this,or))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,or)[f]-i)/o,c[f+1]=(a(this,or)[f+1]-r)/l;if(c[c.length-2]=(a(this,jo)-i)/o,c[c.length-1]=(a(this,zo)-r)/l,isNaN(s[6])&&!this.isEmpty())return b(this,se,ix).call(this,c);const u=new Float32Array(a(this,Ls).length+24+a(this,ns).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=b(this,se,ox).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return b(this,se,rx).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,fn),a(this,Pl),a(this,kl),a(this,Tl))}};fn=new WeakMap,ns=new WeakMap,kl=new WeakMap,Tl=new WeakMap,Ls=new WeakMap,rt=new WeakMap,jo=new WeakMap,zo=new WeakMap,Sh=new WeakMap,_h=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,or=new WeakMap,Eh=new WeakMap,Jf=new WeakMap,tp=new WeakMap,se=new WeakSet,Ic=function(){const t=a(this,rt).subarray(4,6),e=a(this,rt).subarray(16,18),[s,i,r,o]=a(this,fn);return[(a(this,jo)+(t[0]-e[0])/2-s)/r,(a(this,zo)+(t[1]-e[1])/2-i)/o,(a(this,jo)+(e[0]-t[0])/2-s)/r,(a(this,zo)+(e[1]-t[1])/2-i)/o]},ex=function(){const[t,e,s,i]=a(this,fn),[r,o,l,c]=b(this,se,Ic).call(this);return`M${(a(this,rt)[2]-t)/s} ${(a(this,rt)[3]-e)/i} L${(a(this,rt)[4]-t)/s} ${(a(this,rt)[5]-e)/i} L${r} ${o} L${l} ${c} L${(a(this,rt)[16]-t)/s} ${(a(this,rt)[17]-e)/i} L${(a(this,rt)[14]-t)/s} ${(a(this,rt)[15]-e)/i} Z`},nx=function(t){const e=a(this,ns);t.push(`L${e[4]} ${e[5]} Z`)},sx=function(t){const[e,s,i,r]=a(this,fn),o=a(this,rt).subarray(4,6),l=a(this,rt).subarray(16,18),[c,u,h,d]=b(this,se,Ic).call(this);t.push(`L${(o[0]-e)/i} ${(o[1]-s)/r} L${c} ${u} L${h} ${d} L${(l[0]-e)/i} ${(l[1]-s)/r}`)},ix=function(t){const e=a(this,rt),[s,i,r,o]=a(this,fn),[l,c,u,h]=b(this,se,Ic).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(d,t,a(this,fn),a(this,Pl),a(this,kl),a(this,Tl))},rx=function(t,e){const s=a(this,ns);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},ox=function(t,e){const s=a(this,rt).subarray(4,6),i=a(this,rt).subarray(16,18),[r,o,l,c]=a(this,fn),[u,h,d,f]=b(this,se,Ic).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c],e),e+=24},A(qs,Eh,8),A(qs,Jf,2),A(qs,tp,a(qs,Eh)+a(qs,Jf));let Df=qs;var Ml,$o,pi,Ch,pn,kh,Ut,ep,lx;class ax extends G{constructor(e,s,i,r,o,l){super();A(this,ep);A(this,Ml);A(this,$o,new Float32Array(4));A(this,pi);A(this,Ch);A(this,pn);A(this,kh);A(this,Ut);g(this,Ut,e),g(this,pn,s),g(this,Ml,i),g(this,kh,r),g(this,pi,o),g(this,Ch,l),this.lastPoint=[NaN,NaN],b(this,ep,lx).call(this,l);const[c,u,h,d]=a(this,$o);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-c)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const e=[`M${a(this,Ut)[4]} ${a(this,Ut)[5]}`];for(let s=6,i=a(this,Ut).length;s<i;s+=6){if(isNaN(a(this,Ut)[s])){e.push(`L${a(this,Ut)[s+4]} ${a(this,Ut)[s+5]}`);continue}e.push(`C${a(this,Ut)[s]} ${a(this,Ut)[s+1]} ${a(this,Ut)[s+2]} ${a(this,Ut)[s+3]} ${a(this,Ut)[s+4]} ${a(this,Ut)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,i,r],o){const l=i-e,c=r-s;let u,h;switch(o){case 0:u=G._rescale(a(this,Ut),e,r,l,-c),h=G._rescale(a(this,pn),e,r,l,-c);break;case 90:u=G._rescaleAndSwap(a(this,Ut),e,s,l,c),h=G._rescaleAndSwap(a(this,pn),e,s,l,c);break;case 180:u=G._rescale(a(this,Ut),i,s,-l,c),h=G._rescale(a(this,pn),i,s,-l,c);break;case 270:u=G._rescaleAndSwap(a(this,Ut),i,r,-l,-c),h=G._rescaleAndSwap(a(this,pn),i,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,$o)}newOutliner(e,s,i,r,o,l=0){return new Df(e,s,i,r,o,l)}getNewOutline(e,s){const[i,r,o,l]=a(this,$o),[c,u,h,d]=a(this,Ml),f=o*h,p=l*d,m=i*h+c,v=r*d+u,S=this.newOutliner({x:a(this,pn)[0]*f+m,y:a(this,pn)[1]*p+v},a(this,Ml),a(this,kh),e,a(this,Ch),s??a(this,pi));for(let y=2;y<a(this,pn).length;y+=2)S.add({x:a(this,pn)[y]*f+m,y:a(this,pn)[y+1]*p+v});return S.getOutlines()}}Ml=new WeakMap,$o=new WeakMap,pi=new WeakMap,Ch=new WeakMap,pn=new WeakMap,kh=new WeakMap,Ut=new WeakMap,ep=new WeakSet,lx=function(e){const s=a(this,Ut);let i=s[4],r=s[5],o=i,l=r,c=i,u=r,h=i,d=r;const f=e?Math.max:Math.min;for(let m=6,v=s.length;m<v;m+=6){if(isNaN(s[m]))o=Math.min(o,s[m+4]),l=Math.min(l,s[m+5]),c=Math.max(c,s[m+4]),u=Math.max(u,s[m+5]),d<s[m+5]?(h=s[m+4],d=s[m+5]):d===s[m+5]&&(h=f(h,s[m+4]));else{const S=q.bezierBoundingBox(i,r,...s.slice(m,m+6));o=Math.min(o,S[0]),l=Math.min(l,S[1]),c=Math.max(c,S[2]),u=Math.max(u,S[3]),d<S[3]?(h=S[2],d=S[3]):d===S[3]&&(h=f(h,S[2]))}i=s[m+4],r=s[m+5]}const p=a(this,$o);p[0]=o-a(this,pi),p[1]=l-a(this,pi),p[2]=c-o+2*a(this,pi),p[3]=u-l+2*a(this,pi),this.lastPoint=[h,d]};var Th,Ph,ar,ss,Ve,cx,Qd,ux,hx,Km;class Ym{constructor(t,e=0,s=0,i=!0){A(this,Ve);A(this,Th);A(this,Ph);A(this,ar,[]);A(this,ss,[]);let r=1/0,o=-1/0,l=1/0,c=-1/0;const h=10**-4;for(const{x:y,y:w,width:x,height:_}of t){const C=Math.floor((y-e)/h)*h,T=Math.ceil((y+x+e)/h)*h,k=Math.floor((w-e)/h)*h,M=Math.ceil((w+_+e)/h)*h,I=[C,k,M,!0],O=[T,k,M,!1];a(this,ar).push(I,O),r=Math.min(r,C),o=Math.max(o,T),l=Math.min(l,k),c=Math.max(c,M)}const d=o-r+2*s,f=c-l+2*s,p=r-s,m=l-s,v=a(this,ar).at(i?-1:-2),S=[v[0],v[2]];for(const y of a(this,ar)){const[w,x,_]=y;y[0]=(w-p)/d,y[1]=(x-m)/f,y[2]=(_-m)/f}g(this,Th,new Float32Array([p,m,d,f])),g(this,Ph,S)}getOutlines(){a(this,ar).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of a(this,ar))e[3]?(t.push(...b(this,Ve,Km).call(this,e)),b(this,Ve,ux).call(this,e)):(b(this,Ve,hx).call(this,e),t.push(...b(this,Ve,Km).call(this,e)));return b(this,Ve,cx).call(this,t)}}Th=new WeakMap,Ph=new WeakMap,ar=new WeakMap,ss=new WeakMap,Ve=new WeakSet,cx=function(t){const e=[],s=new Set;for(const o of t){const[l,c,u]=o;e.push([l,c,o],[l,u,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[l,c,u,h,d]=o;s.delete(o);let f=l,p=c;for(r=[l,u],i.push(r);;){let m;if(s.has(h))m=h;else if(s.has(d))m=d;else break;s.delete(m),[l,c,u,h,d]=m,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new Pk(i,a(this,Th),a(this,Ph))},Qd=function(t){const e=a(this,ss);let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:i=r-1}return i+1},ux=function([,t,e]){const s=b(this,Ve,Qd).call(this,t);a(this,ss).splice(s,0,[t,e])},hx=function([,t,e]){const s=b(this,Ve,Qd).call(this,t);for(let i=s;i<a(this,ss).length;i++){const[r,o]=a(this,ss)[i];if(r!==t)break;if(r===t&&o===e){a(this,ss).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=a(this,ss)[i];if(r!==t)break;if(r===t&&o===e){a(this,ss).splice(i,1);return}}},Km=function(t){const[e,s,i]=t,r=[[e,s,i]],o=b(this,Ve,Qd).call(this,i);for(let l=0;l<o;l++){const[c,u]=a(this,ss)[l];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r};var Rh,Ll;class Pk extends G{constructor(e,s,i){super();A(this,Rh);A(this,Ll);g(this,Ll,e),g(this,Rh,s),this.lastPoint=i}toSVGPath(){const e=[];for(const s of a(this,Ll)){let[i,r]=s;e.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),i=l)}e.push("Z")}return e.join(" ")}serialize([e,s,i,r],o){const l=[],c=i-e,u=r-s;for(const h of a(this,Ll)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,Rh)}get classNamesForOutlining(){return["highlightOutline"]}}Rh=new WeakMap,Ll=new WeakMap;class Qm extends Df{newFreeDrawOutline(t,e,s,i,r,o){return new Rk(t,e,s,i,r,o)}}class Rk extends ax{newOutliner(t,e,s,i,r,o=0){return new Qm(t,e,s,i,r,o)}}var is,Ho,Nl,Jt,Mh,Il,Lh,Nh,lr,rs,Dl,Ih,wt,Zm,Jm,t0,Ur,dx,Di;const Ke=class Ke{constructor({editor:t=null,uiManager:e=null}){A(this,wt);A(this,is,null);A(this,Ho,null);A(this,Nl);A(this,Jt,null);A(this,Mh,!1);A(this,Il,!1);A(this,Lh,null);A(this,Nh);A(this,lr,null);A(this,rs,null);A(this,Dl);var s;t?(g(this,Il,!1),g(this,Dl,ut.HIGHLIGHT_COLOR),g(this,Lh,t)):(g(this,Il,!0),g(this,Dl,ut.HIGHLIGHT_DEFAULT_COLOR)),g(this,rs,(t==null?void 0:t._uiManager)||e),g(this,Nh,a(this,rs)._eventBus),g(this,Nl,(t==null?void 0:t.color)||((s=a(this,rs))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Ke,Ih)||g(Ke,Ih,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ot(this,"_keyboardManager",new qh([[["Escape","mac+Escape"],Ke.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ke.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ke.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ke.prototype._moveToPrevious],[["Home","mac+Home"],Ke.prototype._moveToBeginning],[["End","mac+End"],Ke.prototype._moveToEnd]]))}renderButton(){const t=g(this,is,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,rs)._signal;t.addEventListener("click",b(this,wt,Ur).bind(this),{signal:e}),t.addEventListener("keydown",b(this,wt,t0).bind(this),{signal:e});const s=g(this,Ho,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=a(this,Nl),t.append(s),t}renderMainDropdown(){const t=g(this,Jt,b(this,wt,Zm).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,is)){b(this,wt,Ur).call(this,t);return}const e=t.target.getAttribute("data-color");e&&b(this,wt,Jm).call(this,e,t)}_moveToNext(t){var e,s;if(!a(this,wt,Di)){b(this,wt,Ur).call(this,t);return}if(t.target===a(this,is)){(e=a(this,Jt).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=a(this,Jt))==null?void 0:e.firstChild)||t.target===a(this,is)){a(this,wt,Di)&&this._hideDropdownFromKeyboard();return}a(this,wt,Di)||b(this,wt,Ur).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!a(this,wt,Di)){b(this,wt,Ur).call(this,t);return}(e=a(this,Jt).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,wt,Di)){b(this,wt,Ur).call(this,t);return}(e=a(this,Jt).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,Jt))==null||t.classList.add("hidden"),(e=a(this,lr))==null||e.abort(),g(this,lr,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Il)){if(!a(this,wt,Di)){(t=a(this,Lh))==null||t.unselect();return}this.hideDropdown(),a(this,is).focus({preventScroll:!0,focusVisible:a(this,Mh)})}}updateColor(t){if(a(this,Ho)&&(a(this,Ho).style.backgroundColor=t),!a(this,Jt))return;const e=a(this,rs).highlightColors.values();for(const s of a(this,Jt).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,is))==null||t.remove(),g(this,is,null),g(this,Ho,null),(e=a(this,Jt))==null||e.remove(),g(this,Jt,null)}};is=new WeakMap,Ho=new WeakMap,Nl=new WeakMap,Jt=new WeakMap,Mh=new WeakMap,Il=new WeakMap,Lh=new WeakMap,Nh=new WeakMap,lr=new WeakMap,rs=new WeakMap,Dl=new WeakMap,Ih=new WeakMap,wt=new WeakSet,Zm=function(){const t=document.createElement("div"),e=a(this,rs)._signal;t.addEventListener("contextmenu",ps,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of a(this,rs).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",a(Ke,Ih)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===a(this,Nl)),r.addEventListener("click",b(this,wt,Jm).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",b(this,wt,t0).bind(this),{signal:e}),t},Jm=function(t,e){e.stopPropagation(),a(this,Nh).dispatch("switchannotationeditorparams",{source:this,type:a(this,Dl),value:t})},t0=function(t){Ke._keyboardManager.exec(this,t)},Ur=function(t){if(a(this,wt,Di)){this.hideDropdown();return}if(g(this,Mh,t.detail===0),a(this,lr)||(g(this,lr,new AbortController),window.addEventListener("pointerdown",b(this,wt,dx).bind(this),{signal:a(this,rs).combinedSignal(a(this,lr))})),a(this,Jt)){a(this,Jt).classList.remove("hidden");return}const e=g(this,Jt,b(this,wt,Zm).call(this));a(this,is).append(e)},dx=function(t){var e;(e=a(this,Jt))!=null&&e.contains(t.target)||this.hideDropdown()},Di=function(){return a(this,Jt)&&!a(this,Jt).classList.contains("hidden")},A(Ke,Ih,null);let Ff=Ke;var Fl,Dh,gi,Bo,Ol,Je,Fh,Oh,Uo,Nn,gn,ge,jl,mi,Pe,zl,In,jh,tt,e0,Zd,fx,px,gx,n0,Gr,$n,xa,mx,Jd,Dc,yx,vx,wx,Ax,bx;const gt=class gt extends Ft{constructor(e){super({...e,name:"highlightEditor"});A(this,tt);A(this,Fl,null);A(this,Dh,0);A(this,gi);A(this,Bo,null);A(this,Ol,null);A(this,Je,null);A(this,Fh,null);A(this,Oh,0);A(this,Uo,null);A(this,Nn,null);A(this,gn,null);A(this,ge,!1);A(this,jl,null);A(this,mi);A(this,Pe,null);A(this,zl,"");A(this,In);A(this,jh,"");this.color=e.color||gt._defaultColor,g(this,In,e.thickness||gt._defaultThickness),g(this,mi,e.opacity||gt._defaultOpacity),g(this,gi,e.boxes||null),g(this,jh,e.methodOfCreation||""),g(this,zl,e.text||""),this._isDraggable=!1,e.highlightId>-1?(g(this,ge,!0),b(this,tt,Zd).call(this,e),b(this,tt,Gr).call(this)):a(this,gi)&&(g(this,Fl,e.anchorNode),g(this,Dh,e.anchorOffset),g(this,Fh,e.focusNode),g(this,Oh,e.focusOffset),b(this,tt,e0).call(this),b(this,tt,Gr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=gt.prototype;return ot(this,"_keyboardManager",new qh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,ge)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,In),methodOfCreation:a(this,jh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var i;Ft.initialize(e,s),gt._defaultColor||(gt._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case ut.HIGHLIGHT_DEFAULT_COLOR:gt._defaultColor=s;break;case ut.HIGHLIGHT_THICKNESS:gt._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return a(this,jl)}updateParams(e,s){switch(e){case ut.HIGHLIGHT_COLOR:b(this,tt,fx).call(this,s);break;case ut.HIGHLIGHT_THICKNESS:b(this,tt,px).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ut.HIGHLIGHT_DEFAULT_COLOR,gt._defaultColor],[ut.HIGHLIGHT_THICKNESS,gt._defaultThickness]]}get propertiesToUpdate(){return[[ut.HIGHLIGHT_COLOR,this.color||gt._defaultColor],[ut.HIGHLIGHT_THICKNESS,a(this,In)||gt._defaultThickness],[ut.HIGHLIGHT_FREE,a(this,ge)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(g(this,Ol,new Ff({editor:this})),e.addColorPicker(a(this,Ol))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(b(this,tt,Dc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,b(this,tt,Dc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){b(this,tt,n0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,tt,Gr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?b(this,tt,n0).call(this):e&&(b(this,tt,Gr).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,l;const{drawLayer:s}=this.parent;let i;a(this,ge)?(e=(e-this.rotation+360)%360,i=b(r=gt,$n,xa).call(r,a(this,Nn).box,e)):i=b(o=gt,$n,xa).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(a(this,gn),{bbox:i,root:{"data-main-rotation":e}}),s.updateProperties(a(this,Pe),{bbox:b(l=gt,$n,xa).call(l,a(this,Je).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,zl)&&(e.setAttribute("aria-label",a(this,zl)),e.setAttribute("role","mark")),a(this,ge)?e.classList.add("free"):this.div.addEventListener("keydown",b(this,tt,mx).bind(this),{signal:this._uiManager._signal});const s=g(this,Uo,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=a(this,Bo);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Lf(this,a(this,Uo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Pe),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Pe),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:b(this,tt,Jd).call(this,!0);break;case 1:case 3:b(this,tt,Jd).call(this,!1);break}}select(){var e;super.select(),a(this,Pe)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Pe),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,Pe)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Pe),{rootClass:{selected:!1}}),a(this,ge)||b(this,tt,Jd).call(this,!1))}get _mustFixPosition(){return!a(this,ge)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,gn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,Pe),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:i,x:r,y:o}){const{x:l,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=m=>{d.abort(),b(this,$n,Ax).call(this,e,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",xn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ps,{signal:f}),i.addEventListener("pointermove",b(this,$n,wx).bind(this,e),{signal:f}),this._freeHighlight=new Qm({x:r,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,i){var v,S,y,w;let r=null;if(e instanceof Xb){const{data:{quadPoints:x,rect:_,rotation:C,id:T,color:k,opacity:M,popupRef:I},parent:{page:{pageNumber:O}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(k),opacity:M,quadPoints:x,boxes:null,pageIndex:O-1,rect:_.slice(0),rotation:C,id:T,deleted:!1,popupRef:I}}else if(e instanceof xy){const{data:{inkLists:x,rect:_,rotation:C,id:T,color:k,borderStyle:{rawWidth:M},popupRef:I},parent:{page:{pageNumber:O}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(k),thickness:M,inkLists:x,boxes:null,pageIndex:O-1,rect:_.slice(0),rotation:C,id:T,deleted:!1,popupRef:I}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,s,i);h.color=q.makeHexColor(...o),g(h,mi,u||1),c&&g(h,In,e.thickness),h.annotationElementId=e.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(l){const x=g(h,gi,[]);for(let _=0;_<l.length;_+=8)x.push({x:(l[_]-p)/d,y:1-(l[_+1]-m)/f,width:(l[_+2]-l[_])/d,height:(l[_+1]-l[_+5])/f});b(v=h,tt,e0).call(v),b(S=h,tt,Gr).call(S),h.rotate(h.rotation)}else if(c){g(h,ge,!0);const x=c[0],_={x:x[0]-p,y:f-(x[1]-m)},C=new Qm(_,[0,0,d,f],1,a(h,In)/2,!0,.001);for(let M=0,I=x.length;M<I;M+=2)_.x=x[M]-p,_.y=f-(x[M+1]-m),C.add(_);const{id:T,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);b(y=h,tt,Zd).call(y,{highlightOutlines:C.getOutlines(),highlightId:T,clipPathId:k}),b(w=h,tt,Gr).call(w)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=Ft._colorManager.convert(this.color),r={annotationType:et.HIGHLIGHT,color:i,opacity:a(this,mi),thickness:a(this,In),quadPoints:b(this,tt,yx).call(this),outlines:b(this,tt,vx).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:b(this,tt,Dc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!b(this,tt,bx).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Fl=new WeakMap,Dh=new WeakMap,gi=new WeakMap,Bo=new WeakMap,Ol=new WeakMap,Je=new WeakMap,Fh=new WeakMap,Oh=new WeakMap,Uo=new WeakMap,Nn=new WeakMap,gn=new WeakMap,ge=new WeakMap,jl=new WeakMap,mi=new WeakMap,Pe=new WeakMap,zl=new WeakMap,In=new WeakMap,jh=new WeakMap,tt=new WeakSet,e0=function(){const e=new Ym(a(this,gi),.001);g(this,Nn,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Nn).box;const s=new Ym(a(this,gi),.0025,.001,this._uiManager.direction==="ltr");g(this,Je,s.getOutlines());const{lastPoint:i}=a(this,Je);g(this,jl,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Zd=function({highlightOutlines:e,highlightId:s,clipPathId:i}){var d,f;if(g(this,Nn,e),g(this,Je,e.getNewOutline(a(this,In)/2+1.5,.0025)),s>=0)g(this,gn,s),g(this,Bo,i),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),g(this,Pe,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Je).box,path:{d:a(this,Je).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,gn),{bbox:b(d=gt,$n,xa).call(d,a(this,Nn).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Pe),{bbox:b(f=gt,$n,xa).call(f,a(this,Je).box,p),path:{d:a(this,Je).toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=a(this,Je);g(this,jl,[(h[0]-o)/c,(h[1]-l)/u])},fx=function(e){const s=(o,l)=>{var c,u;this.color=o,g(this,mi,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,gn),{root:{fill:o,"fill-opacity":l}}),(u=a(this,Ol))==null||u.updateColor(o)},i=this.color,r=a(this,mi);this.addCommands({cmd:s.bind(this,e,gt._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},px=function(e){const s=a(this,In),i=r=>{g(this,In,r),b(this,tt,gx).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},gx=function(e){if(!a(this,ge))return;b(this,tt,Zd).call(this,{highlightOutlines:a(this,Nn).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},n0=function(){a(this,gn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,gn)),g(this,gn,null),this.parent.drawLayer.remove(a(this,Pe)),g(this,Pe,null))},Gr=function(e=this.parent){a(this,gn)===null&&({id:De(this,gn)._,clipPathId:De(this,Bo)._}=e.drawLayer.draw({bbox:a(this,Nn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,mi)},rootClass:{highlight:!0,free:a(this,ge)},path:{d:a(this,Nn).toSVGPath()}},!1,!0),g(this,Pe,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,ge)},bbox:a(this,Je).box,path:{d:a(this,Je).toSVGPath()}},a(this,ge))),a(this,Uo)&&(a(this,Uo).style.clipPath=a(this,Bo)))},$n=new WeakSet,xa=function([e,s,i,r],o){switch(o){case 90:return[1-s-r,e,r,i];case 180:return[1-e-i,1-s-r,i,r];case 270:return[s,1-e-i,r,i]}return[e,s,i,r]},mx=function(e){gt._keyboardManager.exec(this,e)},Jd=function(e){if(!a(this,Fl))return;const s=window.getSelection();e?s.setPosition(a(this,Fl),a(this,Dh)):s.setPosition(a(this,Fh),a(this,Oh))},Dc=function(){return a(this,ge)?this.rotation:0},yx=function(){if(a(this,ge))return null;const[e,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=a(this,gi),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+i,m=(1-h)*s+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=m,l[c+2]=l[c+6]=p+d*e,l[c+5]=l[c+7]=m-f*s,c+=8}return l},vx=function(e){return a(this,Nn).serialize(e,b(this,tt,Dc).call(this))},wx=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Ax=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},bx=function(e){const{color:s}=this._initialData;return e.color.some((i,r)=>i!==s[r])},A(gt,$n),Y(gt,"_defaultColor",null),Y(gt,"_defaultOpacity",1),Y(gt,"_defaultThickness",12),Y(gt,"_type","highlight"),Y(gt,"_editorType",et.HIGHLIGHT),Y(gt,"_freeHighlightId",-1),Y(gt,"_freeHighlight",null),Y(gt,"_freeHighlightClipId","");let Of=gt;var Go;class Mk{constructor(){A(this,Go,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))this.updateProperty(e,s)}updateSVGProperty(t,e){a(this,Go)[t]=e}toSVGProperties(){const t=a(this,Go);return g(this,Go,Object.create(null)),{root:t}}reset(){g(this,Go,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){bt("Not implemented")}}Go=new WeakMap;var mn,$l,ae,Vo,Wo,cr,ur,hr,Xo,dt,i0,r0,o0,Fc,xx,tf,Oc,Sa;const W=class W extends Ft{constructor(e){super(e);A(this,dt);A(this,mn,null);A(this,$l);Y(this,"_drawId",null);g(this,$l,e.mustBeCommitted||!1),e.drawOutlines&&(b(this,dt,i0).call(this,e),b(this,dt,Fc).call(this))}static _mergeSVGProperties(e,s){const i=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){bt("Not implemented")}static get typesMap(){bt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(a(W,ae).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,s[r]]);return e}_updateProperty(e,s,i){const r=this._drawingOptions,o=r[s],l=c=>{var h;r.updateProperty(s,c);const u=a(this,mn).updateProperty(s,c);u&&b(this,dt,Oc).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties(a(this,mn).getPathResizingSVGProperties(b(this,dt,tf).call(this)),{bbox:b(this,dt,Sa).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties(a(this,mn).getPathResizedSVGProperties(b(this,dt,tf).call(this)),{bbox:b(this,dt,Sa).call(this)}))}_onTranslating(e,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:b(this,dt,Sa).call(this,e,s)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties(a(this,mn).getPathTranslatedSVGProperties(b(this,dt,tf).call(this),this.parentDimensions),{bbox:b(this,dt,Sa).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,$l)&&(g(this,$l,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){b(this,dt,o0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,dt,Fc).call(this),b(this,dt,Oc).call(this,a(this,mn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),b(this,dt,o0).call(this)):e&&(this._uiManager.addShouldRescale(this),b(this,dt,Fc).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,W._mergeSVGProperties({bbox:b(this,dt,Sa).call(this)},a(this,mn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&b(this,dt,Oc).call(this,a(this,mn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const s=document.createElement("div");e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,s,i,r,o){bt("Not implemented")}static startDrawing(e,s,i,r){var S;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a(W,ur)&&a(W,ur)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),m=g(W,Vo,new AbortController),v=e.combinedSignal(m);if(a(W,cr)||g(W,cr,u),a(W,ur)??g(W,ur,h),window.addEventListener("pointerup",y=>{var w;a(W,cr)===y.pointerId?this._endDraw(y):(w=a(W,hr))==null||w.delete(y.pointerId)},{signal:v}),window.addEventListener("pointercancel",y=>{var w;a(W,cr)===y.pointerId?this._currentParent.endDrawingSession():(w=a(W,hr))==null||w.delete(y.pointerId)},{signal:v}),window.addEventListener("pointerdown",y=>{a(W,ur)===y.pointerType&&((a(W,hr)||g(W,hr,new Set)).add(y.pointerId),a(W,ae).isCancellable()&&(a(W,ae).removeLastElement(),a(W,ae).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",ps,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",y=>{y.timeStamp===a(W,Xo)&&xn(y)},{signal:v}),e.toggleDrawing(),(S=s._editorUndoBar)==null||S.hide(),a(W,ae)){e.drawLayer.updateProperties(this._currentDrawId,a(W,ae).startNew(l,c,f,p,d));return}s.updateUIForDefaultProperties(this),g(W,ae,this.createDrawerInstance(l,c,f,p,d)),g(W,Wo,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(W,Wo).toSVGProperties(),a(W,ae).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(g(W,Xo,-1),!a(W,ae))return;const{offsetX:s,offsetY:i,pointerId:r}=e;if(a(W,cr)===r){if(((o=a(W,hr))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(W,ae).add(s,i)),g(W,Xo,e.timeStamp),xn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,g(W,ae,null),g(W,Wo,null),g(W,ur,null),g(W,Xo,NaN)),a(W,Vo)&&(a(W,Vo).abort(),g(W,Vo,null),g(W,cr,NaN),g(W,hr,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),e&&s.drawLayer.updateProperties(this._currentDrawId,a(W,ae).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=a(W,ae),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:ut.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ut.DRAW_STEP),!a(W,ae).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(W,ae).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(W,Wo),mustBeCommitted:!e});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,i,r,o,l){bt("Not implemented")}static async deserialize(e,s,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,s,i);return h.createDrawingOptions(e),b(d=h,dt,i0).call(d,{drawOutlines:u}),b(f=h,dt,Fc).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,mn).serialize([s,i,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};mn=new WeakMap,$l=new WeakMap,ae=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,cr=new WeakMap,ur=new WeakMap,hr=new WeakMap,Xo=new WeakMap,dt=new WeakSet,i0=function({drawOutlines:e,drawId:s,drawingOptions:i}){g(this,mn,e),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=b(this,dt,r0).call(this,e,this.parent),b(this,dt,Oc).call(this,e.box)},r0=function(e,s){const{id:i}=s.drawLayer.draw(W._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},o0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Fc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=b(this,dt,r0).call(this,a(this,mn),e)}},xx=function([e,s,i,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-e,i*(l/o),r*(o/l)];case 180:return[1-e,1-s,i,r];case 270:return[1-s,e,i*(l/o),r*(o/l)];default:return[e,s,i,r]}},tf=function(){const{x:e,y:s,width:i,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,e,i*(o/l),r*(l/o)];case 180:return[1-e,1-s,i,r];case 270:return[s,1-e,i*(o/l),r*(l/o)];default:return[e,s,i,r]}},Oc=function(e){if([this.x,this.y,this.width,this.height]=b(this,dt,xx).call(this,e),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},Sa=function(){const{x:e,y:s,width:i,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-s-r,e,r,i];case 2:return[1-e-i,1-s-r,i,r];case 3:return[s,1-e-i,r,i];case 4:return[e,s-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-s,e,i*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-s,r*(u/c),i*(c/u)];case 7:return[s-i*(c/u),1-e-r*(u/c),i*(c/u),r*(u/c)];case 8:return[e-i,s-r,i,r];case 9:return[1-s,e-i,r,i];case 10:return[1-e,1-s,i,r];case 11:return[s-r,1-e,r,i];case 12:return[e-r*(u/c),s,r*(u/c),i*(c/u)];case 13:return[1-s-i*(c/u),e-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-e,1-s-i*(c/u),r*(u/c),i*(c/u)];case 15:return[s,1-e,i*(c/u),r*(u/c)];default:return[e,s,i,r]}},Y(W,"_currentDrawId",-1),Y(W,"_currentParent",null),A(W,ae,null),A(W,Vo,null),A(W,Wo,null),A(W,cr,NaN),A(W,ur,null),A(W,hr,null),A(W,Xo,NaN),Y(W,"_INNER_MARGIN",3);let s0=W;var Ns,le,ce,qo,Hl,je,me,Dn,Yo,Ko,Qo,Bl,ef;class Lk{constructor(t,e,s,i,r,o){A(this,Bl);A(this,Ns,new Float64Array(6));A(this,le);A(this,ce);A(this,qo);A(this,Hl);A(this,je);A(this,me,"");A(this,Dn,0);A(this,Yo,new jf);A(this,Ko);A(this,Qo);g(this,Ko,s),g(this,Qo,i),g(this,qo,r),g(this,Hl,o),[t,e]=b(this,Bl,ef).call(this,t,e);const l=g(this,le,[NaN,NaN,NaN,NaN,t,e]);g(this,je,[t,e]),g(this,ce,[{line:l,points:a(this,je)}]),a(this,Ns).set(l,0)}updateProperty(t,e){t==="stroke-width"&&g(this,Hl,e)}isEmpty(){return!a(this,ce)||a(this,ce).length===0}isCancellable(){return a(this,je).length<=10}add(t,e){[t,e]=b(this,Bl,ef).call(this,t,e);const[s,i,r,o]=a(this,Ns).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,Ko)*l,a(this,Qo)*c)<=2?null:(a(this,je).push(t,e),isNaN(s)?(a(this,Ns).set([r,o,t,e],2),a(this,le).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Ns)[0])&&a(this,le).splice(6,6),a(this,Ns).set([s,i,r,o,t,e],0),a(this,le).push(...G.createBezierPoints(s,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(a(this,je).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){g(this,Ko,s),g(this,Qo,i),g(this,qo,r),[t,e]=b(this,Bl,ef).call(this,t,e);const o=g(this,le,[NaN,NaN,NaN,NaN,t,e]);g(this,je,[t,e]);const l=a(this,ce).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,ce).push({line:o,points:a(this,je)}),a(this,Ns).set(o,0),g(this,Dn,0),this.toSVGPath(),null}getLastElement(){return a(this,ce).at(-1)}setLastElement(t){return a(this,ce)?(a(this,ce).push(t),g(this,le,t.line),g(this,je,t.points),g(this,Dn,0),{path:{d:this.toSVGPath()}}):a(this,Yo).setLastElement(t)}removeLastElement(){if(!a(this,ce))return a(this,Yo).removeLastElement();a(this,ce).pop(),g(this,me,"");for(let t=0,e=a(this,ce).length;t<e;t++){const{line:s,points:i}=a(this,ce)[t];g(this,le,s),g(this,je,i),g(this,Dn,0),this.toSVGPath()}return{path:{d:a(this,me)}}}toSVGPath(){const t=G.svgRound(a(this,le)[4]),e=G.svgRound(a(this,le)[5]);if(a(this,je).length===2)return g(this,me,`${a(this,me)} M ${t} ${e} Z`),a(this,me);if(a(this,je).length<=6){const i=a(this,me).lastIndexOf("M");g(this,me,`${a(this,me).slice(0,i)} M ${t} ${e}`),g(this,Dn,6)}if(a(this,je).length===4){const i=G.svgRound(a(this,le)[10]),r=G.svgRound(a(this,le)[11]);return g(this,me,`${a(this,me)} L ${i} ${r}`),g(this,Dn,12),a(this,me)}const s=[];a(this,Dn)===0&&(s.push(`M ${t} ${e}`),g(this,Dn,6));for(let i=a(this,Dn),r=a(this,le).length;i<r;i+=6){const[o,l,c,u,h,d]=a(this,le).slice(i,i+6).map(G.svgRound);s.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return g(this,me,a(this,me)+s.join(" ")),g(this,Dn,a(this,le).length),a(this,me)}getOutlines(t,e,s,i){const r=a(this,ce).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Yo).build(a(this,ce),t,e,s,a(this,qo),a(this,Hl),i),g(this,Ns,null),g(this,le,null),g(this,ce,null),g(this,me,null),a(this,Yo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ns=new WeakMap,le=new WeakMap,ce=new WeakMap,qo=new WeakMap,Hl=new WeakMap,je=new WeakMap,me=new WeakMap,Dn=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Qo=new WeakMap,Bl=new WeakSet,ef=function(t,e){return G._normalizePoint(t,e,a(this,Ko),a(this,Qo),a(this,qo))};var ze,zh,$h,yn,Is,Ds,Ul,Gl,Vl,we,Vs,Sx,_x,Ex;const Py=class Py extends G{constructor(){super(...arguments);A(this,we);A(this,ze);A(this,zh,0);A(this,$h);A(this,yn);A(this,Is);A(this,Ds);A(this,Ul);A(this,Gl);A(this,Vl)}build(e,s,i,r,o,l,c){g(this,Is,s),g(this,Ds,i),g(this,Ul,r),g(this,Gl,o),g(this,Vl,l),g(this,$h,c??0),g(this,yn,e),b(this,we,_x).call(this)}setLastElement(e){return a(this,yn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,yn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of a(this,yn)){if(e.push(`M${G.svgRound(s[4])} ${G.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12){e.push(`L${G.svgRound(s[10])} ${G.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,l,c,u,h,d]=s.subarray(i,i+6).map(G.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,s,i,r],o){const l=[],c=[],[u,h,d,f]=b(this,we,Sx).call(this);let p,m,v,S,y,w,x,_,C;switch(a(this,Gl)){case 0:C=G._rescale,p=e,m=s+r,v=i,S=-r,y=e+u*i,w=s+(1-h-f)*r,x=e+(u+d)*i,_=s+(1-h)*r;break;case 90:C=G._rescaleAndSwap,p=e,m=s,v=i,S=r,y=e+h*i,w=s+u*r,x=e+(h+f)*i,_=s+(u+d)*r;break;case 180:C=G._rescale,p=e+i,m=s,v=-i,S=r,y=e+(1-u-d)*i,w=s+h*r,x=e+(1-u)*i,_=s+(h+f)*r;break;case 270:C=G._rescaleAndSwap,p=e+i,m=s+r,v=-i,S=-r,y=e+(1-h-f)*i,w=s+(1-u-d)*r,x=e+(1-h)*i,_=s+(1-u)*r;break}for(const{line:T,points:k}of a(this,yn))l.push(C(T,p,m,v,S,o?new Array(T.length):null)),c.push(C(k,p,m,v,S,o?new Array(k.length):null));return{lines:l,points:c,rect:[y,w,x,_]}}static deserialize(e,s,i,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,p,m,v,S;switch(u){case 0:S=G._rescale,f=-e/i,p=s/r+1,m=1/i,v=-1/r;break;case 90:S=G._rescaleAndSwap,f=-s/r,p=-e/i,m=1/r,v=1/i;break;case 180:S=G._rescale,f=e/i+1,p=-s/r,m=-1/i,v=1/r;break;case 270:S=G._rescaleAndSwap,f=s/r+1,p=e/i+1,m=-1/r,v=-1/i;break}if(!l){l=[];for(const w of c){const x=w.length;if(x===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(x===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const _=new Float32Array(3*(x-2));l.push(_);let[C,T,k,M]=w.subarray(0,4);_.set([NaN,NaN,NaN,NaN,C,T],0);for(let I=4;I<x;I+=2){const O=w[I],B=w[I+1];_.set(G.createBezierPoints(C,T,k,M,O,B),(I-2)*3),[C,T,k,M]=[k,M,O,B]}}}for(let w=0,x=l.length;w<x;w++)d.push({line:S(l[w].map(_=>_??NaN),f,p,m,v),points:S(c[w].map(_=>_??NaN),f,p,m,v)});const y=new Py;return y.build(d,i,r,1,u,h,o),y}get box(){return a(this,ze)}updateProperty(e,s){return e==="stroke-width"?b(this,we,Ex).call(this,s):null}updateParentDimensions([e,s],i){const[r,o]=b(this,we,Vs).call(this);g(this,Is,e),g(this,Ds,s),g(this,Ul,i);const[l,c]=b(this,we,Vs).call(this),u=l-r,h=c-o,d=a(this,ze);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return g(this,zh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,ze).map(G.svgRound).join(" ")}get defaultProperties(){const[e,s]=a(this,ze);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(e)} ${G.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=a(this,ze);let i=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,zh)){case 90:r=s/e,o=-e/s,c=e;break;case 180:i=-1,l=-1,c=e,u=s;break;case 270:r=-s/e,o=e/s,u=s;break;default:return""}return`matrix(${i} ${r} ${o} ${l} ${G.svgRound(c)} ${G.svgRound(u)})`}getPathResizingSVGProperties([e,s,i,r]){const[o,l]=b(this,we,Vs).call(this),[c,u,h,d]=a(this,ze);if(Math.abs(h-o)<=G.PRECISION||Math.abs(d-l)<=G.PRECISION){const S=e+i/2-(c+h/2),y=s+r/2-(u+d/2);return{path:{"transform-origin":`${G.svgRound(e)} ${G.svgRound(s)}`,transform:`${this.rotationTransform} translate(${S} ${y})`}}}const f=(i-2*o)/(h-2*o),p=(r-2*l)/(d-2*l),m=h/i,v=d/r;return{path:{"transform-origin":`${G.svgRound(c)} ${G.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${v}) translate(${G.svgRound(o)} ${G.svgRound(l)}) scale(${f} ${p}) translate(${G.svgRound(-o)} ${G.svgRound(-l)})`}}}getPathResizedSVGProperties([e,s,i,r]){const[o,l]=b(this,we,Vs).call(this),c=a(this,ze),[u,h,d,f]=c;if(c[0]=e,c[1]=s,c[2]=i,c[3]=r,Math.abs(d-o)<=G.PRECISION||Math.abs(f-l)<=G.PRECISION){const y=e+i/2-(u+d/2),w=s+r/2-(h+f/2);for(const{line:x,points:_}of a(this,yn))G._translate(x,y,w,x),G._translate(_,y,w,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(e)} ${G.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(d-2*o),m=(r-2*l)/(f-2*l),v=-p*(u+o)+e+o,S=-m*(h+l)+s+l;if(p!==1||m!==1||v!==0||S!==0)for(const{line:y,points:w}of a(this,yn))G._rescale(y,v,S,p,m,y),G._rescale(w,v,S,p,m,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${G.svgRound(e)} ${G.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],i){const[r,o]=i,l=a(this,ze),c=e-l[0],u=s-l[1];if(a(this,Is)===r&&a(this,Ds)===o)for(const{line:h,points:d}of a(this,yn))G._translate(h,c,u,h),G._translate(d,c,u,d);else{const h=a(this,Is)/r,d=a(this,Ds)/o;g(this,Is,r),g(this,Ds,o);for(const{line:f,points:p}of a(this,yn))G._rescale(f,c,u,h,d,f),G._rescale(p,c,u,h,d,p);l[2]*=h,l[3]*=d}return l[0]=e,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${G.svgRound(e)} ${G.svgRound(s)}`}}}get defaultSVGProperties(){const e=a(this,ze);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${G.svgRound(e[0])} ${G.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};ze=new WeakMap,zh=new WeakMap,$h=new WeakMap,yn=new WeakMap,Is=new WeakMap,Ds=new WeakMap,Ul=new WeakMap,Gl=new WeakMap,Vl=new WeakMap,we=new WeakSet,Vs=function(e=a(this,Vl)){const s=a(this,$h)+e/2*a(this,Ul);return a(this,Gl)%180===0?[s/a(this,Is),s/a(this,Ds)]:[s/a(this,Ds),s/a(this,Is)]},Sx=function(){const[e,s,i,r]=a(this,ze),[o,l]=b(this,we,Vs).call(this,0);return[e+o,s+l,i-2*o,r-2*l]},_x=function(){const e=g(this,ze,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,yn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6){const[h,d]=r.subarray(c,c+2);e[0]=Math.min(e[0],h),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],h),e[3]=Math.max(e[3],d)}continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,m,v]=r.subarray(c,c+6);q.bezierBoundingBox(o,l,h,d,f,p,m,v,e),o=m,l=v}}const[s,i]=b(this,we,Vs).call(this);e[0]=Math.min(1,Math.max(0,e[0]-s)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+s)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]},Ex=function(e){const[s,i]=b(this,we,Vs).call(this);g(this,Vl,e);const[r,o]=b(this,we,Vs).call(this),[l,c]=[r-s,o-i],u=a(this,ze);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};let jf=Py;var Wl;const Ry=class Ry extends Mk{constructor(e){super();A(this,Wl);g(this,Wl,e),super.updateProperties({fill:"none",stroke:Ft._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,s){e==="stroke-width"&&(s??(s=this["stroke-width"]),s*=a(this,Wl).realScale),super.updateSVGProperty(e,s)}clone(){const e=new Ry(a(this,Wl));return e.updateAll(this),e}};Wl=new WeakMap;let a0=Ry;var np,Cx;const Oa=class Oa extends s0{constructor(e){super({...e,name:"inkEditor"});A(this,np);this._willKeepAspectRatio=!0}static initialize(e,s){Ft.initialize(e,s),this._defaultDrawingOptions=new a0(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return ot(this,"typesMap",new Map([[ut.INK_THICKNESS,"stroke-width"],[ut.INK_COLOR,"stroke"],[ut.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,i,r,o){return new Lk(e,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,i,r,o,l){return jf.deserialize(e,s,i,r,o,l)}static async deserialize(e,s,i){let r=null;if(e instanceof xy){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:m},parent:{page:{pageNumber:v}}}=e;r=e={annotationType:et.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:v-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:m}}const o=await super.deserialize(e,s,i);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:i}){this._drawingOptions=Oa.getDefaultDrawingOptions({stroke:q.makeHexColor(...e),"stroke-width":s,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,u={annotationType:et.INK,color:Ft._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!b(this,np,Cx).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:s,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};np=new WeakSet,Cx=function(e){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==s[c])||e.thickness!==i||e.opacity!==r||e.pageIndex!==o},Y(Oa,"_type","ink"),Y(Oa,"_editorType",et.INK),Y(Oa,"_defaultDrawingOptions",null);let l0=Oa;var It,ye,dr,yi,fr,Xl,Fs,Os,vn,ql,pt,jc,zc,nf,u0,sf,h0,rf,kx;const Kc=class Kc extends Ft{constructor(e){super({...e,name:"stampEditor"});A(this,pt);A(this,It,null);A(this,ye,null);A(this,dr,null);A(this,yi,null);A(this,fr,null);A(this,Xl,"");A(this,Fs,null);A(this,Os,null);A(this,vn,!1);A(this,ql,!1);g(this,yi,e.bitmapUrl),g(this,fr,e.bitmapFile)}static initialize(e,s){Ft.initialize(e,s)}static get supportedTypes(){return ot(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return ot(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,s){s.pasteEditor(et.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;a(this,ye)&&(g(this,It,null),this._uiManager.imageManager.deleteId(a(this,ye)),(e=a(this,Fs))==null||e.remove(),g(this,Fs,null),a(this,Os)&&(clearTimeout(a(this,Os)),g(this,Os,null))),super.remove()}rebuild(){if(!this.parent){a(this,ye)&&b(this,pt,nf).call(this);return}super.rebuild(),this.div!==null&&(a(this,ye)&&a(this,Fs)===null&&b(this,pt,nf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,dr)||a(this,It)||a(this,yi)||a(this,fr)||a(this,ye))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;if(this.width&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),a(this,It)?b(this,pt,u0).call(this):b(this,pt,nf).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Os)!==null&&clearTimeout(a(this,Os)),g(this,Os,setTimeout(()=>{g(this,Os,null),b(this,pt,h0).call(this)},200))}copyCanvas(e,s,i=!1){var p;e||(e=224);const{width:r,height:o}=a(this,It),l=new am;let c=a(this,It),u=r,h=o,d=null;if(s){if(r>s||o>s){const M=Math.min(s/r,s/o);u=Math.floor(r*M),h=Math.floor(o*M)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*l.sx),v=d.height=Math.ceil(h*l.sy);a(this,vn)||(c=b(this,pt,sf).call(this,m,v));const S=d.getContext("2d");S.filter=this._uiManager.hcmFilter;let y="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",w="#42414d");const x=15,_=x*l.sx,C=x*l.sy,T=new OffscreenCanvas(_*2,C*2),k=T.getContext("2d");k.fillStyle=y,k.fillRect(0,0,_*2,C*2),k.fillStyle=w,k.fillRect(0,0,_,C),k.fillRect(_,C,_,C),S.fillStyle=S.createPattern(T,"repeat"),S.fillRect(0,0,m,v),S.drawImage(c,0,0,c.width,c.height,0,0,m,v)}let f=null;if(i){let m,v;if(l.symmetric&&c.width<e&&c.height<e)m=c.width,v=c.height;else if(c=a(this,It),r>e||o>e){const w=Math.min(e/r,e/o);m=Math.floor(r*w),v=Math.floor(o*w),a(this,vn)||(c=b(this,pt,sf).call(this,m,v))}const y=new OffscreenCanvas(m,v).getContext("2d",{willReadFrequently:!0});y.drawImage(c,0,0,c.width,c.height,0,0,m,v),f={width:m,height:v,data:y.getImageData(0,0,m,v).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return a(this,Fs)}static async deserialize(e,s,i){var v;let r=null;if(e instanceof qb){const{data:{rect:S,rotation:y,id:w,structParent:x,popupRef:_},container:C,parent:{page:{pageNumber:T}}}=e,k=C.querySelector("canvas"),M=i.imageManager.getFromCanvas(C.id,k);k.remove();const I=((v=await s._structTree.getAriaAttributes(`${py}${w}`))==null?void 0:v.get("aria-label"))||"";r=e={annotationType:et.STAMP,bitmapId:M.id,bitmap:M.bitmap,pageIndex:T-1,rect:S.slice(0),rotation:y,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:x,popupRef:_}}const o=await super.deserialize(e,s,i),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=e;h&&i.imageManager.isValidId(h)?(g(o,ye,h),c&&g(o,It,c)):g(o,yi,u),g(o,vn,d);const[p,m]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/m,o.annotationElementId=e.id||null,f&&(o.altTextData=f),o._initialData=r,g(o,ql,!!r),o}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:et.STAMP,bitmapId:a(this,ye),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,vn),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=b(this,pt,rf).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=b(this,pt,kx).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const l=a(this,vn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(a(this,ye)))s.stamps.set(a(this,ye),{area:l,serialized:i}),i.bitmap=b(this,pt,rf).call(this,!1);else if(a(this,vn)){const c=s.stamps.get(a(this,ye));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=b(this,pt,rf).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};It=new WeakMap,ye=new WeakMap,dr=new WeakMap,yi=new WeakMap,fr=new WeakMap,Xl=new WeakMap,Fs=new WeakMap,Os=new WeakMap,vn=new WeakMap,ql=new WeakMap,pt=new WeakSet,jc=function(e,s=!1){if(!e){this.remove();return}g(this,It,e.bitmap),s||(g(this,ye,e.id),g(this,vn,e.isSvg)),e.file&&g(this,Xl,e.file.name),b(this,pt,u0).call(this)},zc=function(){if(g(this,dr,null),this._uiManager.enableWaiting(!1),!!a(this,Fs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,It)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,It)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},nf=function(){if(a(this,ye)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,ye)).then(i=>b(this,pt,jc).call(this,i,!0)).finally(()=>b(this,pt,zc).call(this));return}if(a(this,yi)){const i=a(this,yi);g(this,yi,null),this._uiManager.enableWaiting(!0),g(this,dr,this._uiManager.imageManager.getFromUrl(i).then(r=>b(this,pt,jc).call(this,r)).finally(()=>b(this,pt,zc).call(this)));return}if(a(this,fr)){const i=a(this,fr);g(this,fr,null),this._uiManager.enableWaiting(!0),g(this,dr,this._uiManager.imageManager.getFromFile(i).then(r=>b(this,pt,jc).call(this,r)).finally(()=>b(this,pt,zc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Kc.supportedTypesStr;const s=this._uiManager._signal;g(this,dr,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),b(this,pt,jc).call(this,r)}i()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>b(this,pt,zc).call(this))),e.click()},u0=function(){var d;const{div:e}=this;let{width:s,height:i}=a(this,It);const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>l*r||i>l*o){const f=Math.min(l*r/s,l*o/i);s*=f,i*=f}const[c,u]=this.parentDimensions;this.setDims(s*c/r,i*u/o),this._uiManager.enableWaiting(!1);const h=g(this,Fs,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=s/r,this.height=i/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),b(this,pt,h0).call(this),a(this,ql)||(this.parent.addUndoableEditor(this),g(this,ql,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Xl)&&h.setAttribute("aria-label",a(this,Xl))},sf=function(e,s){const{width:i,height:r}=a(this,It);let o=i,l=r,c=a(this,It);for(;o>2*e||l>2*s;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},h0=function(){const[e,s]=this.parentDimensions,{width:i,height:r}=this,o=new am,l=Math.ceil(i*e*o.sx),c=Math.ceil(r*s*o.sy),u=a(this,Fs);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,vn)?a(this,It):b(this,pt,sf).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},rf=function(e){if(e){if(a(this,vn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,ye));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=a(this,It),s.getContext("2d").drawImage(a(this,It),0,0),s.toDataURL()}if(a(this,vn)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Mr.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Mr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,It),0,0,a(this,It).width,a(this,It).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,It))},kx=function(e){var l;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===s,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},Y(Kc,"_type","stamp"),Y(Kc,"_editorType",et.STAMP);let c0=Kc;var Zo,Yl,js,pr,vi,Fn,gr,Kl,Jo,os,wi,Re,Ai,X,mr,Rt,Tx,As,f0,p0,of;const Xn=class Xn{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){A(this,Rt);A(this,Zo);A(this,Yl,!1);A(this,js,null);A(this,pr,null);A(this,vi,null);A(this,Fn,new Map);A(this,gr,!1);A(this,Kl,!1);A(this,Jo,!1);A(this,os,null);A(this,wi,null);A(this,Re,null);A(this,Ai,null);A(this,X);const d=[...a(Xn,mr).values()];if(!Xn._initialized){Xn._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),g(this,X,t),this.pageIndex=e,this.div=s,g(this,Zo,r),g(this,js,o),this.viewport=u,g(this,Re,c),this.drawLayer=l,this._structTree=i,a(this,X).addLayer(this)}get isEmpty(){return a(this,Fn).size===0}get isInvisible(){return this.isEmpty&&a(this,X).getMode()===et.NONE}updateToolbar(t){a(this,X).updateToolbar(t)}updateMode(t=a(this,X).getMode()){switch(b(this,Rt,of).call(this),t){case et.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case et.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of a(Xn,mr).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Re))==null?void 0:e.div)}setEditingState(t){a(this,X).setEditingState(t)}addCommands(t){a(this,X).addCommands(t)}cleanUndoStack(t){a(this,X).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,js))==null||e.div.classList.toggle("disabled",!t)}async enable(){g(this,Jo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of a(this,Fn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,X).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!a(this,js)){g(this,Jo,!1);return}const e=a(this,js).getEditableAnnotations();for(const s of e){if(s.hide(),a(this,X).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}g(this,Jo,!1)}disable(){var i;g(this,Kl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,Fn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(a(this,js)){const r=a(this,js).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,X).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,X).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}b(this,Rt,of).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of a(Xn,mr).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,Kl,!1)}getEditableAnnotation(t){var e;return((e=a(this,js))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,X).getActive()!==t&&a(this,X).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Re))!=null&&t.div&&!a(this,Ai)){g(this,Ai,new AbortController);const e=a(this,X).combinedSignal(a(this,Ai));a(this,Re).div.addEventListener("pointerdown",b(this,Rt,Tx).bind(this),{signal:e}),a(this,Re).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Re))!=null&&t.div&&a(this,Ai)&&(a(this,Ai).abort(),g(this,Ai,null),a(this,Re).div.classList.remove("highlighting"))}enableClick(){if(a(this,pr))return;g(this,pr,new AbortController);const t=a(this,X).combinedSignal(a(this,pr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,pr))==null||t.abort(),g(this,pr,null)}attach(t){a(this,Fn).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,X).isDeletedAnnotationElement(e)&&a(this,X).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Fn).delete(t.id),(e=a(this,Zo))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,Kl)&&t.annotationElementId&&a(this,X).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,X).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,X).addDeletedAnnotationElement(t.annotationElementId),Ft.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,X).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Jo)),a(this,X).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,vi)&&(t._focusEventsAllowed=!1,g(this,vi,setTimeout(()=>{g(this,vi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,X)._signal}),e.focus())},0))),t._structTreeParentId=(s=a(this,Zo))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return a(this,X).getId()}combinedSignal(t){return a(this,X).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Rt,As))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){a(this,X).updateToolbar(t),a(this,X).updateMode(t);const{offsetX:s,offsetY:i}=b(this,Rt,p0).call(this),r=this.getNextId(),o=b(this,Rt,f0).call(this,{parent:this,id:r,x:s,y:i,uiManager:a(this,X),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(Xn,mr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,X)))||null}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=b(this,Rt,f0).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:a(this,X),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(b(this,Rt,p0).call(this),!0)}setSelected(t){a(this,X).setSelected(t)}toggleSelected(t){a(this,X).toggleSelected(t)}unselect(t){a(this,X).unselect(t)}pointerup(t){var s;const{isMac:e}=Ue.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&a(this,gr)&&(g(this,gr,!1),!((s=a(this,Rt,As))!=null&&s.isDrawer&&a(this,Rt,As).supportMultipleDrawings))){if(!a(this,Yl)){g(this,Yl,!0);return}if(a(this,X).getMode()===et.STAMP){a(this,X).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var i;if(a(this,X).getMode()===et.HIGHLIGHT&&this.enableTextSelection(),a(this,gr)){g(this,gr,!1);return}const{isMac:e}=Ue.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(g(this,gr,!0),(i=a(this,Rt,As))!=null&&i.isDrawer){this.startDrawingSession(t);return}const s=a(this,X).getActive();g(this,Yl,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus(),a(this,os)){a(this,Rt,As).startDrawing(this,a(this,X),!1,t);return}a(this,X).setCurrentDrawingSession(this),g(this,os,new AbortController);const e=a(this,X).combinedSignal(a(this,os));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(g(this,wi,null),this.commitOrRemove())},{signal:e}),a(this,Rt,As).startDrawing(this,a(this,X),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&g(this,wi,e);return}a(this,wi)&&setTimeout(()=>{var e;(e=a(this,wi))==null||e.focus(),g(this,wi,null)},0)}endDrawingSession(t=!1){return a(this,os)?(a(this,X).setCurrentDrawingSession(null),a(this,os).abort(),g(this,os,null),g(this,wi,null),a(this,Rt,As).endDrawing(t)):null}findNewParent(t,e,s){const i=a(this,X).findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return a(this,os)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,os)&&a(this,Rt,As).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,X).getActive())==null?void 0:t.parent)===this&&(a(this,X).commitOrRemove(),a(this,X).setActiveEditor(null)),a(this,vi)&&(clearTimeout(a(this,vi)),g(this,vi,null));for(const s of a(this,Fn).values())(e=a(this,Zo))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,a(this,Fn).clear(),a(this,X).removeLayer(this)}render({viewport:t}){this.viewport=t,la(this.div,t);for(const e of a(this,X).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,X).commitOrRemove(),b(this,Rt,of).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,la(this.div,{rotation:s}),e!==s)for(const i of a(this,Fn).values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,X).viewParameters.realScale}};Zo=new WeakMap,Yl=new WeakMap,js=new WeakMap,pr=new WeakMap,vi=new WeakMap,Fn=new WeakMap,gr=new WeakMap,Kl=new WeakMap,Jo=new WeakMap,os=new WeakMap,wi=new WeakMap,Re=new WeakMap,Ai=new WeakMap,X=new WeakMap,mr=new WeakMap,Rt=new WeakSet,Tx=function(t){a(this,X).unselectAll();const{target:e}=t;if(e===a(this,Re).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Re).div.contains(e)){const{isMac:s}=Ue.platform;if(t.button!==0||t.ctrlKey&&s)return;a(this,X).showAllEditors("highlight",!0,!0),a(this,Re).div.classList.add("free"),this.toggleDrawing(),Of.startHighlighting(this,a(this,X).direction==="ltr",{target:a(this,Re).div,x:t.x,y:t.y}),a(this,Re).div.addEventListener("pointerup",()=>{a(this,Re).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,X)._signal}),t.preventDefault()}},As=function(){return a(Xn,mr).get(a(this,X).getMode())},f0=function(t){const e=a(this,Rt,As);return e?new e.prototype.constructor(t):null},p0=function(){const{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+i),u=(r+l)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},of=function(){for(const t of a(this,Fn).values())t.isEmpty()&&t.remove()},Y(Xn,"_initialized",!1),A(Xn,mr,new Map([Xm,l0,c0,Of].map(t=>[t._editorType,t])));let d0=Xn;var as,Hh,$e,ta,sp,Px,Bs,m0,Rx,y0;const Ce=class Ce{constructor({pageIndex:t}){A(this,Bs);A(this,as,null);A(this,Hh,0);A(this,$e,new Map);A(this,ta,new Map);this.pageIndex=t}setParent(t){if(!a(this,as)){g(this,as,t);return}if(a(this,as)!==t){if(a(this,$e).size>0)for(const e of a(this,$e).values())e.remove(),t.append(e);g(this,as,t)}}static get _svgFactory(){return ot(this,"_svgFactory",new by)}draw(t,e=!1,s=!1){const i=De(this,Hh)._++,r=b(this,Bs,m0).call(this),o=Ce._svgFactory.createElement("defs");r.append(o);const l=Ce._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,ta).set(i,l);const u=s?b(this,Bs,Rx).call(this,o,c):null,h=Ce._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,$e).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(t,e){const s=De(this,Hh)._++,i=b(this,Bs,m0).call(this),r=Ce._svgFactory.createElement("defs");i.append(r);const o=Ce._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=Ce._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Ce._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Ce._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Ce._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,t),a(this,$e).set(s,i),s}finalizeDraw(t,e){a(this,ta).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:i,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,$e).get(t):t;if(l){if(s&&b(this,Bs,y0).call(this,l,s),i&&b(c=Ce,sp,Px).call(c,l,i),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;b(this,Bs,y0).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const s=a(this,$e).get(t);s&&(a(e,as).append(s),a(this,$e).delete(t),a(e,$e).set(t,s))}remove(t){a(this,ta).delete(t),a(this,as)!==null&&(a(this,$e).get(t).remove(),a(this,$e).delete(t))}destroy(){g(this,as,null);for(const t of a(this,$e).values())t.remove();a(this,$e).clear(),a(this,ta).clear()}};as=new WeakMap,Hh=new WeakMap,$e=new WeakMap,ta=new WeakMap,sp=new WeakSet,Px=function(t,[e,s,i,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},Bs=new WeakSet,m0=function(){const t=Ce._svgFactory.create(1,1,!0);return a(this,as).append(t),t.setAttribute("aria-hidden",!0),t},Rx=function(t,e){const s=Ce._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Ce._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},y0=function(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)},A(Ce,sp);let g0=Ce;globalThis.pdfjsTestingUtils={HighlightOutliner:Ym};Z.AbortException;Z.AnnotationEditorLayer;Z.AnnotationEditorParamsType;Z.AnnotationEditorType;Z.AnnotationEditorUIManager;Z.AnnotationLayer;Z.AnnotationMode;Z.ColorPicker;Z.DOMSVGFactory;Z.DrawLayer;Z.FeatureTest;var Nk=Z.GlobalWorkerOptions;Z.ImageKind;Z.InvalidPDFException;Z.MissingPDFException;Z.OPS;Z.OutputScale;Z.PDFDataRangeTransport;Z.PDFDateString;Z.PDFWorker;Z.PasswordResponses;Z.PermissionFlag;Z.PixelsPerInch;Z.RenderingCancelledException;Z.TextLayer;Z.TouchManager;Z.UnexpectedResponseException;Z.Util;Z.VerbosityLevel;Z.XfaLayer;Z.build;Z.createValidAbsoluteUrl;Z.fetchData;var Ik=Z.getDocument;Z.getFilenameFromUrl;Z.getPdfFilenameFromUrl;Z.getXfaPageViewport;Z.isDataScheme;Z.isPdfFile;Z.noContextMenu;Z.normalizeUnicode;Z.setLayerDimensions;Z.shadow;Z.stopEvent;Z.version;var Dk={exports:{}};(function(n){var t=function(e){var s=Object.prototype,i=s.hasOwnProperty,r=Object.defineProperty||function(R,P,L){R[P]=L.value},o,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function d(R,P,L){return Object.defineProperty(R,P,{value:L,enumerable:!0,configurable:!0,writable:!0}),R[P]}try{d({},"")}catch{d=function(P,L,j){return P[L]=j}}function f(R,P,L,j){var $=P&&P.prototype instanceof x?P:x,Q=Object.create($.prototype),xt=new H(j||[]);return r(Q,"_invoke",{value:it(R,L,xt)}),Q}e.wrap=f;function p(R,P,L){try{return{type:"normal",arg:R.call(P,L)}}catch(j){return{type:"throw",arg:j}}}var m="suspendedStart",v="suspendedYield",S="executing",y="completed",w={};function x(){}function _(){}function C(){}var T={};d(T,c,function(){return this});var k=Object.getPrototypeOf,M=k&&k(k(D([])));M&&M!==s&&i.call(M,c)&&(T=M);var I=C.prototype=x.prototype=Object.create(T);_.prototype=C,r(I,"constructor",{value:C,configurable:!0}),r(C,"constructor",{value:_,configurable:!0}),_.displayName=d(C,h,"GeneratorFunction");function O(R){["next","throw","return"].forEach(function(P){d(R,P,function(L){return this._invoke(P,L)})})}e.isGeneratorFunction=function(R){var P=typeof R=="function"&&R.constructor;return P?P===_||(P.displayName||P.name)==="GeneratorFunction":!1},e.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,C):(R.__proto__=C,d(R,h,"GeneratorFunction")),R.prototype=Object.create(I),R},e.awrap=function(R){return{__await:R}};function B(R,P){function L(Q,xt,lt,J){var Ht=p(R[Q],R,xt);if(Ht.type==="throw")J(Ht.arg);else{var ga=Ht.arg,Or=ga.value;return Or&&typeof Or=="object"&&i.call(Or,"__await")?P.resolve(Or.__await).then(function(jr){L("next",jr,lt,J)},function(jr){L("throw",jr,lt,J)}):P.resolve(Or).then(function(jr){ga.value=jr,lt(ga)},function(jr){return L("throw",jr,lt,J)})}}var j;function $(Q,xt){function lt(){return new P(function(J,Ht){L(Q,xt,J,Ht)})}return j=j?j.then(lt,lt):lt()}r(this,"_invoke",{value:$})}O(B.prototype),d(B.prototype,u,function(){return this}),e.AsyncIterator=B,e.async=function(R,P,L,j,$){$===void 0&&($=Promise);var Q=new B(f(R,P,L,j),$);return e.isGeneratorFunction(P)?Q:Q.next().then(function(xt){return xt.done?xt.value:Q.next()})};function it(R,P,L){var j=m;return function(Q,xt){if(j===S)throw new Error("Generator is already running");if(j===y){if(Q==="throw")throw xt;return N()}for(L.method=Q,L.arg=xt;;){var lt=L.delegate;if(lt){var J=ft(lt,L);if(J){if(J===w)continue;return J}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(j===m)throw j=y,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);j=S;var Ht=p(R,P,L);if(Ht.type==="normal"){if(j=L.done?y:v,Ht.arg===w)continue;return{value:Ht.arg,done:L.done}}else Ht.type==="throw"&&(j=y,L.method="throw",L.arg=Ht.arg)}}}function ft(R,P){var L=P.method,j=R.iterator[L];if(j===o)return P.delegate=null,L==="throw"&&R.iterator.return&&(P.method="return",P.arg=o,ft(R,P),P.method==="throw")||L!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+L+"' method")),w;var $=p(j,R.iterator,P.arg);if($.type==="throw")return P.method="throw",P.arg=$.arg,P.delegate=null,w;var Q=$.arg;if(!Q)return P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,w;if(Q.done)P[R.resultName]=Q.value,P.next=R.nextLoc,P.method!=="return"&&(P.method="next",P.arg=o);else return Q;return P.delegate=null,w}O(I),d(I,h,"Generator"),d(I,c,function(){return this}),d(I,"toString",function(){return"[object Generator]"});function at(R){var P={tryLoc:R[0]};1 in R&&(P.catchLoc=R[1]),2 in R&&(P.finallyLoc=R[2],P.afterLoc=R[3]),this.tryEntries.push(P)}function Lt(R){var P=R.completion||{};P.type="normal",delete P.arg,R.completion=P}function H(R){this.tryEntries=[{tryLoc:"root"}],R.forEach(at,this),this.reset(!0)}e.keys=function(R){var P=Object(R),L=[];for(var j in P)L.push(j);return L.reverse(),function $(){for(;L.length;){var Q=L.pop();if(Q in P)return $.value=Q,$.done=!1,$}return $.done=!0,$}};function D(R){if(R){var P=R[c];if(P)return P.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var L=-1,j=function $(){for(;++L<R.length;)if(i.call(R,L))return $.value=R[L],$.done=!1,$;return $.value=o,$.done=!0,$};return j.next=j}}return{next:N}}e.values=D;function N(){return{value:o,done:!0}}return H.prototype={constructor:H,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(Lt),!R)for(var P in this)P.charAt(0)==="t"&&i.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=o)},stop:function(){this.done=!0;var R=this.tryEntries[0],P=R.completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var P=this;function L(J,Ht){return Q.type="throw",Q.arg=R,P.next=J,Ht&&(P.method="next",P.arg=o),!!Ht}for(var j=this.tryEntries.length-1;j>=0;--j){var $=this.tryEntries[j],Q=$.completion;if($.tryLoc==="root")return L("end");if($.tryLoc<=this.prev){var xt=i.call($,"catchLoc"),lt=i.call($,"finallyLoc");if(xt&&lt){if(this.prev<$.catchLoc)return L($.catchLoc,!0);if(this.prev<$.finallyLoc)return L($.finallyLoc)}else if(xt){if(this.prev<$.catchLoc)return L($.catchLoc,!0)}else if(lt){if(this.prev<$.finallyLoc)return L($.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(R,P){for(var L=this.tryEntries.length-1;L>=0;--L){var j=this.tryEntries[L];if(j.tryLoc<=this.prev&&i.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var $=j;break}}$&&(R==="break"||R==="continue")&&$.tryLoc<=P&&P<=$.finallyLoc&&($=null);var Q=$?$.completion:{};return Q.type=R,Q.arg=P,$?(this.method="next",this.next=$.finallyLoc,w):this.complete(Q)},complete:function(R,P){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&P&&(this.next=P),w},finish:function(R){for(var P=this.tryEntries.length-1;P>=0;--P){var L=this.tryEntries[P];if(L.finallyLoc===R)return this.complete(L.completion,L.afterLoc),Lt(L),w}},catch:function(R){for(var P=this.tryEntries.length-1;P>=0;--P){var L=this.tryEntries[P];if(L.tryLoc===R){var j=L.completion;if(j.type==="throw"){var $=j.arg;Lt(L)}return $}}throw new Error("illegal catch attempt")},delegateYield:function(R,P,L){return this.delegate={iterator:D(R),resultName:P,nextLoc:L},this.method==="next"&&(this.arg=o),w}},e}(n.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(Dk);var Sy=(n,t)=>`${n}-${t}-${Math.random().toString(16).slice(3,8)}`;const Fk=Sy;let cw=0;var Mx=({id:n,action:t,payload:e={}})=>{let s=n;return typeof s>"u"&&(s=Fk("Job",cw),cw+=1),{id:s,action:t,payload:e}},ac={};let _y=!1;ac.logging=_y;ac.setLogging=n=>{_y=n};ac.log=(...n)=>_y?console.log.apply(void 0,n):null;const Ok=Mx,{log:yd}=ac,jk=Sy;let uw=0;var zk=()=>{const n=jk("Scheduler",uw),t={},e={};let s=[];uw+=1;const i=()=>s.length,r=()=>Object.keys(t).length,o=()=>{if(s.length!==0){const d=Object.keys(t);for(let f=0;f<d.length;f+=1)if(typeof e[d[f]]>"u"){s[0](t[d[f]]);break}}},l=(d,f)=>new Promise((p,m)=>{const v=Ok({action:d,payload:f});s.push(async S=>{s.shift(),e[S.id]=v;try{p(await S[d].apply(void 0,[...f,v.id]))}catch(y){m(y)}finally{delete e[S.id],o()}}),yd(`[${n}]: Add ${v.id} to JobQueue`),yd(`[${n}]: JobQueue length=${s.length}`),o()});return{addWorker:d=>(t[d.id]=d,yd(`[${n}]: Add ${d.id}`),yd(`[${n}]: Number of workers=${r()}`),o(),d.id),addJob:async(d,...f)=>{if(r()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return l(d,f)},terminate:async()=>{Object.keys(t).forEach(async d=>{await t[d].terminate()}),s=[]},getQueueLen:i,getNumWorkers:r}};function $k(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hk=n=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof $k=="function"&&(t.type="node"),typeof n>"u"?t:t[n]};const Bk=Hk("type")==="browser",Uk=Bk?n=>new URL(n,window.location.href).href:n=>n;var Gk=n=>{const t={...n};return["corePath","workerPath","langPath"].forEach(e=>{n[e]&&(t[e]=Uk(t[e]))}),t},Lx={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Vk="tesseract.js",Wk="6.0.1",Xk="Pure Javascript Multilingual OCR",qk="src/index.js",Yk="commonjs",Kk="src/index.d.ts",Qk="dist/tesseract.min.js",Zk="dist/tesseract.min.js",Jk={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},tT={"./src/worker/node/index.js":"./src/worker/browser/index.js"},eT="",nT=["jeromewu"],sT="Apache-2.0",iT={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},rT={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},oT={"@rollup/pluginutils":"^5.0.2"},aT={type:"git",url:"https://github.com/naptha/tesseract.js.git"},lT={url:"https://github.com/naptha/tesseract.js/issues"},cT="https://github.com/naptha/tesseract.js",uT={type:"opencollective",url:"https://opencollective.com/tesseractjs"},hT={name:Vk,version:Wk,description:Xk,main:qk,type:Yk,types:Kk,unpkg:Qk,jsdelivr:Zk,scripts:Jk,browser:tT,author:eT,contributors:nT,license:sT,devDependencies:iT,dependencies:rT,overrides:oT,repository:aT,bugs:lT,homepage:cT,collective:uT};var dT={workerBlobURL:!0,logger:()=>{}};const fT=hT.version,pT=dT;var gT={...pT,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${fT}/dist/worker.min.js`},mT=({workerPath:n,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const s=new Blob([`importScripts("${n}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(s))}else e=new Worker(n);return e},yT=n=>{n.terminate()},vT=(n,t)=>{n.onmessage=({data:e})=>{t(e)}},wT=async(n,t)=>{n.postMessage(t)};const cg=n=>new Promise((t,e)=>{const s=new FileReader;s.onload=()=>{t(s.result)},s.onerror=({target:{error:{code:i}}})=>{e(Error(`File could not be read! Code=${i}`))},s.readAsArrayBuffer(n)}),v0=async n=>{let t=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?t=atob(n.split(",")[1]).split("").map(e=>e.charCodeAt(0)):t=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(t=await v0(n.src)),n.tagName==="VIDEO"&&(t=await v0(n.poster)),n.tagName==="CANVAS"&&await new Promise(e=>{n.toBlob(async s=>{t=await cg(s),e()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const e=await n.convertToBlob();t=await cg(e)}else(n instanceof File||n instanceof Blob)&&(t=await cg(n));return new Uint8Array(t)};var AT=v0;const bT=gT,xT=mT,ST=yT,_T=vT,ET=wT,CT=AT;var kT={defaultOptions:bT,spawnWorker:xT,terminateWorker:ST,onMessage:_T,send:ET,loadImage:CT};const TT=Gk,ws=Mx,{log:hw}=ac,PT=Sy,zr=Lx,{defaultOptions:RT,spawnWorker:MT,terminateWorker:LT,onMessage:NT,loadImage:dw,send:IT}=kT;let fw=0;var Nx=async(n="eng",t=zr.LSTM_ONLY,e={},s={})=>{const i=PT("Worker",fw),{logger:r,errorHandler:o,...l}=TT({...RT,...e}),c={},u=typeof n=="string"?n.split("+"):n;let h=t,d=s;const f=[zr.DEFAULT,zr.LSTM_ONLY].includes(t)&&!l.legacyCore;let p,m;const v=new Promise((D,N)=>{m=D,p=N}),S=D=>{p(D.message)};let y=MT(l);y.onerror=S,fw+=1;const w=({id:D,action:N,payload:R})=>new Promise((P,L)=>{hw(`[${i}]: Start ${D}, action=${N}`);const j=`${N}-${D}`;c[j]={resolve:P,reject:L},IT(y,{workerId:i,jobId:D,action:N,payload:R})}),x=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),_=D=>w(ws({id:D,action:"load",payload:{options:{lstmOnly:f,corePath:l.corePath,logging:l.logging}}})),C=(D,N,R)=>w(ws({id:R,action:"FS",payload:{method:"writeFile",args:[D,N]}})),T=(D,N)=>w(ws({id:N,action:"FS",payload:{method:"readFile",args:[D,{encoding:"utf8"}]}})),k=(D,N)=>w(ws({id:N,action:"FS",payload:{method:"unlink",args:[D]}})),M=(D,N,R)=>w(ws({id:R,action:"FS",payload:{method:D,args:N}})),I=(D,N)=>w(ws({id:N,action:"loadLanguage",payload:{langs:D,options:{langPath:l.langPath,dataPath:l.dataPath,cachePath:l.cachePath,cacheMethod:l.cacheMethod,gzip:l.gzip,lstmOnly:[zr.DEFAULT,zr.LSTM_ONLY].includes(h)&&!l.legacyLang}}})),O=(D,N,R,P)=>w(ws({id:P,action:"initialize",payload:{langs:D,oem:N,config:R}})),B=(D="eng",N,R,P)=>{if(f&&[zr.TESSERACT_ONLY,zr.TESSERACT_LSTM_COMBINED].includes(N))throw Error("Legacy model requested but code missing.");const L=N||h;h=L;const j=R||d;d=j;const Q=(typeof D=="string"?D.split("+"):D).filter(xt=>!u.includes(xt));return u.push(...Q),Q.length>0?I(Q,P).then(()=>O(D,L,j,P)):O(D,L,j,P)},it=(D={},N)=>w(ws({id:N,action:"setParameters",payload:{params:D}})),ft=async(D,N={},R={text:!0},P)=>w(ws({id:P,action:"recognize",payload:{image:await dw(D),options:N,output:R}})),at=async(D,N)=>{if(f)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return w(ws({id:N,action:"detect",payload:{image:await dw(D)}}))},Lt=async()=>(y!==null&&(LT(y),y=null),Promise.resolve());NT(y,({workerId:D,jobId:N,status:R,action:P,data:L})=>{const j=`${P}-${N}`;if(R==="resolve")hw(`[${D}]: Complete ${N}`),c[j].resolve({jobId:N,data:L}),delete c[j];else if(R==="reject")if(c[j].reject(L),delete c[j],P==="load"&&p(L),o)o(L);else throw Error(L);else R==="progress"&&r({...L,userJobId:N})});const H={id:i,worker:y,load:x,writeText:C,readText:T,removeFile:k,FS:M,reinitialize:B,setParameters:it,recognize:ft,detect:at,terminate:Lt};return _().then(()=>I(n)).then(()=>O(n,t,s)).then(()=>m(H)).catch(()=>{}),v};const Ix=Nx,DT=async(n,t,e)=>{const s=await Ix(t,1,e);return s.recognize(n).finally(async()=>{await s.terminate()})},FT=async(n,t)=>{const e=await Ix("osd",0,t);return e.detect(n).finally(async()=>{await e.terminate()})};var OT={recognize:DT,detect:FT},jT={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},zT={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const $T=zk,HT=Nx,BT=OT,UT=jT,GT=Lx,VT=zT,{setLogging:WT}=ac;var XT={languages:UT,OEM:GT,PSM:VT,createScheduler:$T,createWorker:HT,setLogging:WT,...BT};const qT="/assets/pdf.worker-BgryrOlp.mjs";Nk.workerSrc=qT;async function YT(n){try{const t=await n.arrayBuffer(),e=await Ik({data:t,useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise;let s="";const i=Math.min(e.numPages,10);for(let r=1;r<=i;r++){const o=await e.getPage(r),c=(await o.getTextContent()).items.map(u=>u.str).join(" ");s+=c+" ";try{if(r<=5){const u=document.createElement("canvas"),h=u.getContext("2d");if(h){const d=o.getViewport({scale:1.5});u.height=d.height,u.width=d.width;const f={canvasContext:h,viewport:d};await o.render(f).promise;const p=u.toDataURL("image/png"),m=await XT.createWorker("eng",1,{logger:()=>{}}),{data:{text:v}}=await m.recognize(p);await m.terminate(),v.trim()&&(s+=" "+v.trim()+" ")}}}catch(u){console.warn(`OCR failed for page ${r}:`,u)}}return s.trim()}catch(t){throw console.error("Error extracting text from PDF:",t),new Error("Failed to extract text from PDF")}}class KT{constructor(t){this.text=t,this.sentences=this.extractSentences(t),this.keyPhrases=this.extractKeyPhrases(t),this.concepts=this.extractConcepts(t),this.facts=this.extractFacts(t)}extractSentences(t){return t.split(/[.!?]+/).map(e=>e.trim()).filter(e=>e.length>15&&e.length<300).slice(0,100)}extractKeyPhrases(t){const e=t.toLowerCase().split(/\s+/),s=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","cannot","this","that","these","those","i","you","he","she","it","we","they","them","their","there","where","when","what","why","how","very","more","most","some","any","all","each","every","both","either","neither","one","two","first","last","only","just","also","even","still","yet","already","now","then","here","there"]),i=new Map;return e.forEach(r=>{const o=r.replace(/[^\w]/g,"");o.length>2&&!s.has(o)&&i.set(o,(i.get(o)||0)+1)}),Array.from(i.entries()).sort((r,o)=>o[1]-r[1]).slice(0,50).map(([r])=>r)}extractConcepts(t){const e=[/\b([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)\b/g,/\b(\w+(?:tion|sion|ment|ness|ity|ism|ogy|phy))\b/gi,/\b(process|method|system|theory|principle|concept|approach|technique)\s+(?:of\s+)?(\w+)/gi],s=new Set;return e.forEach(i=>{const r=t.match(i);r&&r.forEach(o=>{const l=o.trim().toLowerCase();l.length>3&&l.length<30&&s.add(l)})}),Array.from(s).slice(0,30)}extractFacts(t){const e=[/\b(\d+)\s+(years?|months?|days?|hours?|minutes?|percent|%)/gi,/\b(is|are|was|were)\s+([^.!?]{10,50})/gi,/\b(contains?|includes?|consists?\s+of)\s+([^.!?]{5,40})/gi,/\b(located|found|situated)\s+(in|at|on)\s+([^.!?]{5,30})/gi],s=new Set;return e.forEach(i=>{const r=t.match(i);r&&r.slice(0,20).forEach(o=>{s.add(o.trim())})}),Array.from(s).slice(0,25)}generateQuestions(t=15){const e=[],s=new Set,i=Math.ceil(t*.4),r=Math.ceil(t*.4),o=t-i-r;for(let l=0;l<i&&e.length<t;l++){const c=Math.random()>.6?this.generateEasyMultipleChoice(s):this.generateEasyTrueFalse(s);c&&(e.push(c),s.add(c.question))}for(let l=0;l<r&&e.length<t;l++){const c=Math.random()>.5?this.generateMediumMultipleChoice(s):this.generateMediumTrueFalse(s);c&&(e.push(c),s.add(c.question))}for(let l=0;l<o&&e.length<t;l++){const c=this.generateHardMultipleChoice(s);c&&(e.push(c),s.add(c.question))}for(;e.length<t;){const l=this.generateFallbackQuestion(s);if(l)e.push(l),s.add(l.question);else break}return this.shuffleArray(e)}generateEasyMultipleChoice(t){const e=this.facts.filter(p=>!t.has(p));if(e.length===0)return null;const i=e[Math.floor(Math.random()*e.length)].split(" ");let r="",o=-1;for(let p=1;p<i.length-1;p++){const m=i[p].toLowerCase().replace(/[^\w]/g,"");if(m.length>3&&m.length<12&&!["this","that","with","from","they","them","were","been"].includes(m)){r=i[p].replace(/[^\w]/g,""),o=p;break}}if(o===-1)return null;const l=[...i];l[o]="______";const c=`What word completes this statement: ${l.join(" ")}`,u=[r],h=this.generateSimpleDistractors(r);u.push(...h.slice(0,3));const d=this.shuffleArray(u),f=d.indexOf(r);return{id:`easy-mc-${Date.now()}-${Math.random()}`,type:"multiple-choice",question:c,options:d,correctAnswer:f,difficulty:"easy"}}generateEasyTrueFalse(t){const e=this.sentences.filter(o=>!t.has(o)&&o.length<100&&o.includes(" is ")||o.includes(" are "));if(e.length===0)return null;const s=e[Math.floor(Math.random()*e.length)],i=Math.random()>.5;let r=s;return i||(r=s.replace(/\bis\b/g,"is not").replace(/\bare\b/g,"are not")),{id:`easy-tf-${Date.now()}-${Math.random()}`,type:"true-false",question:r,correctAnswer:i?"true":"false",difficulty:"easy"}}generateMediumMultipleChoice(t){const e=this.concepts.filter(f=>!t.has(f));if(e.length===0)return null;const s=e[Math.floor(Math.random()*e.length)],i=this.sentences.filter(f=>f.toLowerCase().includes(s.toLowerCase()));if(i.length===0)return null;const r=i[0],o=`According to the text, what is true about ${s}?`,l=this.extractConceptInfo(r,s),c=[l],u=this.generateConceptDistractors(s);c.push(...u.slice(0,3));const h=this.shuffleArray(c),d=h.indexOf(l);return{id:`medium-mc-${Date.now()}-${Math.random()}`,type:"multiple-choice",question:o,options:h,correctAnswer:d,difficulty:"medium"}}generateMediumTrueFalse(t){const e=this.sentences.filter(o=>!t.has(o)&&o.length>50&&o.length<150);if(e.length===0)return null;const s=e[Math.floor(Math.random()*e.length)],i=Math.random()>.5;let r=s;if(!i){const o=[()=>s.replace(/\b(increase|improve|enhance)\b/gi,"decrease"),()=>s.replace(/\b(positive|beneficial|good)\b/gi,"negative"),()=>s.replace(/\b(always|never)\b/gi,Math.random()>.5?"sometimes":"rarely"),()=>s.replace(/\b(all|every)\b/gi,"some")],l=o[Math.floor(Math.random()*o.length)],c=l();c!==s&&(r=c)}return{id:`medium-tf-${Date.now()}-${Math.random()}`,type:"true-false",question:r,correctAnswer:i?"true":"false",difficulty:"medium"}}generateHardMultipleChoice(t){const e=this.sentences.filter(h=>!t.has(h)&&h.length>80&&(h.includes("because")||h.includes("therefore")||h.includes("however")||h.includes("although")));if(e.length===0)return null;const s=e[Math.floor(Math.random()*e.length)],i=`Based on the following statement, what can be inferred? "${s}"`,r=this.generateInference(s),o=[r],l=this.generateComplexDistractors(s);o.push(...l.slice(0,3));const c=this.shuffleArray(o),u=c.indexOf(r);return{id:`hard-mc-${Date.now()}-${Math.random()}`,type:"multiple-choice",question:i,options:c,correctAnswer:u,difficulty:"hard"}}generateFallbackQuestion(t){const e=this.sentences.filter(i=>!t.has(i));if(e.length===0)return null;const s=e[Math.floor(Math.random()*e.length)];return{id:`fallback-tf-${Date.now()}-${Math.random()}`,type:"true-false",question:s,correctAnswer:"true",difficulty:"medium"}}generateSimpleDistractors(t){return["information","process","system","method","result","example","important","different","specific","general","complete","simple","complex","basic","advanced"].filter(s=>s!==t.toLowerCase()).slice(0,3)}generateConceptDistractors(t){return["theory","principle","method","approach","technique","process","system","framework","model","strategy"].map(s=>`${s} of ${t.split(" ")[0]}`).slice(0,3)}generateComplexDistractors(t){return["The statement contradicts established principles","The relationship described is purely coincidental","The conclusion requires additional evidence to support"]}extractConceptInfo(t,e){const s=t.split(e.toLowerCase());return s.length>1?`It ${s[1].trim().split(".")[0]}`.replace(/^\w/,r=>r.toUpperCase()):"It is related to the main topic discussed"}generateInference(t){return t.includes("because")?"There is a causal relationship between the mentioned factors":t.includes("however")||t.includes("although")?"There is a contrast or exception to the general rule":t.includes("therefore")?"The conclusion follows logically from the premises":"The statement implies a specific relationship between concepts"}shuffleArray(t){const e=[...t];for(let s=e.length-1;s>0;s--){const i=Math.floor(Math.random()*(s+1));[e[s],e[i]]=[e[i],e[s]]}return e}}class QT{constructor(t){this.text=t,this.sentences=this.extractSentences(t)}extractSentences(t){return t.split(/[.!?]+/).map(e=>e.trim()).filter(e=>e.length>20&&e.length<200).slice(0,200)}extractImportantPoints(t=10){const e=this.extractDefinitions(),s=this.extractFactualStatements(),i=this.extractProcesses(),r=this.extractStatistics(),o=this.extractConclusions(),l=this.extractKeyConcepts(),c=[...e.slice(0,3),...l.slice(0,3),...s.slice(0,2),...i.slice(0,2),...r.slice(0,2),...o.slice(0,2)];return Array.from(new Set(c)).filter(h=>h.length>15&&h.length<150).slice(0,t)}extractDefinitions(){const t=[/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)\s+(?:is|are|refers?\s+to|means?|defined?\s+as)\s+([^.!?]{20,100})/gi,/(?:The\s+term\s+|Definition\s+of\s+)([^.!?]{20,120})/gi,/([A-Z][a-z]+)\s*:\s*([^.!?]{15,100})/g],e=new Set;return t.forEach(s=>{const i=this.text.match(s);i&&i.forEach(r=>{const o=r.trim().replace(/^\w/,l=>l.toUpperCase());o.length>20&&e.add(o)})}),Array.from(e).slice(0,5)}extractFactualStatements(){const t=[/(?:It\s+is\s+important\s+to\s+note\s+that|Importantly|Notably|Significantly)\s+([^.!?]{20,120})/gi,/(?:Research\s+shows?|Studies\s+indicate|Evidence\s+suggests?)\s+([^.!?]{20,120})/gi,/(?:According\s+to|Based\s+on)\s+([^.!?]{20,120})/gi],e=new Set;return t.forEach(s=>{const i=this.text.match(s);i&&i.slice(0,3).forEach(r=>{e.add(r.trim())})}),Array.from(e).slice(0,4)}extractProcesses(){const t=[/(?:The\s+process\s+of|Steps\s+to|How\s+to|Method\s+for)\s+([^.!?]{20,120})/gi,/(?:First|Second|Third|Finally|Next|Then)\s*,?\s*([^.!?]{15,100})/gi,/\b(\d+)\.\s*([^.!?]{15,100})/g],e=new Set;return t.forEach(s=>{const i=this.text.match(s);i&&i.slice(0,3).forEach(r=>{const o=r.trim().replace(/^\d+\.\s*/,"");o.length>15&&e.add(o)})}),Array.from(e).slice(0,3)}extractStatistics(){const t=[/\b(\d+(?:\.\d+)?)\s*%\s+([^.!?]{10,80})/gi,/\b(\d+(?:,\d{3})*)\s+(people|users|cases|studies|participants)\s+([^.!?]{10,80})/gi,/(?:approximately|about|nearly|over|under)\s+(\d+(?:,\d{3})*)\s+([^.!?]{10,80})/gi],e=new Set;return t.forEach(s=>{const i=this.text.match(s);i&&i.slice(0,2).forEach(r=>{e.add(r.trim())})}),Array.from(e).slice(0,3)}extractConclusions(){const t=[/(?:In\s+conclusion|To\s+summarize|In\s+summary|Therefore|Thus|Hence)\s*,?\s*([^.!?]{20,120})/gi,/(?:The\s+main\s+point|Key\s+takeaway|Most\s+importantly)\s+([^.!?]{20,120})/gi,/(?:This\s+suggests?|This\s+indicates?|This\s+shows?)\s+([^.!?]{20,120})/gi],e=new Set;return t.forEach(s=>{const i=this.text.match(s);i&&i.slice(0,2).forEach(r=>{e.add(r.trim())})}),Array.from(e).slice(0,3)}extractKeyConcepts(){const t=[/(?:The\s+concept\s+of|Understanding|Key\s+principle)\s+([^.!?]{15,100})/gi,/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)\s+(?:plays?\s+a\s+crucial\s+role|is\s+essential|is\s+fundamental)/gi,/(?:One\s+of\s+the\s+most\s+important|A\s+critical\s+aspect)\s+([^.!?]{15,100})/gi],e=new Set;return t.forEach(s=>{const i=this.text.match(s);i&&i.slice(0,3).forEach(r=>{e.add(r.trim())})}),Array.from(e).slice(0,4)}}const ZT=({onQuizGenerated:n})=>{const[t,e]=ee.useState(!1),[s,i]=ee.useState(null),[r,o]=ee.useState(null),{isGenerating:l,setIsGenerating:c,addQuiz:u}=Ap(),h=ee.useCallback(v=>{v.preventDefault(),v.stopPropagation(),v.type==="dragenter"||v.type==="dragover"?e(!0):v.type==="dragleave"&&e(!1)},[]),d=ee.useCallback(v=>{v.preventDefault(),v.stopPropagation(),e(!1);const y=Array.from(v.dataTransfer.files).find(w=>w.type==="application/pdf");y?(i(y),o(null)):o("Please upload a PDF file")},[]),f=ee.useCallback(v=>{var y;const S=(y=v.target.files)==null?void 0:y[0];S&&S.type==="application/pdf"?(i(S),o(null)):o("Please select a PDF file")},[]),p=async()=>{if(s){c(!0),o(null);try{o("Processing PDF and extracting text from images... This may take a moment.");const v=await YT(s);if(v.length<100)throw new Error("PDF content is too short to generate meaningful questions");o("Generating questions from extracted content...");const y=new KT(v).generateQuestions(15),x=new QT(v).extractImportantPoints(10);if(y.length===0)throw new Error("Could not generate questions from this PDF");const _={id:`quiz-${Date.now()}`,title:s.name.replace(".pdf",""),description:`Quiz generated from ${s.name}`,questions:y,importantPoints:x,createdAt:new Date,pdfFileName:s.name,totalQuestions:y.length,estimatedTime:Math.ceil(y.length*1.5)};u(_),n(_),o(null)}catch(v){o(v instanceof Error?v.message:"Failed to generate quiz")}finally{c(!1)}}},m=()=>{i(null),o(null)};return E.jsxs("div",{className:"max-w-2xl mx-auto",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Upload Your PDF"}),E.jsx("p",{className:"text-gray-600",children:"Upload a PDF document and we'll automatically generate quiz questions from its content"})]}),s?E.jsxs("div",{className:"bg-white border rounded-lg p-6 shadow-sm",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center space-x-3",children:[E.jsx(RA,{className:"h-8 w-8 text-red-500"}),E.jsxs("div",{children:[E.jsx("p",{className:"font-medium text-gray-900",children:s.name}),E.jsxs("p",{className:"text-sm text-gray-500",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]}),E.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",children:E.jsx(SE,{className:"h-5 w-5"})})]}),E.jsx("button",{onClick:p,disabled:l,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:l?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),E.jsx("span",{children:"Generating Quiz..."})]}):E.jsx("span",{children:"Generate Quiz"})})]}):E.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-all duration-200 ${t?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:d,children:[E.jsx(bE,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),E.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drag and drop your PDF here"}),E.jsx("p",{className:"text-gray-600 mb-4",children:"or"}),E.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 cursor-pointer transition-colors",children:["Choose File",E.jsx("input",{id:"file-upload",type:"file",accept:".pdf",onChange:f,className:"sr-only"})]}),E.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"PDF files only, max 10MB"})]}),r&&E.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2",children:[E.jsx(dE,{className:"h-5 w-5 text-red-600"}),E.jsx("p",{className:"text-red-700",children:r})]})]})},JT=({quiz:n,onComplete:t,onBack:e})=>{var T,k;const[s,i]=ee.useState(0),[r,o]=ee.useState({}),[l]=ee.useState(Date.now()),[c,u]=ee.useState(0),{setCurrentAttempt:h}=Ap(),d=n.questions[s],f=s===n.questions.length-1,p=s===0;ee.useEffect(()=>{const M=setInterval(()=>{u(Math.floor((Date.now()-l)/1e3))},1e3);return()=>clearInterval(M)},[l]);const m=(M,I)=>{o(O=>({...O,[M]:I}))},v=()=>{f||i(M=>M+1)},S=()=>{p||i(M=>M-1)},y=()=>{const M=w(),I={id:`attempt-${Date.now()}`,quizId:n.id,answers:r,score:M,completedAt:new Date,timeSpent:c};h(I),t(I)},w=()=>{let M=0;return n.questions.forEach(I=>{r[I.id]===I.correctAnswer&&M++}),Math.round(M/n.questions.length*100)},x=M=>{const I=Math.floor(M/60),O=M%60;return`${I}:${O.toString().padStart(2,"0")}`},_=()=>(s+1)/n.questions.length*100,C=M=>{var O;const I=r[M.id];return M.type==="multiple-choice"?E.jsx("div",{className:"space-y-3",children:(O=M.options)==null?void 0:O.map((B,it)=>E.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[E.jsx("input",{type:"radio",name:M.id,value:it,checked:I===it,onChange:()=>m(M.id,it),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),E.jsx("span",{className:"text-gray-900",children:B})]},it))}):M.type==="true-false"?E.jsxs("div",{className:"space-y-3",children:[E.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[E.jsx("input",{type:"radio",name:M.id,value:"true",checked:I==="true",onChange:()=>m(M.id,"true"),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),E.jsx("span",{className:"text-gray-900",children:"True"})]}),E.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[E.jsx("input",{type:"radio",name:M.id,value:"false",checked:I==="false",onChange:()=>m(M.id,"false"),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),E.jsx("span",{className:"text-gray-900",children:"False"})]})]}):null};return E.jsxs("div",{className:"max-w-4xl mx-auto",children:[E.jsx(LA,{points:n.importantPoints,title:n.title}),E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[E.jsx(Bv,{className:"h-5 w-5"}),E.jsx("span",{children:"Back to Dashboard"})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[E.jsx(PA,{className:"h-4 w-4"}),E.jsx("span",{children:x(c)})]}),E.jsxs("div",{className:"text-sm text-gray-600",children:[s+1," of ",n.questions.length]})]})]}),E.jsx("div",{className:"mb-4",children:E.jsxs("div",{className:"flex justify-between items-center mb-2",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.title}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:E.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${_()}%`}})}),E.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(_()),"%"]})]})]})})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[E.jsxs("div",{className:"mb-6",children:[E.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[E.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:["Question ",s+1]}),E.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${d.difficulty==="easy"?"bg-green-100 text-green-800":d.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[((T=d.difficulty)==null?void 0:T.charAt(0).toUpperCase())+((k=d.difficulty)==null?void 0:k.slice(1))," Difficulty"]}),E.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm",children:d.type==="multiple-choice"?"Multiple Choice":"True/False"})]}),E.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 leading-relaxed",children:d.question})]}),C(d),E.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t",children:[E.jsxs("button",{onClick:S,disabled:p,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[E.jsx(Bv,{className:"h-4 w-4"}),E.jsx("span",{children:"Previous"})]}),E.jsx("div",{className:"flex items-center space-x-2",children:r[d.id]!==void 0&&E.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[E.jsx(TA,{className:"h-4 w-4"}),E.jsx("span",{className:"text-sm",children:"Answered"})]})}),f?E.jsx("button",{onClick:y,disabled:Object.keys(r).length!==n.questions.length,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Submit Quiz"}):E.jsxs("button",{onClick:v,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[E.jsx("span",{children:"Next"}),E.jsx(pE,{className:"h-4 w-4"})]})]})]})]})},tP=({quiz:n,attempt:t,onRetake:e,onBackToDashboard:s})=>{const i=c=>{const u=Math.floor(c/60),h=c%60;return`${u}:${h.toString().padStart(2,"0")}`},r=c=>c>=80?"text-green-600":c>=60?"text-yellow-600":"text-red-600",o=c=>c>=90?"Excellent! Outstanding performance!":c>=80?"Great job! Well done!":c>=70?"Good work! You did well!":c>=60?"Not bad! Keep practicing!":"Keep studying and try again!",l=n.questions.filter(c=>t.answers[c.id]===c.correctAnswer).length;return E.jsxs("div",{className:"max-w-4xl mx-auto",children:[E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8 mb-6",children:[E.jsxs("div",{className:"text-center mb-6",children:[E.jsxs("div",{className:`text-6xl font-bold mb-2 ${r(t.score)}`,children:[t.score,"%"]}),E.jsx("p",{className:"text-xl text-gray-600 mb-2",children:o(t.score)}),E.jsxs("p",{className:"text-gray-500",children:["You answered ",l," out of ",n.questions.length," questions correctly"]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[E.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l}),E.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),E.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.questions.length-l}),E.jsx("div",{className:"text-sm text-gray-600",children:"Incorrect Answers"})]}),E.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i(t.timeSpent)}),E.jsx("div",{className:"text-sm text-gray-600",children:"Time Spent"})]})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[E.jsxs("button",{onClick:e,className:"flex items-center justify-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[E.jsx(vE,{className:"h-4 w-4"}),E.jsx("span",{children:"Retake Quiz"})]}),E.jsxs("button",{onClick:s,className:"flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:[E.jsx(gE,{className:"h-4 w-4"}),E.jsx("span",{children:"Back to Dashboard"})]})]})]}),E.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[E.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Question Review"}),E.jsx("div",{className:"space-y-6",children:n.questions.map((c,u)=>{var f;const h=t.answers[c.id],d=h===c.correctAnswer;return E.jsx("div",{className:"border-b pb-6 last:border-b-0",children:E.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[d?E.jsx(TA,{className:"h-5 w-5 text-green-600 mt-1 flex-shrink-0"}):E.jsx(xE,{className:"h-5 w-5 text-red-600 mt-1 flex-shrink-0"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"flex items-center space-x-2 mb-2",children:E.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.difficulty==="easy"?"bg-green-100 text-green-800":c.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:(f=c.difficulty)==null?void 0:f.toUpperCase()})}),E.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Question ",u+1,": ",c.question]}),c.type==="multiple-choice"&&c.options&&E.jsx("div",{className:"space-y-2",children:c.options.map((p,m)=>{const v=h===m,S=c.correctAnswer===m;return E.jsx("div",{className:`p-2 rounded border ${S?"bg-green-50 border-green-200":v&&!d?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:E.jsxs("span",{className:"text-sm",children:[p,S&&E.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"(Correct)"}),v&&!d&&E.jsx("span",{className:"ml-2 text-red-600 font-medium",children:"(Your Answer)"})]})},m)})}),c.type==="true-false"&&E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:`p-2 rounded border ${c.correctAnswer==="true"?"bg-green-50 border-green-200":h==="true"&&!d?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:["True",c.correctAnswer==="true"&&E.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"(Correct)"}),h==="true"&&!d&&E.jsx("span",{className:"ml-2 text-red-600 font-medium",children:"(Your Answer)"})]}),E.jsxs("div",{className:`p-2 rounded border ${c.correctAnswer==="false"?"bg-green-50 border-green-200":h==="false"&&!d?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:["False",c.correctAnswer==="false"&&E.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"(Correct)"}),h==="false"&&!d&&E.jsx("span",{className:"ml-2 text-red-600 font-medium",children:"(Your Answer)"})]})]})]})]})},c.id)})})]})]})};function eP(){const[n,t]=ee.useState("dashboard"),{currentQuiz:e,currentAttempt:s,setCurrentQuiz:i,setCurrentAttempt:r}=Ap(),o=()=>{t("upload")},l=f=>{i(f),t("dashboard")},c=f=>{i(f),r(null),t("quiz")},u=f=>{t("results")},h=()=>{r(null),t("quiz")},d=()=>{i(null),r(null),t("dashboard")};return E.jsxs("div",{className:"min-h-screen bg-gray-50",children:[E.jsx("header",{className:"bg-white shadow-sm border-b",children:E.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:E.jsxs("div",{className:"flex items-center justify-between h-16",children:[E.jsxs("button",{onClick:d,className:"flex items-center space-x-3 text-gray-900 hover:text-gray-700 transition-colors",children:[E.jsx(fE,{className:"h-8 w-8 text-blue-600"}),E.jsx("span",{className:"text-xl font-bold",children:"QuizMaker"})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[n!=="dashboard"&&E.jsx("button",{onClick:d,className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Dashboard"}),n==="dashboard"&&E.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Create Quiz"})]})]})})}),E.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n==="dashboard"&&E.jsx(NE,{onCreateQuiz:o,onStartQuiz:c}),n==="upload"&&E.jsx(ZT,{onQuizGenerated:l}),n==="quiz"&&e&&E.jsx(JT,{quiz:e,onComplete:u,onBack:d}),n==="results"&&e&&s&&E.jsx(tP,{quiz:e,attempt:s,onRetake:h,onBackToDashboard:d})]}),E.jsx("footer",{className:"bg-white border-t mt-12",children:E.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:E.jsx("div",{className:"text-center text-gray-600",children:E.jsx("p",{children:" 2025 QuizMaker. Generate intelligent quizzes from your PDF documents."})})})})]})}kA(document.getElementById("root")).render(E.jsx(ee.StrictMode,{children:E.jsx(eP,{})}));
